{"ast":null,"code":"import _regeneratorRuntime from\"D:\\\\PROJEKTY\\\\APKI\\\\dj-truck\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"D:\\\\PROJEKTY\\\\APKI\\\\dj-truck\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import{Log,Logger}from\"./../../utils/logger/logger\";var apiUrl=process.env.REACT_APP_SC_API_URL;var maxResults=10;export function search(){return _search.apply(this,arguments);}function _search(){_search=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var query,limit,publicErrorMsg,comand,options,url,data,_args2=arguments;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:query=_args2.length>0&&_args2[0]!==undefined?_args2[0]:\"\";limit=_args2.length>1&&_args2[1]!==undefined?_args2[1]:maxResults;publicErrorMsg=\"Sorry during conectig to soundcloud api occured problem. Searching the soundlcoud database is not posible in this moment\";comand=\"/api/search?q=\";options='&maxResults='+limit;url=apiUrl+comand+encodeURI(query)+options;_context2.next=8;return fetch(url).then(function(res){return res.json();}).catch(function(error){Logger.push(Log.Error(['api','soundcloud','search'],\"Can't recive search data from soundcloud\"+error.message,publicErrorMsg,error));});case 8:data=_context2.sent;return _context2.abrupt(\"return\",data);case 10:case\"end\":return _context2.stop();}}},_callee2);}));return _search.apply(this,arguments);}export default{search:search,getUrl:function getUrl(id){return apiUrl+\"/api/download?id=\"+id;},getStreamUrl:function getStreamUrl(id){return apiUrl+\"/api/stream?id=\"+id;},getUrlToExternall:function(){var _getUrlToExternall=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(id){var trackData;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(apiUrl+\"/api/resolve\").then(function(res){return res.json();});case 2:trackData=_context.sent;if(trackData){_context.next=5;break;}return _context.abrupt(\"return\",\"www.soundcloud.com\");case 5:return _context.abrupt(\"return\",trackData===null||trackData===void 0?void 0:trackData.permalink_url);case 6:case\"end\":return _context.stop();}}},_callee);}));function getUrlToExternall(_x){return _getUrlToExternall.apply(this,arguments);}return getUrlToExternall;}()};","map":{"version":3,"sources":["D:/PROJEKTY/APKI/dj-truck/src/apis/sc/scApi.js"],"names":["Log","Logger","apiUrl","process","env","REACT_APP_SC_API_URL","maxResults","search","query","limit","publicErrorMsg","comand","options","url","encodeURI","fetch","then","res","json","catch","error","push","Error","message","data","getUrl","id","getStreamUrl","getUrlToExternall","trackData","permalink_url"],"mappings":"iOAAA,OAASA,GAAT,CAAcC,MAAd,KAA4B,6BAA5B,CAEA,GAAMC,CAAAA,MAAM,CAAGC,OAAO,CAACC,GAAR,CAAYC,oBAA3B,CACA,GAAMC,CAAAA,UAAU,CAAG,EAAnB,CAGA,eAAsBC,CAAAA,MAAtB,yC,mFAAO,gNAAsBC,KAAtB,kDAA8B,EAA9B,CAAkCC,KAAlC,kDAA0CH,UAA1C,CACGI,cADH,4HAGGC,MAHH,CAGY,gBAHZ,CAIGC,OAJH,CAIa,eAAiBH,KAJ9B,CAKGI,GALH,CAKSX,MAAM,CAAGS,MAAT,CAAkBG,SAAS,CAACN,KAAD,CAA3B,CAAqCI,OAL9C,wBAOcG,CAAAA,KAAK,CAACF,GAAD,CAAL,CAAWG,IAAX,CAAgB,SAAAC,GAAG,QAAIA,CAAAA,GAAG,CAACC,IAAJ,EAAJ,EAAnB,EAAmCC,KAAnC,CAA0C,SAAAC,KAAK,CAAI,CAChEnB,MAAM,CAACoB,IAAP,CAAYrB,GAAG,CAACsB,KAAJ,CACR,CAAC,KAAD,CAAQ,YAAR,CAAsB,QAAtB,CADQ,CAER,2CAA6CF,KAAK,CAACG,OAF3C,CAGRb,cAHQ,CAIRU,KAJQ,CAAZ,EAMH,CAPgB,CAPd,QAOCI,IAPD,iDAgBIA,IAhBJ,2D,yCAmBP,cAAe,CACXjB,MAAM,CAANA,MADW,CAGXkB,MAAM,CAAE,gBAACC,EAAD,CAAQ,CACZ,MAAOxB,CAAAA,MAAM,oBAAN,CAA+BwB,EAAtC,CACH,CALU,CAOXC,YAAY,CAAE,sBAACD,EAAD,CAAQ,CAClB,MAAOxB,CAAAA,MAAM,kBAAN,CAA6BwB,EAApC,CACH,CATU,CAWXE,iBAAiB,2FAAE,iBAAOF,EAAP,sJACSX,CAAAA,KAAK,CAACb,MAAM,CAAG,cAAV,CAAL,CAA+Bc,IAA/B,CAAqC,SAAAC,GAAG,QAAIA,CAAAA,GAAG,CAACC,IAAJ,EAAJ,EAAxC,CADT,QACTW,SADS,kBAEXA,SAFW,yDAEO,oBAFP,yCAIRA,SAJQ,SAIRA,SAJQ,iBAIRA,SAAS,CAAEC,aAJH,wDAAF,+GAXN,CAAf","sourcesContent":["import { Log, Logger } from \"./../../utils/logger/logger\";\r\n\r\nconst apiUrl = process.env.REACT_APP_SC_API_URL;\r\nconst maxResults = 10\r\n\r\n\r\nexport async function search(query = \"\", limit = maxResults) {\r\n    const publicErrorMsg =  `Sorry during conectig to soundcloud api occured problem. Searching the soundlcoud database is not posible in this moment`\r\n   \r\n    const comand = \"/api/search?q=\";\r\n    const options = '&maxResults=' + limit;\r\n    const url = apiUrl + comand + encodeURI(query) + options;\r\n\r\n    let data = await fetch(url).then(res => res.json()).catch( error => {\r\n        Logger.push(Log.Error(\r\n            ['api', 'soundcloud', 'search'],\r\n            \"Can't recive search data from soundcloud\" + error.message,\r\n            publicErrorMsg,\r\n            error\r\n        ))\r\n    });\r\n\r\n    return data;\r\n}\r\n\r\nexport default {\r\n    search,\r\n\r\n    getUrl: (id) => {\r\n        return apiUrl + `/api/download?id=` + id;\r\n    },\r\n\r\n    getStreamUrl: (id) => {\r\n        return apiUrl + `/api/stream?id=` + id;\r\n    },\r\n\r\n    getUrlToExternall: async (id) => {\r\n        const trackData = await fetch(apiUrl + \"/api/resolve\").then( res => res.json());\r\n        if(!trackData) return \"www.soundcloud.com\";\r\n\r\n        return trackData?.permalink_url;\r\n    }\r\n} \r\n"]},"metadata":{},"sourceType":"module"}