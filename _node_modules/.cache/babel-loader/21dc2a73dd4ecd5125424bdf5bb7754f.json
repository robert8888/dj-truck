{"ast":null,"code":"import { produce } from \"imer\";\nimport { ACTIONS } from \"./../../actions\";\nconst initState = {\n  // shape of logs:\n  logs: [{\n    createdAt: \"timestamp\",\n    type: \"log/ debug / error\",\n    message: {\n      public: \"For user view, in logbox component\",\n      protected: \"Only for administrator/ developer view\"\n    }\n  }],\n  //\n  logs: [],\n  lastPublic: \"\"\n};\nexport default function loggerReducer(state = initState, action) {\n  switch (action.type) {\n    case ACTIONS.LOG_PUSH:\n      {\n        const {\n          log\n        } = action;\n\n        if (!log) {\n          return state;\n        }\n\n        log.createdAt = new Date().getTime();\n        return produce(state, draftState => {\n          const logs = state.logs;\n          logs.push(log);\n          draftState.logs = logs;\n\n          if (log.message.public) {\n            drafState.lastPublic = log.message.public;\n          }\n        });\n      }\n\n    default:\n      return state;\n  }\n}","map":{"version":3,"sources":["D:/PROJEKTY/APKI/dj-truck/src/reducers/logger/loggerReducer.js"],"names":["produce","ACTIONS","initState","logs","createdAt","type","message","public","protected","lastPublic","loggerReducer","state","action","LOG_PUSH","log","Date","getTime","draftState","push","drafState"],"mappings":"AAAA,SAASA,OAAT,QAAwB,MAAxB;AACA,SAASC,OAAT,QAAwB,iBAAxB;AAEA,MAAMC,SAAS,GAAG;AACd;AACAC,EAAAA,IAAI,EAAC,CAAC;AACFC,IAAAA,SAAS,EAAE,WADT;AAEFC,IAAAA,IAAI,EAAE,oBAFJ;AAGFC,IAAAA,OAAO,EAAE;AACLC,MAAAA,MAAM,EAAE,oCADH;AAELC,MAAAA,SAAS,EAAE;AAFN;AAHP,GAAD,CAFS;AAUd;AACAL,EAAAA,IAAI,EAAG,EAXO;AAYdM,EAAAA,UAAU,EAAE;AAZE,CAAlB;AAeA,eAAe,SAASC,aAAT,CAAuBC,KAAK,GAAGT,SAA/B,EAA0CU,MAA1C,EAAiD;AAC5D,UAAOA,MAAM,CAACP,IAAd;AACI,SAAKJ,OAAO,CAACY,QAAb;AAAwB;AACpB,cAAM;AAACC,UAAAA;AAAD,YAAQF,MAAd;;AACA,YAAG,CAACE,GAAJ,EAAQ;AACJ,iBAAOH,KAAP;AACH;;AACDG,QAAAA,GAAG,CAACV,SAAJ,GAAiB,IAAIW,IAAJ,EAAD,CAAaC,OAAb,EAAhB;AAEA,eAAOhB,OAAO,CAACW,KAAD,EAAQM,UAAU,IAAG;AAC/B,gBAAMd,IAAI,GAAGQ,KAAK,CAACR,IAAnB;AACAA,UAAAA,IAAI,CAACe,IAAL,CAAUJ,GAAV;AAEAG,UAAAA,UAAU,CAACd,IAAX,GAAkBA,IAAlB;;AACA,cAAGW,GAAG,CAACR,OAAJ,CAAYC,MAAf,EAAsB;AAClBY,YAAAA,SAAS,CAACV,UAAV,GAAuBK,GAAG,CAACR,OAAJ,CAAYC,MAAnC;AACH;AACJ,SARa,CAAd;AASH;;AAED;AAAU,aAAOI,KAAP;AAnBd;AAqBH","sourcesContent":["import { produce } from \"imer\";\r\nimport { ACTIONS } from \"./../../actions\";\r\n\r\nconst initState = {\r\n    // shape of logs:\r\n    logs:[{\r\n        createdAt: \"timestamp\",\r\n        type: \"log/ debug / error\",\r\n        message: {\r\n            public: \"For user view, in logbox component\",\r\n            protected: \"Only for administrator/ developer view\",\r\n        },\r\n    }],\r\n    //\r\n    logs : [],\r\n    lastPublic: \"\",\r\n}\r\n\r\nexport default function loggerReducer(state = initState, action){\r\n    switch(action.type){\r\n        case ACTIONS.LOG_PUSH : {\r\n            const {log} = action;\r\n            if(!log){\r\n                return state;\r\n            }\r\n            log.createdAt = (new Date()).getTime();\r\n            \r\n            return produce(state, draftState =>{\r\n                const logs = state.logs;\r\n                logs.push(log);\r\n\r\n                draftState.logs = logs;\r\n                if(log.message.public){\r\n                    drafState.lastPublic = log.message.public;\r\n                }\r\n            })\r\n        }\r\n        \r\n        default : return state;\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}