{"ast":null,"code":"import _objectSpread from\"D:\\\\PROJEKTY\\\\APKI\\\\dj-truck\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"D:\\\\PROJEKTY\\\\APKI\\\\dj-truck\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _possibleConstructorReturn from\"D:\\\\PROJEKTY\\\\APKI\\\\dj-truck\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"D:\\\\PROJEKTY\\\\APKI\\\\dj-truck\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";import _assertThisInitialized from\"D:\\\\PROJEKTY\\\\APKI\\\\dj-truck\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";import _createClass from\"D:\\\\PROJEKTY\\\\APKI\\\\dj-truck\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"D:\\\\PROJEKTY\\\\APKI\\\\dj-truck\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import React from\"react\";import debounce from\"lodash/debounce\";import\"./slider.scss\";//props\n//from - down boundry\n//to  - up boundry value\n//onChange - handler for change\n//value - value to make external control\n//step - for quntize value\n//stick-zero - stick zero to sticki behaviore of slider like on fader\n//vertival or horizontal - vertiacl or horizonal position\nvar Slider=/*#__PURE__*/function(_React$Component){_inherits(Slider,_React$Component);_createClass(Slider,[{key:\"preventDrag\",//helper\nvalue:function preventDrag(e){e.preventDefault();}}]);function Slider(){var _this;_classCallCheck(this,Slider);_this=_possibleConstructorReturn(this,_getPrototypeOf(Slider).call(this));_this.state={sliderRange:null,sliderCurrnetPosition:null,sliderPrevPosition:null,isDragged:false,isTemp:false,// is temporary value return as second arguemnt onChange callback\nthumbSize:0,sliderAreaOffset:0};_this.getPostion=function(value){var _this$getRange=_this.getRange(),from=_this$getRange.from,range=_this$getRange.range;var progress=(value-from)/range;var position=progress*_this.state.sliderRange;return position+_this.state.thumbSize/2;};_this.evalValue=function(position){var _this$getRange2=_this.getRange(_this.props.from,_this.props.to),from=_this$getRange2.from,range=_this$getRange2.range;var progress=(position-_this.state.thumbSize/2)/_this.state.sliderRange;var value=range*progress+from;return value;};_this.setValue=function(value){var _this$getRange3=_this.getRange(),from=_this$getRange3.from,range=_this$getRange3.range;var progress=(value-from)/range;var position=progress*_this.state.sliderRange;_this.setPosition(position+_this.state.thumbSize/2);};_this.setPosition=function(currentPosition,prevPosition){var position=_this.boundPosition(currentPosition);_this.setState(_objectSpread({},_this.state,{sliderCurrnetPosition:position,sliderPrevPosition:prevPosition||_this.state.sliderPrevPosition}),function(){if(_this.props.onChange){_this.props.onChange(_this.evalValue(_this.state.sliderCurrnetPosition),_this.state.isTemp);}});_this.updateStyles();};_this.mouseDownHandle=function(event){if(event.target===_this.sliderAreaElement.current||event.target===_this.sliderRangeElement.current){//temporary jummp\n_this.setState(_objectSpread({},_this.state,{isTemp:true}));var rect=_this.sliderAreaElement.current.getBoundingClientRect();var position=_this.props.horizontal?event.clientX-rect.left:event.clientY-rect.top;var current=_this.state.sliderCurrnetPosition||_this.getPostion(_this.props.initValue||0);_this.setPosition(position,current);}// dragging\nelse if(event.target===_this.sliderThumbElement.current){_this.setState(_objectSpread({},_this.state,{isDragged:true}));var _rect=_this.sliderThumbElement.current.getBoundingClientRect();var shiftY=event.clientY-_rect.top;var shiftX=event.clientX-_rect.left;document.addEventListener(\"mousemove\",function(e){return _this.mouseMoveHandler.call(_assertThisInitialized(_this),e,shiftY,shiftX);});document.addEventListener(\"dragstart\",_this.preventDrag);}document.addEventListener(\"mouseup\",_this.mouseUpHandler);document.addEventListener(\"dragend\",_this.mouseUpHandler);};_this.mouseUpHandler=function(event){if(_this.state.isDragged){_this.setState(_objectSpread({},_this.state,{isDragged:false}));}else{_this.setState(_objectSpread({},_this.state,{isTemp:false}));if(_this.props.step){var step=_this.props.step;var prevVal=_this.evalValue(_this.state.sliderPrevPosition);if(_this.state.sliderCurrnetPosition>_this.state.sliderPrevPosition){prevVal+=step;}else{prevVal-=step;}_this.setPosition(_this.getPostion(prevVal));}else{_this.setPosition(_this.state.sliderPrevPosition);}}document.removeEventListener(\"mousemove\",_this.mouseMoveHandler.bind(_assertThisInitialized(_this)));document.removeEventListener(\"mouseup\",_this.mouseUpHandler);document.removeEventListener(\"dragend\",_this.mouseUpHandler);document.removeEventListener(\"dragstart\",_this.preventDrag);};_this.mouseMoveHandler=function(event,shiftY,shiftX){if(!_this.state.isDragged)return;var position;if(_this.props.horizontal){position=event.clientX-_this.state.sliderAreaOffset-shiftX+_this.state.thumbSize/2;}else{position=event.clientY-_this.state.sliderAreaOffset-shiftY+_this.state.thumbSize/2;}_this.setPosition(position);};_this.sliderRangeElement=React.createRef();_this.sliderThumbElement=React.createRef();_this.sliderAreaElement=React.createRef();return _this;}_createClass(Slider,[{key:\"getRange\",value:function getRange(){var from=this.props.from;var to=this.props.to;return{from:from,to:to,range:from*to<0?Math.abs(to)+Math.abs(from):to-from};}},{key:\"boundPosition\",value:function boundPosition(position){return Math.min(Math.max(position,this.state.thumbSize/2),this.state.sliderRange+this.state.thumbSize/2);}},{key:\"stickiPostion\",value:function stickiPostion(position){if(this.props.stickiZero&&this.props.from*this.props.to<0){var valueFromPostion=this.evalValue(position);if(Math.abs(valueFromPostion)-this.props.stickiZero<0){return this.getPostion(0,this.state,this.props);}}return position;}},{key:\"updateStyles\",value:function updateStyles(){var position=this.stickiPostion(this.state.sliderCurrnetPosition);if(this.props.horizontal){this.sliderThumbElement.current.style.left=position+\"px\";}else{this.sliderThumbElement.current.style.top=position+\"px\";}}},{key:\"updateState\",value:function updateState(){var _this2=this;if(!this.sliderThumbElement.current||!this.sliderAreaElement)return;var thumbRect=this.sliderThumbElement.current.getBoundingClientRect();var areaRect=this.sliderAreaElement.current.getBoundingClientRect();var rangeRect=this.sliderRangeElement.current.getBoundingClientRect();this.setState(function(state){var _state=_objectSpread({},state);if(_this2.props.horizontal){_state.sliderRange=rangeRect.width;_state.sliderAreaOffset=areaRect.left;_state.thumbSize=thumbRect.width;}else{_state.sliderRange=rangeRect.height;_state.sliderAreaOffset=areaRect.top;_state.thumbSize=thumbRect.height;}return _state;},function(){if(_this2.props.value!==undefined){_this2.setValue(_this2.props.value);}});}},{key:\"componentDidMount\",value:function componentDidMount(){setTimeout(this.updateState.bind(this),100);this.updateStateDebounced=debounce(this.updateState.bind(this),300);window.addEventListener(\"resize\",this.updateStateDebounced);this.sliderAreaElement.current.addEventListener(\"mousedown\",this.mouseDownHandle.bind(this));}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){window.removeEventListener('resize',this.updateStateDebounced);}},{key:\"componentDidUpdate\",value:function componentDidUpdate(prevProbs){if(this.props.value&&this.props.value!==prevProbs.value){var position=this.getPostion(this.props.value);if(position!==this.state.sliderCurrnetPosition){this.setPosition(position);}}}},{key:\"shouldComponentUpdate\",value:function shouldComponentUpdate(nextProps,nextState){return this.props.value!==nextProps.value;}},{key:\"render\",value:function render(){return React.createElement(\"div\",{className:\"slider\"+(this.props.className?\" \"+this.props.className:\"\")},React.createElement(\"div\",{ref:this.sliderAreaElement,className:\"slider-area\"},React.createElement(\"div\",{ref:this.sliderRangeElement,className:\"slider-range\"}),React.createElement(\"div\",{className:\"slider-thumb\",ref:this.sliderThumbElement})));}}]);return Slider;}(React.Component);export default Slider;","map":{"version":3,"sources":["D:/PROJEKTY/APKI/dj-truck/src/pages/console/components/common/RangeSlider/Slider.js"],"names":["React","debounce","Slider","e","preventDefault","state","sliderRange","sliderCurrnetPosition","sliderPrevPosition","isDragged","isTemp","thumbSize","sliderAreaOffset","getPostion","value","getRange","from","range","progress","position","evalValue","props","to","setValue","setPosition","currentPosition","prevPosition","boundPosition","setState","onChange","updateStyles","mouseDownHandle","event","target","sliderAreaElement","current","sliderRangeElement","rect","getBoundingClientRect","horizontal","clientX","left","clientY","top","initValue","sliderThumbElement","shiftY","shiftX","document","addEventListener","mouseMoveHandler","call","preventDrag","mouseUpHandler","step","prevVal","removeEventListener","bind","createRef","Math","abs","min","max","stickiZero","valueFromPostion","stickiPostion","style","thumbRect","areaRect","rangeRect","_state","width","height","undefined","setTimeout","updateState","updateStateDebounced","window","prevProbs","nextProps","nextState","className","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport debounce from \"lodash/debounce\";\r\nimport \"./slider.scss\";\r\n\r\n//props\r\n//from - down boundry\r\n//to  - up boundry value\r\n//onChange - handler for change\r\n//value - value to make external control\r\n//step - for quntize value\r\n//stick-zero - stick zero to sticki behaviore of slider like on fader\r\n//vertival or horizontal - vertiacl or horizonal position\r\n\r\n\r\nclass Slider extends React.Component {\r\n  //helper\r\n  preventDrag(e){ e.preventDefault() }\r\n\r\n  constructor() {\r\n    super();\r\n\r\n    this.sliderRangeElement = React.createRef();\r\n    this.sliderThumbElement = React.createRef();\r\n    this.sliderAreaElement = React.createRef();\r\n  }\r\n\r\n  state = {\r\n\r\n    sliderRange: null,\r\n    sliderCurrnetPosition: null,\r\n    sliderPrevPosition: null,\r\n    isDragged: false,\r\n    isTemp: false, // is temporary value return as second arguemnt onChange callback\r\n\r\n    thumbSize: 0,\r\n    sliderAreaOffset: 0\r\n  };\r\n\r\n  getRange () {\r\n    const from = this.props.from;\r\n    const to = this.props.to;\r\n    return {\r\n      from,\r\n      to,\r\n      range: from * to < 0 ? Math.abs(to) + Math.abs(from) : to - from\r\n    };\r\n  };\r\n\r\n  getPostion = (value) => {\r\n    const { from, range } = this.getRange();\r\n    const progress = (value - from) / range;\r\n    const position = progress * this.state.sliderRange;\r\n    return position + this.state.thumbSize / 2;\r\n  };\r\n\r\n\r\n\r\n  evalValue = position => {\r\n    const { from, range } = this.getRange(this.props.from, this.props.to);\r\n    const progress =\r\n      (position - this.state.thumbSize / 2) / this.state.sliderRange;\r\n\r\n    let value = range * progress + from;\r\n    return value;\r\n  };\r\n\r\n  setValue = value => {\r\n    const { from, range } = this.getRange();\r\n    const progress = (value - from) / range;\r\n    const position = progress * this.state.sliderRange;\r\n    this.setPosition(position + this.state.thumbSize / 2);\r\n  };\r\n\r\n  boundPosition(position) {\r\n    return Math.min(\r\n      Math.max(position, this.state.thumbSize / 2),\r\n      this.state.sliderRange + this.state.thumbSize / 2\r\n    );\r\n  }\r\n\r\n  stickiPostion(position) {\r\n    if (this.props.stickiZero && this.props.from * this.props.to < 0) {\r\n      let valueFromPostion = this.evalValue(position);\r\n      if (Math.abs(valueFromPostion) - this.props.stickiZero < 0) {\r\n        return this.getPostion(0, this.state, this.props);\r\n      }\r\n    }\r\n    return position;\r\n  }\r\n\r\n  setPosition = (currentPosition, prevPosition) => {\r\n    let position = this.boundPosition(currentPosition);\r\n\r\n    this.setState(\r\n      {\r\n        ...this.state,\r\n        sliderCurrnetPosition: position,\r\n        sliderPrevPosition: prevPosition || this.state.sliderPrevPosition\r\n      },\r\n      () => {\r\n        if (this.props.onChange) {\r\n          this.props.onChange(\r\n            this.evalValue(this.state.sliderCurrnetPosition),\r\n            this.state.isTemp\r\n          );\r\n        }\r\n      }\r\n    );\r\n\r\n    this.updateStyles();\r\n  };\r\n\r\n  updateStyles(){\r\n    let position = this.stickiPostion(this.state.sliderCurrnetPosition);\r\n    if (this.props.horizontal) {\r\n      this.sliderThumbElement.current.style.left = position + \"px\";\r\n    } else {\r\n      this.sliderThumbElement.current.style.top = position + \"px\";\r\n    }\r\n  }\r\n\r\n\r\n\r\n  mouseDownHandle = event => {\r\n    if (\r\n      event.target === this.sliderAreaElement.current ||\r\n      event.target === this.sliderRangeElement.current\r\n    ) {\r\n      //temporary jummp\r\n      this.setState({ ...this.state, isTemp: true });\r\n      const rect = this.sliderAreaElement.current.getBoundingClientRect();\r\n      const position = this.props.horizontal\r\n        ? event.clientX - rect.left\r\n        : event.clientY - rect.top;\r\n      \r\n      const current = this.state.sliderCurrnetPosition || this.getPostion(this.props.initValue || 0) \r\n      this.setPosition(position, current);\r\n    } // dragging\r\n    else if (event.target === this.sliderThumbElement.current) {\r\n      this.setState({ ...this.state, isDragged: true });\r\n      const rect = this.sliderThumbElement.current.getBoundingClientRect();\r\n      const shiftY = event.clientY - rect.top;\r\n      const shiftX = event.clientX - rect.left;\r\n      document.addEventListener(\"mousemove\", e =>\r\n        this.mouseMoveHandler.call(this, e, shiftY, shiftX)\r\n      );\r\n      document.addEventListener(\"dragstart\", this.preventDrag);\r\n    }\r\n\r\n    document.addEventListener(\"mouseup\", this.mouseUpHandler);\r\n    document.addEventListener(\"dragend\", this.mouseUpHandler);\r\n  };\r\n\r\n  mouseUpHandler = event => {\r\n    if (this.state.isDragged) {\r\n      this.setState({ ...this.state, isDragged: false });\r\n    } else {\r\n      this.setState({ ...this.state, isTemp: false });\r\n      if (this.props.step) {\r\n        const step = this.props.step;\r\n        let prevVal = this.evalValue(this.state.sliderPrevPosition);\r\n        if (this.state.sliderCurrnetPosition > this.state.sliderPrevPosition) {\r\n          prevVal += step;\r\n        } else {\r\n          prevVal -= step;\r\n        }\r\n        this.setPosition(this.getPostion(prevVal));\r\n      } else {\r\n        this.setPosition(this.state.sliderPrevPosition);\r\n      }\r\n    }\r\n\r\n    document.removeEventListener(\"mousemove\", this.mouseMoveHandler.bind(this));\r\n    document.removeEventListener(\"mouseup\", this.mouseUpHandler);\r\n    document.removeEventListener(\"dragend\", this.mouseUpHandler);\r\n    document.removeEventListener(\"dragstart\", this.preventDrag);\r\n  };\r\n\r\n  mouseMoveHandler = (event, shiftY, shiftX) => {\r\n    if (!this.state.isDragged) return;\r\n    let position;\r\n    if (this.props.horizontal) {\r\n      position =\r\n        event.clientX -\r\n        this.state.sliderAreaOffset -\r\n        shiftX +\r\n        this.state.thumbSize / 2;\r\n    } else {\r\n      position =\r\n        event.clientY -\r\n        this.state.sliderAreaOffset -\r\n        shiftY +\r\n        this.state.thumbSize / 2;\r\n    }\r\n    this.setPosition(position);\r\n  };\r\n\r\n  updateState(){\r\n    if(!this.sliderThumbElement.current || !this.sliderAreaElement) return;\r\n    \r\n    const thumbRect = this.sliderThumbElement.current.getBoundingClientRect();\r\n    const areaRect = this.sliderAreaElement.current.getBoundingClientRect();\r\n    const rangeRect = this.sliderRangeElement.current.getBoundingClientRect();\r\n\r\n    this.setState(\r\n      state => {\r\n        const _state = { ...state };\r\n        if (this.props.horizontal) {\r\n          _state.sliderRange = rangeRect.width;\r\n          _state.sliderAreaOffset = areaRect.left;\r\n          _state.thumbSize = thumbRect.width;\r\n        } else {\r\n          _state.sliderRange = rangeRect.height;\r\n          _state.sliderAreaOffset = areaRect.top;\r\n          _state.thumbSize = thumbRect.height;\r\n        }\r\n        return _state;\r\n      },\r\n      () => {\r\n        if (this.props.value !== undefined) {\r\n          this.setValue(this.props.value);\r\n        }\r\n      }\r\n    );\r\n  };\r\n\r\n  componentDidMount() {\r\n\r\n    setTimeout(this.updateState.bind(this), 100) ;\r\n\r\n    this.updateStateDebounced = debounce(this.updateState.bind(this), 300)\r\n    window.addEventListener(\"resize\", this.updateStateDebounced);\r\n\r\n    this.sliderAreaElement.current\r\n      .addEventListener(\"mousedown\",this.mouseDownHandle.bind(this));\r\n  }\r\n\r\n  componentWillUnmount(){\r\n    window.removeEventListener('resize', this.updateStateDebounced);\r\n  }\r\n\r\n  componentDidUpdate(prevProbs){\r\n    if( this.props.value && this.props.value !== prevProbs.value){\r\n      let position = this.getPostion(this.props.value);\r\n      if(position !== this.state.sliderCurrnetPosition){\r\n        this.setPosition(position);\r\n      }\r\n    }\r\n  }\r\n\r\n  shouldComponentUpdate(nextProps, nextState){\r\n    return (this.props.value !== nextProps.value)\r\n  }\r\n\r\n  render() {\r\n    \r\n    return (\r\n      <div \r\n        className={ \"slider\" + (this.props.className ? \" \" + this.props.className : \"\")}\r\n      >\r\n        <div ref={this.sliderAreaElement} className=\"slider-area\">\r\n          <div ref={this.sliderRangeElement} className=\"slider-range\" />\r\n          <div\r\n            className=\"slider-thumb\"\r\n            ref={this.sliderThumbElement}\r\n            \r\n          />\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Slider;\r\n"]},"metadata":{},"sourceType":"module"}