{"ast":null,"code":"import _slicedToArray from\"D:\\\\PROJEKTY\\\\APKI\\\\dj-truck\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useMemo,useEffect,useState,useCallback}from\"react\";import BinaryButton from\"./../../BinnaryButton/BinnaryButton\";import usePlaybackState,{PLAYBACK_STATE}from\"./../../../Hooks/usePlabackState\";import{FontAwesomeIcon}from'@fortawesome/react-fontawesome';import classNames from\"classnames\";import\"./playback-button.scss\";var PlaybackButton=function PlaybackButton(_ref){var playback=_ref.playback,player=_ref.player;var _usePlaybackState=usePlaybackState(),_usePlaybackState2=_slicedToArray(_usePlaybackState,4),state=_usePlaybackState2[0],icon=_usePlaybackState2[1],toggleHandler=_usePlaybackState2[2],setState=_usePlaybackState2[3];var btnClassNames=useMemo(function(){return classNames(\"playback-button\",{\"playback-button--active\":state===PLAYBACK_STATE.PLAY});},[state]);var _useState=useState(),_useState2=_slicedToArray(_useState,2),current=_useState2[0],setCurrent=_useState2[1];useEffect(function(){if(current){setState(current.state);}},[current,setState]);useEffect(function(){if(player){player.subscribeCurrent(setCurrent);}return function(){player.unSubscribeCurrent(setCurrent);};},[player,setCurrent]);var buttonClick=useCallback(function(){if(!current){return;}toggleHandler.apply(void 0,arguments);var nextState=state===PLAYBACK_STATE.PLAY?PLAYBACK_STATE.PAUSE:PLAYBACK_STATE.PLAY;playback(null,nextState);},[toggleHandler,current,playback,state]);return React.createElement(\"div\",{className:\"playback-button-container\"},React.createElement(BinaryButton,{className:btnClassNames,onChange:buttonClick},React.createElement(FontAwesomeIcon,{icon:icon})));};export default PlaybackButton;","map":{"version":3,"sources":["D:/PROJEKTY/APKI/dj-truck/src/pages/common/components/PlayerControls/PlaybackButton/PlaybackButton.js"],"names":["React","useMemo","useEffect","useState","useCallback","BinaryButton","usePlaybackState","PLAYBACK_STATE","FontAwesomeIcon","classNames","PlaybackButton","playback","player","state","icon","toggleHandler","setState","btnClassNames","PLAY","current","setCurrent","subscribeCurrent","unSubscribeCurrent","buttonClick","nextState","PAUSE"],"mappings":"kHAAA,MAAOA,CAAAA,KAAP,EAAeC,OAAf,CAAwBC,SAAxB,CAAmCC,QAAnC,CAA6CC,WAA7C,KAA+D,OAA/D,CACA,MAAOC,CAAAA,YAAP,KAAyB,qCAAzB,CACA,MAAOC,CAAAA,gBAAP,EAA2BC,cAA3B,KAAgD,kCAAhD,CACA,OAASC,eAAT,KAAgC,gCAAhC,CACA,MAAOC,CAAAA,UAAP,KAAuB,YAAvB,CACA,MAAO,wBAAP,CAEA,GAAMC,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,MAAwB,IAAtBC,CAAAA,QAAsB,MAAtBA,QAAsB,CAAZC,MAAY,MAAZA,MAAY,uBAEIN,gBAAgB,EAFpB,wDAEpCO,KAFoC,uBAE7BC,IAF6B,uBAEvBC,aAFuB,uBAERC,QAFQ,uBAI3C,GAAMC,CAAAA,aAAa,CAAGhB,OAAO,CAAC,UAAI,CAC9B,MAAOQ,CAAAA,UAAU,CACb,iBADa,CAEb,CACI,0BAA4BI,KAAK,GAAKN,cAAc,CAACW,IADzD,CAFa,CAAjB,CAMH,CAP4B,CAO1B,CAACL,KAAD,CAP0B,CAA7B,CAJ2C,cAabV,QAAQ,EAbK,wCAapCgB,OAboC,eAa3BC,UAb2B,eAe3ClB,SAAS,CAAC,UAAI,CACV,GAAGiB,OAAH,CAAW,CACPH,QAAQ,CAACG,OAAO,CAACN,KAAT,CAAR,CACH,CACJ,CAJQ,CAIN,CAACM,OAAD,CAAUH,QAAV,CAJM,CAAT,CAMAd,SAAS,CAAC,UAAI,CACV,GAAGU,MAAH,CAAU,CACPA,MAAM,CAACS,gBAAP,CAAwBD,UAAxB,EACF,CAED,MAAO,WAAM,CACTR,MAAM,CAACU,kBAAP,CAA0BF,UAA1B,EACH,CAFD,CAGH,CARQ,CAQN,CAACR,MAAD,CAASQ,UAAT,CARM,CAAT,CAUA,GAAMG,CAAAA,WAAW,CAAGnB,WAAW,CAAC,UAAW,CACvC,GAAG,CAACe,OAAJ,CAAY,CACR,OACH,CACDJ,aAAa,MAAb,mBACA,GAAMS,CAAAA,SAAS,CAAIX,KAAK,GAAKN,cAAc,CAACW,IAA1B,CAAkCX,cAAc,CAACkB,KAAjD,CAAyDlB,cAAc,CAACW,IAA1F,CACAP,QAAQ,CAAE,IAAF,CAASa,SAAT,CAAR,CACH,CAP8B,CAO5B,CAACT,aAAD,CAAgBI,OAAhB,CAAyBR,QAAzB,CAAmCE,KAAnC,CAP4B,CAA/B,CAUA,MACI,4BAAK,SAAS,CAAC,2BAAf,EACI,oBAAC,YAAD,EAAc,SAAS,CAAEI,aAAzB,CAAwC,QAAQ,CAAEM,WAAlD,EACI,oBAAC,eAAD,EAAiB,IAAI,CAAET,IAAvB,EADJ,CADJ,CADJ,CAQH,CAjDD,CAmDA,cAAeJ,CAAAA,cAAf","sourcesContent":["import React, {useMemo, useEffect, useState, useCallback} from \"react\";\r\nimport BinaryButton from \"./../../BinnaryButton/BinnaryButton\";\r\nimport usePlaybackState , {PLAYBACK_STATE} from \"./../../../Hooks/usePlabackState\";\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\nimport classNames from \"classnames\"\r\nimport \"./playback-button.scss\";\r\n\r\nconst PlaybackButton = ({playback, player}) => {\r\n\r\n    const [state, icon, toggleHandler, setState] = usePlaybackState();\r\n\r\n    const btnClassNames = useMemo(()=>{\r\n        return classNames(\r\n            \"playback-button\",\r\n            {\r\n                \"playback-button--active\": (state === PLAYBACK_STATE.PLAY)\r\n            }\r\n        )\r\n    }, [state])\r\n\r\n    const [current, setCurrent] = useState();\r\n    \r\n    useEffect(()=>{\r\n        if(current){\r\n            setState(current.state);\r\n        }\r\n    }, [current, setState])\r\n\r\n    useEffect(()=>{\r\n        if(player){\r\n           player.subscribeCurrent(setCurrent);\r\n        }\r\n\r\n        return () => {\r\n            player.unSubscribeCurrent(setCurrent);\r\n        }\r\n    }, [player, setCurrent])\r\n\r\n    const buttonClick = useCallback((...args)=>{\r\n        if(!current){\r\n            return;\r\n        }\r\n        toggleHandler(...args);\r\n        const nextState = (state === PLAYBACK_STATE.PLAY) ? PLAYBACK_STATE.PAUSE : PLAYBACK_STATE.PLAY;\r\n        playback( null , nextState);\r\n    }, [toggleHandler, current, playback, state])\r\n\r\n\r\n    return (\r\n        <div className=\"playback-button-container\">\r\n            <BinaryButton className={btnClassNames} onChange={buttonClick}>\r\n                <FontAwesomeIcon icon={icon}/>\r\n            </BinaryButton>\r\n        </div>\r\n    )\r\n\r\n}\r\n\r\nexport default PlaybackButton;\r\n"]},"metadata":{},"sourceType":"module"}