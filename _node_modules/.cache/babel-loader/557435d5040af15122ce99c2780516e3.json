{"ast":null,"code":"import _slicedToArray from\"D:\\\\PROJEKTY\\\\APKI\\\\dj-truck\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState,useMemo,useCallback}from\"react\";import{connect}from\"react-redux\";import Tracklist from\"./../TrackTable/TrackTable\";import{formater}from\"./../../../../utils/time/timeFromater\";import ErrorBoundary from\"./../ErrorBoundary/ErrorBoundary\";import\"./record-track-list.scss\";var RecordTracklist=function RecordTracklist(_ref){var record=_ref.record,onSeek=_ref.onSeek;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),tracklist=_useState2[0],setTracklist=_useState2[1];var cols=useMemo(function(){return{\"#\":{map:\"index\"},// \"Source\": \"source\",\n\"Title\":{map:\"title\",class:'overflow'},\"From\":{map:\"start\"},\"To\":{map:\"end\"}};},[]);useEffect(function(){if(!record)return;setTracklist(record.tracks.map(function(item){return{start:formater.secondsToStr(item.start),_start:item.start,end:formater.secondsToStr(item.end),_end:item.end,id:item.track.id,title:item.track.title,source:item.track.source,sourceId:item.track.sourceId};}));},[record,setTracklist]);var onClickTrack=useCallback(function(index,id){if(!onSeek||!tracklist)return;var to=tracklist.find(function(track){return track.id===id;})._start;onSeek(to);},[onSeek,tracklist]);return React.createElement(ErrorBoundary,null,React.createElement(Tracklist,{className:\"record-track-list\",cols:cols,items:tracklist,onClickRow:onClickTrack}));};var mapStateToProps=function mapStateToProps(state){return{record:state.records.currentRecord};};export default connect(mapStateToProps)(RecordTracklist);","map":{"version":3,"sources":["D:/PROJEKTY/APKI/dj-truck/src/pages/common/components/RecordTracklist/RecordTracklist.js"],"names":["React","useEffect","useState","useMemo","useCallback","connect","Tracklist","formater","ErrorBoundary","RecordTracklist","record","onSeek","tracklist","setTracklist","cols","map","class","tracks","item","start","secondsToStr","_start","end","_end","id","track","title","source","sourceId","onClickTrack","index","to","find","mapStateToProps","state","records","currentRecord"],"mappings":"kHAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,CAAqCC,OAArC,CAA8CC,WAA9C,KAAiE,OAAjE,CACA,OAASC,OAAT,KAAwB,aAAxB,CACA,MAAOC,CAAAA,SAAP,KAAsB,4BAAtB,CACA,OAASC,QAAT,KAAyB,uCAAzB,CACA,MAAOC,CAAAA,aAAP,KAA0B,kCAA1B,CACA,MAAO,0BAAP,CAEA,GAAMC,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,MAAwB,IAArBC,CAAAA,MAAqB,MAArBA,MAAqB,CAAZC,MAAY,MAAZA,MAAY,eACVT,QAAQ,CAAC,IAAD,CADE,wCACrCU,SADqC,eAC1BC,YAD0B,eAG5C,GAAMC,CAAAA,IAAI,CAAGX,OAAO,CAAC,iBAAO,CACxB,IAAK,CAAEY,GAAG,CAAE,OAAP,CADmB,CAExB;AACA,QAAS,CAAEA,GAAG,CAAE,OAAP,CAAkBC,KAAK,CAAE,UAAzB,CAHe,CAIxB,OAAQ,CAAED,GAAG,CAAE,OAAP,CAJgB,CAKxB,KAAM,CAAEA,GAAG,CAAE,KAAP,CALkB,CAAP,EAAD,CAMhB,EANgB,CAApB,CAQAd,SAAS,CAAC,UAAM,CACZ,GAAI,CAACS,MAAL,CAAa,OACbG,YAAY,CAACH,MAAM,CAACO,MAAP,CAAcF,GAAd,CAAkB,SAAAG,IAAI,QAAK,CACpCC,KAAK,CAAEZ,QAAQ,CAACa,YAAT,CAAsBF,IAAI,CAACC,KAA3B,CAD6B,CAEpCE,MAAM,CAAGH,IAAI,CAACC,KAFsB,CAGpCG,GAAG,CAAEf,QAAQ,CAACa,YAAT,CAAsBF,IAAI,CAACI,GAA3B,CAH+B,CAIpCC,IAAI,CAAEL,IAAI,CAACI,GAJyB,CAKpCE,EAAE,CAAEN,IAAI,CAACO,KAAL,CAAWD,EALqB,CAMpCE,KAAK,CAAER,IAAI,CAACO,KAAL,CAAWC,KANkB,CAOpCC,MAAM,CAAET,IAAI,CAACO,KAAL,CAAWE,MAPiB,CAQpCC,QAAQ,CAAEV,IAAI,CAACO,KAAL,CAAWG,QARe,CAAL,EAAtB,CAAD,CAAZ,CAUH,CAZQ,CAYN,CAAClB,MAAD,CAASG,YAAT,CAZM,CAAT,CAcA,GAAMgB,CAAAA,YAAY,CAAGzB,WAAW,CAAC,SAAC0B,KAAD,CAAQN,EAAR,CAAa,CAC1C,GAAG,CAACb,MAAD,EAAW,CAACC,SAAf,CAA0B,OAC1B,GAAMmB,CAAAA,EAAE,CAAGnB,SAAS,CAACoB,IAAV,CAAe,SAAAP,KAAK,QAAIA,CAAAA,KAAK,CAACD,EAAN,GAAaA,EAAjB,EAApB,EAAyCH,MAApD,CACAV,MAAM,CAACoB,EAAD,CAAN,CACH,CAJ+B,CAI7B,CAACpB,MAAD,CAASC,SAAT,CAJ6B,CAAhC,CAMA,MACI,qBAAC,aAAD,MACI,oBAAC,SAAD,EAAW,SAAS,CAAC,mBAArB,CACI,IAAI,CAAEE,IADV,CAEI,KAAK,CAAEF,SAFX,CAGI,UAAU,CAAEiB,YAHhB,EADJ,CADJ,CASH,CAxCD,CA0CA,GAAMI,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,CAAAC,KAAK,QAAK,CAC9BxB,MAAM,CAAEwB,KAAK,CAACC,OAAN,CAAcC,aADQ,CAAL,EAA7B,CAIA,cAAe/B,CAAAA,OAAO,CAAC4B,eAAD,CAAP,CAAyBxB,eAAzB,CAAf","sourcesContent":["import React, { useEffect, useState, useMemo, useCallback } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport Tracklist from \"./../TrackTable/TrackTable\";\r\nimport { formater } from \"./../../../../utils/time/timeFromater\";\r\nimport ErrorBoundary from \"./../ErrorBoundary/ErrorBoundary\";\r\nimport \"./record-track-list.scss\";\r\n\r\nconst RecordTracklist = ({ record , onSeek}) => {\r\n    const [tracklist, setTracklist] = useState(null);\r\n\r\n    const cols = useMemo(() => ({\r\n        \"#\": { map: \"index\" },\r\n        // \"Source\": \"source\",\r\n        \"Title\": { map: \"title\"  , class: 'overflow'},\r\n        \"From\": { map: \"start\" },\r\n        \"To\": { map: \"end\" }\r\n    }), []);\r\n\r\n    useEffect(() => {\r\n        if (!record) return;\r\n        setTracklist(record.tracks.map(item => ({\r\n            start: formater.secondsToStr(item.start),\r\n            _start : item.start,\r\n            end: formater.secondsToStr(item.end),\r\n            _end: item.end,\r\n            id: item.track.id,\r\n            title: item.track.title,\r\n            source: item.track.source,\r\n            sourceId: item.track.sourceId,\r\n        })))\r\n    }, [record, setTracklist])\r\n\r\n    const onClickTrack = useCallback((index, id)=>{\r\n        if(!onSeek || !tracklist) return;\r\n        const to = tracklist.find(track => track.id === id)._start;\r\n        onSeek(to)\r\n    }, [onSeek, tracklist])\r\n\r\n    return (\r\n        <ErrorBoundary>\r\n            <Tracklist className=\"record-track-list\"\r\n                cols={cols}\r\n                items={tracklist}\r\n                onClickRow={onClickTrack}\r\n            />\r\n        </ErrorBoundary>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n    record: state.records.currentRecord,\r\n})\r\n\r\nexport default connect(mapStateToProps)(RecordTracklist);"]},"metadata":{},"sourceType":"module"}