{"ast":null,"code":"import _classCallCheck from\"D:\\\\PROJEKTY\\\\APKI\\\\dj-truck\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"D:\\\\PROJEKTY\\\\APKI\\\\dj-truck\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"D:\\\\PROJEKTY\\\\APKI\\\\dj-truck\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"D:\\\\PROJEKTY\\\\APKI\\\\dj-truck\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";import _inherits from\"D:\\\\PROJEKTY\\\\APKI\\\\dj-truck\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import React from\"react\";import Console from\"./../../../../../core/console/console\";import\"./sync-bar.scss\";var SyncBar=/*#__PURE__*/function(_React$Component){_inherits(SyncBar,_React$Component);function SyncBar(){var _this;_classCallCheck(this,SyncBar);_this=_possibleConstructorReturn(this,_getPrototypeOf(SyncBar).apply(this,arguments));_this.thumbElement=React.createRef();_this.lastCall=false;_this.break=true;return _this;}_createClass(SyncBar,[{key:\"update\",value:function update(){var _this2=this;if(this.break){return;}setTimeout(function(){return requestAnimationFrame(_this2.update.bind(_this2),50);});var now=new Date().getTime();if(now-this.lastCall>100){this.lastCall=now;var position=this.channelInterface.getSyncBarPosition();this.applyStyle(position);}}},{key:\"applyStyle\",value:function applyStyle(position){var scale=2*position;var translateX=-((1-scale)/2*100);if(position<0){scale*=-1;}this.thumbElement.current.style.transform=\"translateX(\"+translateX+\"%) scaleX(\"+scale+\")\";}},{key:\"activate\",value:function activate(){this.thumbElement.current.style.opacity=\"1\";this.break=false;this.update();}},{key:\"deActivate\",value:function deActivate(){this.thumbElement.current.style.opacity=\"0\";this.break=true;}},{key:\"componentDidUpdate\",value:function componentDidUpdate(){if(this.props.active){this.activate();}else{this.deActivate();}}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){this.deActivate();}},{key:\"componentDidMount\",value:function componentDidMount(){this.channelInterface=Console.Get().getChannelInterface(this.props.name);}},{key:\"render\",value:function render(){return React.createElement(\"div\",{className:this.props.className+\" sync-bar-deck-\"+this.props.name},React.createElement(\"div\",{className:\"bar-area\"},React.createElement(\"div\",{ref:this.thumbElement,className:\"bar-thumb\"})));}}]);return SyncBar;}(React.Component);export default SyncBar;","map":{"version":3,"sources":["D:/PROJEKTY/APKI/dj-truck/src/pages/console/components/Console/Deck/SyncControl/SyncBar/SyncBar.js"],"names":["React","Console","SyncBar","arguments","thumbElement","createRef","lastCall","break","setTimeout","requestAnimationFrame","update","bind","now","Date","getTime","position","channelInterface","getSyncBarPosition","applyStyle","scale","translateX","current","style","transform","opacity","props","active","activate","deActivate","Get","getChannelInterface","name","className","Component"],"mappings":"wkBAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,OAAP,KAAoB,uCAApB,CACA,MAAO,iBAAP,C,GAEMC,CAAAA,O,6EACJ,kBAAc,yCACZ,0EAASC,SAAT,GACA,MAAKC,YAAL,CAAoBJ,KAAK,CAACK,SAAN,EAApB,CAEA,MAAKC,QAAL,CAAgB,KAAhB,CACA,MAAKC,KAAL,CAAa,IAAb,CALY,aAMb,C,2DAGQ,iBACP,GAAG,KAAKA,KAAR,CAAc,CACZ,OACD,CAEDC,UAAU,CAAE,iBAAMC,CAAAA,qBAAqB,CAAC,MAAI,CAACC,MAAL,CAAYC,IAAZ,CAAiB,MAAjB,CAAD,CAAyB,EAAzB,CAA3B,EAAF,CAAV,CACA,GAAMC,CAAAA,GAAG,CAAG,GAAIC,CAAAA,IAAJ,GAAWC,OAAX,EAAZ,CAEA,GAAIF,GAAG,CAAG,KAAKN,QAAX,CAAsB,GAA1B,CAA+B,CAC7B,KAAKA,QAAL,CAAgBM,GAAhB,CACA,GAAMG,CAAAA,QAAQ,CAAG,KAAKC,gBAAL,CAAsBC,kBAAtB,EAAjB,CACA,KAAKC,UAAL,CAAgBH,QAAhB,EACD,CACF,C,8CAEUA,Q,CAAU,CAEnB,GAAII,CAAAA,KAAK,CAAG,EAAIJ,QAAhB,CACA,GAAIK,CAAAA,UAAU,CAAG,EAAE,CAAC,EAAID,KAAL,EAAc,CAAd,CAAkB,GAApB,CAAjB,CAEA,GAAIJ,QAAQ,CAAG,CAAf,CAAkB,CAChBI,KAAK,EAAI,CAAC,CAAV,CACD,CAED,KAAKf,YAAL,CAAkBiB,OAAlB,CAA0BC,KAA1B,CAAgCC,SAAhC,CAA4C,cAAgBH,UAAhB,CAA6B,YAA7B,CAA4CD,KAA5C,CAAoD,GAAhG,CACD,C,2CAEU,CACT,KAAKf,YAAL,CAAkBiB,OAAlB,CAA0BC,KAA1B,CAAgCE,OAAhC,CAA0C,GAA1C,CACA,KAAKjB,KAAL,CAAa,KAAb,CACA,KAAKG,MAAL,GACD,C,+CAEY,CACX,KAAKN,YAAL,CAAkBiB,OAAlB,CAA0BC,KAA1B,CAAgCE,OAAhC,CAA0C,GAA1C,CACA,KAAKjB,KAAL,CAAa,IAAb,CACD,C,+DAEoB,CACnB,GAAI,KAAKkB,KAAL,CAAWC,MAAf,CAAuB,CACrB,KAAKC,QAAL,GACD,CAFD,IAEO,CACL,KAAKC,UAAL,GACD,CACF,C,mEACqB,CACpB,KAAKA,UAAL,GACD,C,6DAEkB,CACjB,KAAKZ,gBAAL,CAAwBf,OAAO,CAAC4B,GAAR,GAAcC,mBAAd,CAAkC,KAAKL,KAAL,CAAWM,IAA7C,CAAxB,CACD,C,uCAEQ,CACP,MACE,4BAAK,SAAS,CAAE,KAAKN,KAAL,CAAWO,SAAX,CAAuB,iBAAvB,CAA2C,KAAKP,KAAL,CAAWM,IAAtE,EACE,2BAAK,SAAS,CAAC,UAAf,EACE,2BAAK,GAAG,CAAE,KAAK3B,YAAf,CAA6B,SAAS,CAAC,WAAvC,EADF,CADF,CADF,CAOD,C,qBAvEmBJ,KAAK,CAACiC,S,EA0E5B,cAAe/B,CAAAA,OAAf","sourcesContent":["import React from \"react\";\r\nimport Console from \"./../../../../../core/console/console\"\r\nimport \"./sync-bar.scss\";\r\n\r\nclass SyncBar extends React.Component {\r\n  constructor() {\r\n    super(...arguments);\r\n    this.thumbElement = React.createRef();\r\n\r\n    this.lastCall = false;\r\n    this.break = true;\r\n  }\r\n\r\n\r\n  update() {\r\n    if(this.break){\r\n      return;\r\n    } \r\n\r\n    setTimeout( () => requestAnimationFrame(this.update.bind(this), 50));\r\n    const now = new Date().getTime();\r\n\r\n    if (now - this.lastCall > 100) {\r\n      this.lastCall = now;\r\n      const position = this.channelInterface.getSyncBarPosition();\r\n      this.applyStyle(position);\r\n    }\r\n  }\r\n\r\n  applyStyle(position) {\r\n\r\n    let scale = 2 * position;\r\n    let translateX = -((1 - scale) / 2 * 100);\r\n\r\n    if (position < 0) {\r\n      scale *= -1;\r\n    }\r\n\r\n    this.thumbElement.current.style.transform = \"translateX(\" + translateX + \"%) scaleX(\" + scale + \")\"\r\n  }\r\n\r\n  activate() {\r\n    this.thumbElement.current.style.opacity = \"1\";\r\n    this.break = false;\r\n    this.update();\r\n  }\r\n\r\n  deActivate() {\r\n    this.thumbElement.current.style.opacity = \"0\";\r\n    this.break = true;\r\n  }\r\n\r\n  componentDidUpdate() {\r\n    if (this.props.active) {\r\n      this.activate();\r\n    } else {\r\n      this.deActivate();\r\n    }\r\n  }\r\n  componentWillUnmount(){\r\n    this.deActivate();\r\n  }\r\n\r\n  componentDidMount(){\r\n    this.channelInterface = Console.Get().getChannelInterface(this.props.name);\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className={this.props.className + \" sync-bar-deck-\" + this.props.name}>\r\n        <div className=\"bar-area\">\r\n          <div ref={this.thumbElement} className=\"bar-thumb\" />\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default SyncBar;\r\n"]},"metadata":{},"sourceType":"module"}