{"ast":null,"code":"var _jsxFileName = \"D:\\\\PROJEKTY\\\\APKI\\\\dj-truck\\\\src\\\\pages\\\\userRecord\\\\UserRecord.js\";\nimport React, { useState, useEffect } from \"react\";\nimport { reqRecOfUser } from \"./../../actions\";\nimport { connect } from \"react-redux\";\nimport { useParams, useHistory } from \"react-router-dom\";\nimport { useRecordPlayer } from \"./../common/Hooks/useRecordPlayer\";\nimport Record from \"../common/components/Record/Record\";\n\nconst UserRecord = ({\n  requestList,\n  recordList,\n  userId,\n  countAll\n}) => {\n  const [controls, player] = useRecordPlayer();\n  const {\n    title,\n    id\n  } = useParams();\n  const history = useHistory();\n  const [record, setRecord] = useState();\n  useEffect(() => {\n    console.log(title);\n    let rec = recordList === null || recordList === void 0 ? void 0 : recordList.filter(r => r.title === title);\n\n    if (rec && rec.length === 0 || !rec) {\n      requestList(userId, 100, 0, {\n        title\n      });\n      console.log(\"requested\");\n    }\n\n    if (rec && rec.length === 1) {\n      console.log(\"one result\");\n      setRecord(rec[0]);\n    } else if (rec && rec.length > 1) {\n      if (id) {\n        rec = rec.filter(r => r.id === id);\n\n        if (rec.length) {\n          setRecord(rec[0]);\n        }\n      } else {\n        history.replace('/my/records?preloaded=true');\n      }\n    }\n  }, [recordList, setRecord, title, id]);\n  useEffect(() => {\n    console.log(record);\n  }, [record]);\n  return React.createElement(\"div\", {\n    className: \"user-record\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42\n    },\n    __self: this\n  }, React.createElement(Record, {\n    record: record,\n    controls: controls,\n    player: player,\n    simpleHeader: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43\n    },\n    __self: this\n  }));\n};\n\nconst mapStateToProps = state => ({\n  recordsList: state.records.list,\n  countAll: state.records.countAll,\n  userId: state.user.dbId\n});\n\nconst mapDispatchToProps = dispatch => ({\n  requestList: (userId, pageSize, page, details) => {\n    console.log(\"before dispach\");\n    dispatch(reqRecOfUser(userId, pageSize, page, details));\n  }\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(UserRecord);","map":{"version":3,"sources":["D:/PROJEKTY/APKI/dj-truck/src/pages/userRecord/UserRecord.js"],"names":["React","useState","useEffect","reqRecOfUser","connect","useParams","useHistory","useRecordPlayer","Record","UserRecord","requestList","recordList","userId","countAll","controls","player","title","id","history","record","setRecord","console","log","rec","filter","r","length","replace","mapStateToProps","state","recordsList","records","list","user","dbId","mapDispatchToProps","dispatch","pageSize","page","details"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport {reqRecOfUser} from \"./../../actions\"\r\nimport {connect} from \"react-redux\";\r\nimport { useParams, useHistory } from \"react-router-dom\";\r\nimport {useRecordPlayer} from \"./../common/Hooks/useRecordPlayer\";\r\nimport Record from \"../common/components/Record/Record\";\r\n\r\nconst UserRecord = ({requestList, recordList, userId, countAll}) => {\r\n    const [controls, player] = useRecordPlayer();\r\n    const { title, id } = useParams();\r\n    const history = useHistory()\r\n    const [record, setRecord] = useState();\r\n\r\n    useEffect(()=>{\r\n        console.log(title)\r\n        let rec = recordList?.filter( r => r.title === title)\r\n        if(rec && rec.length === 0 || !rec){\r\n\r\n            requestList(userId, 100, 0 , {title})\r\n            console.log(\"requested\")\r\n        }\r\n        if(rec && rec.length === 1){\r\n            console.log(\"one result\")\r\n            setRecord(rec[0]);\r\n        } else if(rec && rec.length > 1){\r\n            if(id){\r\n                rec = rec.filter( r => r.id === id);\r\n                if(rec.length){\r\n                    setRecord(rec[0])\r\n                }\r\n            } else {\r\n                history.replace('/my/records?preloaded=true')\r\n            }\r\n        }\r\n    }, [recordList, setRecord, title, id])\r\n\r\n    useEffect(()=>{\r\n        console.log(record)\r\n    },[record])\r\n\r\n    return (\r\n        <div className=\"user-record\">\r\n            <Record  record={record} controls={controls} player={player} simpleHeader/>\r\n        </div>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n    recordsList: state.records.list,\r\n    countAll: state.records.countAll,\r\n    userId: state.user.dbId,\r\n})\r\n\r\nconst mapDispatchToProps = dispatch => ({\r\n    requestList: (userId, pageSize, page, details) => {\r\n        console.log(\"before dispach\")\r\n        dispatch(reqRecOfUser(userId, pageSize, page, details))\r\n    }\r\n})\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(UserRecord)\r\n\r\n\r\n"]},"metadata":{},"sourceType":"module"}