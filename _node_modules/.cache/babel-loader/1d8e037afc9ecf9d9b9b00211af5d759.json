{"ast":null,"code":"import STATUS from \"./../observer/STATUS\";\nconst recorder_api_url = process.env.REACT_APP_RECORDER_API;\nexport default class Recorder {\n  constructor(mixer) {\n    this.mixer = mixer;\n    const streamDestination = this.mixer.audioNodes.channels['main'].recorderStremDestination;\n    this.mediaRecorder = new MediaRecorder(streamDestination.stream);\n    console.log(recorder_api_url);\n  }\n\n  action(status, param) {\n    switch (status) {\n      case STATUS.RECORD_START:\n        {\n          this.startRecording(param);\n          break;\n        }\n\n      case STATUS.RECORD_END:\n        {\n          this.endRecording();\n          break;\n        }\n    }\n  }\n\n  startRecording(param) {\n    console.log(\"im start recording\", param);\n    this.ws = new WebSocket(recorder_api_url.replace('http', 'ws').replace('https', 'wss'));\n    ws.addEventListener(\"open\", () => {\n      console.log(\"we have connection\");\n\n      this.mediaRecorder.ondataavailable = e => {\n        console.log(e.data);\n      };\n    });\n    this.mediaRecorder.start(1000);\n  }\n\n  endRecording() {\n    console.log(\"im finish recoriding\");\n    this.mediaRecorder.stop();\n    this.ws.close();\n  }\n\n}","map":{"version":3,"sources":["D:/PROJEKTY/APKI/dj-truck/src/pages/console/core/console/mixer/recorder.js"],"names":["STATUS","recorder_api_url","process","env","REACT_APP_RECORDER_API","Recorder","constructor","mixer","streamDestination","audioNodes","channels","recorderStremDestination","mediaRecorder","MediaRecorder","stream","console","log","action","status","param","RECORD_START","startRecording","RECORD_END","endRecording","ws","WebSocket","replace","addEventListener","ondataavailable","e","data","start","stop","close"],"mappings":"AAAA,OAAOA,MAAP,MAAmB,sBAAnB;AACA,MAAMC,gBAAgB,GAAGC,OAAO,CAACC,GAAR,CAAYC,sBAArC;AAGA,eAAe,MAAMC,QAAN,CAAc;AACzBC,EAAAA,WAAW,CAACC,KAAD,EAAO;AACd,SAAKA,KAAL,GAAaA,KAAb;AAEA,UAAMC,iBAAiB,GAAI,KAAKD,KAAL,CAAWE,UAAX,CAAsBC,QAAtB,CAA+B,MAA/B,EAAuCC,wBAAlE;AACA,SAAKC,aAAL,GAAqB,IAAIC,aAAJ,CAAkBL,iBAAiB,CAACM,MAApC,CAArB;AAEAC,IAAAA,OAAO,CAACC,GAAR,CAAYf,gBAAZ;AACH;;AAIDgB,EAAAA,MAAM,CAACC,MAAD,EAASC,KAAT,EAAe;AACjB,YAAOD,MAAP;AACI,WAAKlB,MAAM,CAACoB,YAAZ;AAA2B;AACvB,eAAKC,cAAL,CAAoBF,KAApB;AACA;AACH;;AACD,WAAKnB,MAAM,CAACsB,UAAZ;AAAyB;AACrB,eAAKC,YAAL;AACA;AACH;AARL;AAUH;;AAEDF,EAAAA,cAAc,CAACF,KAAD,EAAO;AACjBJ,IAAAA,OAAO,CAACC,GAAR,CAAY,oBAAZ,EAAkCG,KAAlC;AAGA,SAAKK,EAAL,GAAU,IAAIC,SAAJ,CAAcxB,gBAAgB,CAACyB,OAAjB,CAAyB,MAAzB,EAAiC,IAAjC,EAAuCA,OAAvC,CAA+C,OAA/C,EAAwD,KAAxD,CAAd,CAAV;AACAF,IAAAA,EAAE,CAACG,gBAAH,CAAoB,MAApB,EAA4B,MAAI;AAC5BZ,MAAAA,OAAO,CAACC,GAAR,CAAY,oBAAZ;;AAEA,WAAKJ,aAAL,CAAmBgB,eAAnB,GAAsCC,CAAD,IAAO;AACxCd,QAAAA,OAAO,CAACC,GAAR,CAAYa,CAAC,CAACC,IAAd;AACH,OAFD;AAIH,KAPD;AAWA,SAAKlB,aAAL,CAAmBmB,KAAnB,CAAyB,IAAzB;AACH;;AAEDR,EAAAA,YAAY,GAAE;AACVR,IAAAA,OAAO,CAACC,GAAR,CAAY,sBAAZ;AACA,SAAKJ,aAAL,CAAmBoB,IAAnB;AACA,SAAKR,EAAL,CAAQS,KAAR;AAEH;;AAjDwB","sourcesContent":["import STATUS from \"./../observer/STATUS\";\r\nconst recorder_api_url = process.env.REACT_APP_RECORDER_API\r\n\r\n\r\nexport default class Recorder{\r\n    constructor(mixer){\r\n        this.mixer = mixer;\r\n\r\n        const streamDestination =  this.mixer.audioNodes.channels['main'].recorderStremDestination;\r\n        this.mediaRecorder = new MediaRecorder(streamDestination.stream);\r\n\r\n        console.log(recorder_api_url)\r\n    }\r\n\r\n\r\n\r\n    action(status, param){\r\n        switch(status){\r\n            case STATUS.RECORD_START : {\r\n                this.startRecording(param);\r\n                break;\r\n            } \r\n            case STATUS.RECORD_END : {\r\n                this.endRecording()\r\n                break;\r\n            }\r\n        }\r\n    }\r\n\r\n    startRecording(param){\r\n        console.log(\"im start recording\", param);\r\n        \r\n\r\n        this.ws = new WebSocket(recorder_api_url.replace('http', 'ws').replace('https', 'wss'));\r\n        ws.addEventListener(\"open\", ()=>{\r\n            console.log(\"we have connection\")\r\n\r\n            this.mediaRecorder.ondataavailable = (e) => {\r\n                console.log(e.data);\r\n            }\r\n\r\n        })\r\n\r\n\r\n\r\n        this.mediaRecorder.start(1000);\r\n    }\r\n\r\n    endRecording(){\r\n        console.log(\"im finish recoriding\")\r\n        this.mediaRecorder.stop();\r\n        this.ws.close();\r\n        \r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}