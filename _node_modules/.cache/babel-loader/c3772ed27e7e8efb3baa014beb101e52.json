{"ast":null,"code":"import _regeneratorRuntime from\"D:\\\\PROJEKTY\\\\APKI\\\\dj-truck\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"D:\\\\PROJEKTY\\\\APKI\\\\dj-truck\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _objectWithoutProperties from\"D:\\\\PROJEKTY\\\\APKI\\\\dj-truck\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectWithoutProperties\";import React,{useCallback}from\"react\";import{Route}from\"react-router-dom\";import{useAuth0}from\"./../auth0/react-auth0-spa\";var PrivateRoute=function PrivateRoute(_ref){var Component=_ref.component,path=_ref.path,rest=_objectWithoutProperties(_ref,[\"component\",\"path\"]);var _useAuth=useAuth0(),loading=_useAuth.loading,isAuthenticated=_useAuth.isAuthenticated,loginWithRedirect=_useAuth.loginWithRedirect;var redirect=useCallback(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!loading){_context.next=2;break;}return _context.abrupt(\"return\");case 2:_context.next=4;return loginWithRedirect({appState:{targetUrl:window.location.pathname}});case 4:case\"end\":return _context.stop();}}},_callee);})),[loading,loginWithRedirect]);var render=function render(props){if(isAuthenticated){return React.createElement(Component,props);}else{redirect();}};return React.createElement(Route,Object.assign({path:path,render:render},rest));};export default PrivateRoute;","map":{"version":3,"sources":["D:/PROJEKTY/APKI/dj-truck/src/router/PrivateRoute.js"],"names":["React","useCallback","Route","useAuth0","PrivateRoute","Component","component","path","rest","loading","isAuthenticated","loginWithRedirect","redirect","appState","targetUrl","window","location","pathname","render","props"],"mappings":"uWAAA,MAAOA,CAAAA,KAAP,EAAgBC,WAAhB,KAAmC,OAAnC,CACA,OAASC,KAAT,KAAsB,kBAAtB,CACA,OAASC,QAAT,KAAyB,4BAAzB,CAEA,GAAMC,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,MAA6C,IAA/BC,CAAAA,SAA+B,MAA1CC,SAA0C,CAApBC,IAAoB,MAApBA,IAAoB,CAAXC,IAAW,kEACRL,QAAQ,EADA,CACxDM,OADwD,UACxDA,OADwD,CAC/CC,eAD+C,UAC/CA,eAD+C,CAC9BC,iBAD8B,UAC9BA,iBAD8B,CAIhE,GAAMC,CAAAA,QAAQ,CAAGX,WAAW,sEAAC,uIACvBQ,OADuB,uFAKrBE,CAAAA,iBAAiB,CAAC,CACtBE,QAAQ,CAAE,CAAEC,SAAS,CAAEC,MAAM,CAACC,QAAP,CAAgBC,QAA7B,CADY,CAAD,CALI,uDAAD,GAQzB,CAACR,OAAD,CAAUE,iBAAV,CARyB,CAA5B,CAUA,GAAMO,CAAAA,MAAM,CAAG,QAATA,CAAAA,MAAS,CAAAC,KAAK,CAAI,CACtB,GAAIT,eAAJ,CAAqB,CACnB,MAAO,qBAAC,SAAD,CAAeS,KAAf,CAAP,CACD,CAFD,IAEO,CACLP,QAAQ,GACT,CACF,CAND,CAQA,MAAO,qBAAC,KAAD,gBAAO,IAAI,CAAEL,IAAb,CAAmB,MAAM,CAAEW,MAA3B,EAAuCV,IAAvC,EAAP,CACD,CAvBD,CAyBA,cAAeJ,CAAAA,YAAf","sourcesContent":["import React, { useCallback } from \"react\";\r\nimport { Route } from \"react-router-dom\";\r\nimport { useAuth0 } from \"./../auth0/react-auth0-spa\";\r\n\r\nconst PrivateRoute = ({ component: Component, path, ...rest }) => {\r\n  const { loading, isAuthenticated, loginWithRedirect } = useAuth0();\r\n\r\n\r\n  const redirect = useCallback(async () => {\r\n    if (loading) {\r\n      return;\r\n    }\r\n\r\n    await loginWithRedirect({\r\n      appState: { targetUrl: window.location.pathname }\r\n    });\r\n  }, [loading, loginWithRedirect])\r\n\r\n  const render = props => {\r\n    if (isAuthenticated) {\r\n      return <Component {...props} />\r\n    } else {\r\n      redirect();\r\n    }\r\n  }\r\n\r\n  return <Route path={path} render={render} {...rest} />;\r\n};\r\n\r\nexport default PrivateRoute;"]},"metadata":{},"sourceType":"module"}