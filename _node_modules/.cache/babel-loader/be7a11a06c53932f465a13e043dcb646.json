{"ast":null,"code":"var _jsxFileName = \"D:\\\\PROJEKTY\\\\APKI\\\\dj-truck\\\\src\\\\pages\\\\common\\\\components\\\\Carousel-slider\\\\Slider.js\";\nimport React, { useCallback, useEffect, useRef, useState } from \"react\";\nimport UUID from \"uuidjs\";\nimport style from \"./slider.scss\";\n\nconst rmLast = (arr, direction) => {\n  let last = arr.length - 1;\n  let _arr = [...arr];\n\n  while (last >= 0) {\n    if (direction === \"next\" && arr[last] < 0) break;\n    if (direction === \"prev\" && arr[last] > 0) break;\n\n    _arr.pop();\n\n    last--;\n  }\n\n  return _arr;\n};\n\nconst sumLastSameDirection = arr => {\n  let _arr = [...arr];\n\n  if (arr[arr.length - 1] * arr[arr.length - 2] > 0) {\n    let last = _arr.pop();\n\n    let prev = _arr.pop();\n\n    _arr.push(last + prev);\n  }\n\n  return _arr;\n};\n\nconst Slider = ({\n  slides: initSlides,\n  next: nextHandle,\n  prev: prevHandle,\n  minSlideWidth = style.minSlideWidth,\n  onStepDragging = false\n}) => {\n  const slider = useRef();\n  const [active, setActive] = useState(false);\n  const [overLapRatio] = useState(5);\n  const [animationDuration] = useState(parseInt(style.animatioDuration) * 1000);\n  const [_containerRect, setContainerRect] = useState(null);\n  const [slideWidth, setSlideWidth] = useState(null);\n  const [visibleSlides, setVisibleSlides] = useState(null);\n  const [slides, setSlides] =\n  /* useState(initSlides);*/\n  useState([...initSlides, ...initSlides, ...initSlides]);\n  const [isTransitionRunning, setTransitionRunning] = useState(false);\n  const transitionActive = useRef(); //const [actionQueue, setActionQueue] = useState(null)\n\n  const actionQueue = useRef();\n  const shift = useRef();\n  const balancedShift = useRef();\n  const translate = useRef();\n  useEffect(() => {\n    console.log(\"is transition runing\", isTransitionRunning);\n  }, [isTransitionRunning]);\n  const containerRect = useCallback(() => {\n    if (!slider.current) return 0;\n    let rect = _containerRect;\n\n    if (!rect) {\n      rect = slider.current.parentElement.getBoundingClientRect();\n      setContainerRect(rect);\n    }\n\n    return rect;\n  }, [_containerRect, setContainerRect]);\n  const updateTransition = useCallback(value => {\n    if (!slider.current) return;\n    console.log(\"updateTransition\", value);\n\n    if (value) {\n      slider.current.classList.add('slider-transition--active');\n      transitionActive.current = true;\n    } else {\n      slider.current.classList.remove('slider-transition--active');\n      transitionActive.current = false;\n      setTransitionRunning(false);\n    }\n  }, [slider, transitionActive, setTransitionRunning]);\n  const updateTranslate = useCallback(target => {\n    if (!slider.current) return;\n    slider.current.style.transform = `translateX(${target}px)`;\n    translate.current = target;\n  }, [slider, translate]);\n  const updatePosition = useCallback(position => {\n    console.log(\"call update posiotion\", position, active);\n    if (!slider.current || isNaN(position)) return;\n    console.log(\"update position\", position);\n    updateTranslate(position * slideWidth);\n    transitionActive.current && setTransitionRunning(true);\n  }, [slider, slideWidth, setTransitionRunning, updateTranslate, transitionActive, active]);\n  useEffect(() => {\n    //    console.log(\"in visible\", visibleSlides, initSlides.length)\n    if (!visibleSlides || visibleSlides > initSlides.length) return;\n    setActive(true);\n    let slides = [].concat(Array(overLapRatio * 2 + 1).fill(1).map(() => initSlides)).flat();\n    setSlides(slides);\n  }, [visibleSlides, setActive, initSlides, setSlides, overLapRatio]);\n  useEffect(() => {\n    if (!containerRect || !minSlideWidth || !slider.current) return;\n    const containerWidth = containerRect().width;\n    const visibleSlides = ~~(containerWidth / parseInt(minSlideWidth));\n    setVisibleSlides(visibleSlides);\n  }, [containerRect, minSlideWidth, slider, setVisibleSlides]);\n  useEffect(() => {\n    if (!slides) return;\n    shift.current = -initSlides.length;\n    balancedShift.current = shift.current;\n    updatePosition(shift.current);\n  }, [slideWidth, updatePosition, shift, balancedShift, initSlides, slides]);\n  useEffect(() => {\n    const resetSize = () => setContainerRect(null);\n\n    window.addEventListener(\"resize\", resetSize);\n    return () => window.removeEventListener(\"resize\", resetSize);\n  }, [setContainerRect]);\n  useEffect(() => {\n    if (!visibleSlides || !containerRect) return;\n    const slideWidth = containerRect().width / visibleSlides;\n    setSlideWidth(slideWidth);\n    slider.current.style.width = slideWidth * slides.length + \"px\";\n  }, [containerRect, visibleSlides, slides]);\n  const appendSlides = useCallback(amount => {\n    console.log(\"append\", amount);\n    setSlides(slides => {\n      const _slides = [...slides];\n\n      for (let i = 0; i < amount; i++) {\n        const slide = _slides.shift();\n\n        _slides.push(slide);\n      }\n\n      return _slides;\n    });\n  }, [setSlides]);\n  const prependSlides = useCallback(amount => {\n    console.log(\"prepend\", amount);\n    setSlides(slides => {\n      const _slides = [...slides];\n\n      for (let i = 0; i < amount; i++) {\n        const slide = _slides.pop();\n\n        _slides.unshift(slide);\n      }\n\n      return _slides;\n    });\n  }, [setSlides]);\n  const balance = useCallback(() => {\n    const diff = balancedShift.current - shift.current;\n\n    if (!diff) {\n      return;\n    }\n\n    diff < 0 ? prependSlides(Math.abs(diff)) : appendSlides(diff);\n    updateTransition(false);\n    shift.current = balancedShift.current;\n    updatePosition(shift.current);\n  }, [shift, balancedShift, prependSlides, appendSlides, updateTransition, updatePosition]);\n  const inAction = useRef();\n  const action = useCallback(direction => {\n    console.log(\"call action\");\n\n    if (!actionQueue.current.length || inAction.current || isTransitionRunning) {\n      return;\n    }\n\n    inAction.current = true; // const queue = [...actionQueue.current];\n    // const direction = queue.shift();\n    // console.log(\"start actijon doing - \", direction);\n\n    updateTransition(false);\n    direction > 0 ? appendSlides(direction) : prependSlides(Math.abs(direction));\n    updatePosition(shift.current + direction);\n    setTimeout(() => {\n      updateTransition(true);\n      updatePosition(shift.current);\n      setTimeout(() => {\n        setTransitionRunning(false);\n        inAction.current = false;\n        console.log(\"end action\");\n        action();\n      }, animationDuration);\n    }, 0); //   setActionQueue(queue);\n    //   actionQueue.current = queue;\n  }, [updateTransition, setTransitionRunning, updatePosition, actionQueue,\n  /*setActionQueue,*/\n  animationDuration, appendSlides, prependSlides, isTransitionRunning]); // useEffect(() => {\n  //     console.log(\"call action\", isTransitionRunning)\n  //     if (!isTransitionRunning && !inAction.current) {\n  //         action();\n  //     }\n  // }, [isTransitionRunning, action, inAction])\n  // useEffect(()=>{\n  //     console.log(actionQueue)\n  //     action();\n  // }, [actionQueue, action])\n  // const next = useCallback(() => {\n  //     setActionQueue(queue => {\n  //         const _queue = rmLast(queue, \"prev\");\n  //         return sumLastSameDirection([..._queue, 1])\n  //     })\n  // }, [setActionQueue])\n\n  const next = useCallback(() => {\n    let _queue = rmLast(actionQueue.current || [], \"prev\");\n\n    _queue = sumLastSameDirection([..._queue, 1]);\n    actionQueue.current = _queue;\n    action();\n  }, [actionQueue]);\n  useEffect(() => nextHandle && nextHandle(next), [next, nextHandle]); // const prev = useCallback(() => {\n  //     setActionQueue(queue => {\n  //         const _queue = rmLast(queue, \"next\");\n  //         return sumLastSameDirection([..._queue, -1])\n  //     })\n  // }, [setActionQueue])\n\n  const prev = useCallback(() => {\n    // let _queue = rmLast(actionQueue.current || [], \"next\");\n    // _queue = sumLastSameDirection([..._queue, -1])\n    // actionQueue.current =\n    action(-1);\n  }, [actionQueue]);\n  useEffect(() => prevHandle && prevHandle(prev), [prev, prevHandle]);\n  const endDraging = useCallback(() => {\n    let next = Math.round(translate.current / slideWidth);\n\n    if (onStepDragging) {\n      next = next > shift.current ? shift.current + 1 : shift.current - 1;\n    }\n\n    shift.current = next;\n    updatePosition(shift.current);\n    setTimeout(() => {\n      setTransitionRunning(false);\n      balance();\n    }, animationDuration);\n  }, [translate, shift, slideWidth, balance, setTransitionRunning, animationDuration, onStepDragging, updatePosition]);\n  const mouseMove = useCallback((shiftX, event) => {\n    const clientX = event.type === \"touchmove\" ? event.touches[0].clientX : event.clientX;\n    updateTranslate(clientX - shiftX);\n  }, [updateTranslate]);\n  const mouseDown = useCallback(event => {\n    const sliderContainer = event.target.closest(\".carousel-slider-container\");\n    if (!sliderContainer) return;\n    const rect = sliderContainer.getBoundingClientRect();\n    const clientX = event.type === \"touchstart\" ? event.touches[0].clientX : event.clientX;\n    const shiftX = clientX - rect.left - shift.current * slideWidth;\n    const mouseMoveWithArgs = mouseMove.bind(null, shiftX);\n\n    const mouseUp = () => {\n      window.removeEventListener(\"mousemove\", mouseMoveWithArgs);\n      window.removeEventListener(\"mouseup\", mouseUp);\n      window.removeEventListener(\"touchmove\", mouseMoveWithArgs);\n      window.removeEventListener(\"touchend\", mouseUp);\n      updateTransition(true);\n      endDraging();\n    };\n\n    window.addEventListener(\"mousemove\", mouseMoveWithArgs);\n    window.addEventListener(\"touchmove\", mouseMoveWithArgs);\n    window.addEventListener(\"mouseup\", mouseUp);\n    window.addEventListener(\"touchend\", mouseUp);\n    updateTransition(false);\n  }, [updateTransition, shift, slideWidth, endDraging, mouseMove]);\n  console.log(\"render\");\n  return React.createElement(\"div\", {\n    className: \"carousel-slider-container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 276\n    },\n    __self: this\n  }, React.createElement(\"ul\", {\n    className: \"carousel-slider\",\n    ref: slider,\n    onMouseDown: mouseDown,\n    onTouchStart: mouseDown,\n    onDrag: e => e.preventDefault(),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 277\n    },\n    __self: this\n  }, slides && slides instanceof Array && slides.map(slide => React.createElement(\"li\", {\n    key: UUID.genV1(),\n    className: \"slide\",\n    style: {\n      width: minSlideWidth || \"initial\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 279\n    },\n    __self: this\n  }, slide))));\n};\n\nexport default Slider;","map":{"version":3,"sources":["D:/PROJEKTY/APKI/dj-truck/src/pages/common/components/Carousel-slider/Slider.js"],"names":["React","useCallback","useEffect","useRef","useState","UUID","style","rmLast","arr","direction","last","length","_arr","pop","sumLastSameDirection","prev","push","Slider","slides","initSlides","next","nextHandle","prevHandle","minSlideWidth","onStepDragging","slider","active","setActive","overLapRatio","animationDuration","parseInt","animatioDuration","_containerRect","setContainerRect","slideWidth","setSlideWidth","visibleSlides","setVisibleSlides","setSlides","isTransitionRunning","setTransitionRunning","transitionActive","actionQueue","shift","balancedShift","translate","console","log","containerRect","current","rect","parentElement","getBoundingClientRect","updateTransition","value","classList","add","remove","updateTranslate","target","transform","updatePosition","position","isNaN","concat","Array","fill","map","flat","containerWidth","width","resetSize","window","addEventListener","removeEventListener","appendSlides","amount","_slides","i","slide","prependSlides","unshift","balance","diff","Math","abs","inAction","action","setTimeout","_queue","endDraging","round","mouseMove","shiftX","event","clientX","type","touches","mouseDown","sliderContainer","closest","left","mouseMoveWithArgs","bind","mouseUp","e","preventDefault","genV1"],"mappings":"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","sourcesContent":["import React, {useCallback, useEffect, useRef, useState} from \"react\";\r\nimport UUID from \"uuidjs\";\r\nimport style from \"./slider.scss\"\r\n\r\nconst rmLast = (arr, direction) => {\r\n    let last = arr.length - 1;\r\n    let _arr = [...arr];\r\n    while (last >= 0) {\r\n        if (direction === \"next\" && arr[last] < 0) break;\r\n        if (direction === \"prev\" && arr[last] > 0) break;\r\n        _arr.pop();\r\n        last--;\r\n    }\r\n    return _arr;\r\n}\r\n\r\nconst sumLastSameDirection = arr => {\r\n    let _arr = [...arr];\r\n    if (arr[arr.length - 1] * arr[arr.length - 2] > 0) {\r\n        let last = _arr.pop();\r\n        let prev = _arr.pop();\r\n        _arr.push(last + prev);\r\n    }\r\n    return _arr;\r\n}\r\n\r\nconst Slider = ({\r\n    slides: initSlides,\r\n    next: nextHandle,\r\n    prev: prevHandle,\r\n    minSlideWidth = style.minSlideWidth,\r\n    onStepDragging = false\r\n}) => {\r\n    const slider = useRef();\r\n    const [active, setActive] = useState(false);\r\n    const [overLapRatio] = useState(5);\r\n    const [animationDuration] = useState(parseInt(style.animatioDuration) * 1000);\r\n    const [_containerRect, setContainerRect] = useState(null);\r\n    const [slideWidth, setSlideWidth] = useState(null);\r\n    const [visibleSlides, setVisibleSlides] = useState(null);\r\n    const [slides, setSlides] = /* useState(initSlides);*/ useState([...initSlides, ...initSlides, ...initSlides]);\r\n    const [isTransitionRunning, setTransitionRunning] = useState(false);\r\n    const transitionActive = useRef();\r\n    //const [actionQueue, setActionQueue] = useState(null)\r\n    const actionQueue = useRef();\r\n    const shift = useRef();\r\n    const balancedShift = useRef();\r\n    const translate = useRef();\r\n\r\n    useEffect(()=>{\r\n       console.log(\"is transition runing\", isTransitionRunning);\r\n    }, [isTransitionRunning])\r\n\r\n    const containerRect = useCallback(() => {\r\n        if (!slider.current) return 0;\r\n        let rect = _containerRect\r\n        if (!rect) {\r\n            rect = slider.current.parentElement.getBoundingClientRect()\r\n            setContainerRect(rect);\r\n        }\r\n        return rect;\r\n    }, [_containerRect, setContainerRect])\r\n\r\n    const updateTransition = useCallback(value => {\r\n        if (!slider.current) return;\r\n        console.log(\"updateTransition\", value);\r\n        if(value){\r\n            slider.current.classList.add('slider-transition--active')\r\n            transitionActive.current = true;\r\n        } else {\r\n            slider.current.classList.remove('slider-transition--active')\r\n            transitionActive.current = false;\r\n            setTransitionRunning(false);\r\n        }\r\n    }, [slider, transitionActive, setTransitionRunning])\r\n\r\n    const updateTranslate = useCallback(target => {\r\n        if (!slider.current) return;\r\n        slider.current.style.transform = `translateX(${target}px)`\r\n        translate.current = target;\r\n    }, [slider, translate])\r\n\r\n    const updatePosition = useCallback(position => {\r\n        console.log(\"call update posiotion\", position, active)\r\n        if (!slider.current || isNaN(position) ) return;\r\n        console.log(\"update position\", position);\r\n        updateTranslate(position * slideWidth);\r\n        transitionActive.current && setTransitionRunning(true);\r\n    }, [slider, slideWidth, setTransitionRunning, updateTranslate, transitionActive, active])\r\n\r\n    useEffect(()=>{\r\n    //    console.log(\"in visible\", visibleSlides, initSlides.length)\r\n        if(!visibleSlides || visibleSlides > initSlides.length) return;\r\n        setActive(true);\r\n        let slides = [].concat(Array(overLapRatio *  2 + 1).fill(1).map( () => initSlides)).flat();\r\n        setSlides(slides);\r\n    }, [visibleSlides, setActive, initSlides, setSlides, overLapRatio])\r\n\r\n\r\n    useEffect(()=>{\r\n        if (!containerRect || !minSlideWidth || !slider.current) return;\r\n        const containerWidth = containerRect().width;\r\n        const visibleSlides = ~~(containerWidth / parseInt(minSlideWidth));\r\n        setVisibleSlides(visibleSlides);\r\n    }, [containerRect, minSlideWidth, slider, setVisibleSlides])\r\n\r\n    useEffect(() => {\r\n        if(!slides) return;\r\n        shift.current = -initSlides.length;\r\n        balancedShift.current = shift.current;\r\n        updatePosition(shift.current);\r\n    }, [slideWidth, updatePosition, shift, balancedShift, initSlides, slides])\r\n\r\n    useEffect(() => {\r\n        const resetSize = () => setContainerRect(null);\r\n        window.addEventListener(\"resize\", resetSize);\r\n        return () => window.removeEventListener(\"resize\", resetSize);\r\n    }, [setContainerRect])\r\n\r\n    useEffect(() => {\r\n        if(!visibleSlides || !containerRect) return;\r\n        const slideWidth = containerRect().width / visibleSlides\r\n        setSlideWidth(slideWidth);\r\n        slider.current.style.width = slideWidth * slides.length + \"px\";\r\n    }, [containerRect,  visibleSlides, slides]);\r\n\r\n    const appendSlides = useCallback(amount => {\r\n        console.log(\"append\",amount)\r\n        setSlides(slides => {\r\n            const _slides = [...slides];\r\n            for (let i = 0; i < amount; i++) {\r\n                const slide = _slides.shift();\r\n                _slides.push(slide)\r\n            }\r\n            return _slides;\r\n        })\r\n    }, [setSlides])\r\n\r\n    const prependSlides = useCallback(amount => {\r\n        console.log(\"prepend\",amount)\r\n        setSlides(slides => {\r\n            const _slides = [...slides];\r\n            for (let i = 0; i < amount; i++) {\r\n                const slide = _slides.pop();\r\n                _slides.unshift(slide)\r\n            }\r\n            return _slides;\r\n        })\r\n    }, [setSlides])\r\n\r\n    const balance = useCallback(() => {\r\n        const diff = balancedShift.current - shift.current;\r\n        if(!diff) {\r\n            return;\r\n        }\r\n        (diff < 0) ? prependSlides(Math.abs(diff)) : appendSlides(diff);\r\n        updateTransition(false);\r\n        shift.current = balancedShift.current;\r\n        updatePosition(shift.current);\r\n    }, [shift, balancedShift, prependSlides, appendSlides, updateTransition, updatePosition])\r\n\r\n    const inAction = useRef();\r\n    const action = useCallback((direction) => {\r\n        console.log(\"call action\")\r\n        if (!actionQueue.current.length || inAction.current|| isTransitionRunning) {return;}\r\n        inAction.current = true;\r\n        // const queue = [...actionQueue.current];\r\n        // const direction = queue.shift();\r\n        // console.log(\"start actijon doing - \", direction);\r\n        updateTransition(false);\r\n        (direction > 0) ? appendSlides(direction) : prependSlides(Math.abs(direction));\r\n        updatePosition(shift.current + direction);\r\n        setTimeout(() => {\r\n            updateTransition(true);\r\n            updatePosition(shift.current);\r\n            setTimeout(()=> {\r\n                setTransitionRunning(false);\r\n                inAction.current = false;\r\n                console.log(\"end action\");\r\n                action();\r\n            }, animationDuration);\r\n        }, 0);\r\n\r\n     //   setActionQueue(queue);\r\n     //   actionQueue.current = queue;\r\n    }, [updateTransition, setTransitionRunning, updatePosition, actionQueue, /*setActionQueue,*/ animationDuration, appendSlides, prependSlides, isTransitionRunning])\r\n\r\n    // useEffect(() => {\r\n    //     console.log(\"call action\", isTransitionRunning)\r\n    //     if (!isTransitionRunning && !inAction.current) {\r\n    //         action();\r\n    //     }\r\n    // }, [isTransitionRunning, action, inAction])\r\n\r\n    // useEffect(()=>{\r\n    //     console.log(actionQueue)\r\n    //     action();\r\n    // }, [actionQueue, action])\r\n\r\n    // const next = useCallback(() => {\r\n    //     setActionQueue(queue => {\r\n    //         const _queue = rmLast(queue, \"prev\");\r\n    //         return sumLastSameDirection([..._queue, 1])\r\n    //     })\r\n    // }, [setActionQueue])\r\n\r\n    const next = useCallback(() => {\r\n        let _queue = rmLast(actionQueue.current || [], \"prev\");\r\n        _queue = sumLastSameDirection([..._queue, 1])\r\n        actionQueue.current = _queue;\r\n        action();\r\n    }, [actionQueue])\r\n\r\n    useEffect(() => nextHandle && nextHandle(next), [next, nextHandle])\r\n\r\n    // const prev = useCallback(() => {\r\n    //     setActionQueue(queue => {\r\n    //         const _queue = rmLast(queue, \"next\");\r\n    //         return sumLastSameDirection([..._queue, -1])\r\n    //     })\r\n    // }, [setActionQueue])\r\n    const prev = useCallback(() => {\r\n        // let _queue = rmLast(actionQueue.current || [], \"next\");\r\n        // _queue = sumLastSameDirection([..._queue, -1])\r\n        // actionQueue.current =\r\n        action(-1);\r\n    }, [actionQueue])\r\n\r\n    useEffect(() => prevHandle && prevHandle(prev), [prev, prevHandle])\r\n\r\n    const endDraging = useCallback(() => {\r\n        let next = Math.round(translate.current / slideWidth);\r\n        if(onStepDragging){\r\n            next = next >  shift.current  ? shift.current + 1 : shift.current - 1;\r\n        }\r\n        shift.current = next;\r\n        updatePosition(shift.current);\r\n        setTimeout(()=> {\r\n            setTransitionRunning(false);\r\n            balance();\r\n        }, animationDuration);\r\n    }, [translate, shift, slideWidth, balance, setTransitionRunning, animationDuration,  onStepDragging, updatePosition])\r\n\r\n    const mouseMove = useCallback((shiftX, event) => {\r\n        const clientX = (event.type === \"touchmove\") ? event.touches[0].clientX : event.clientX;\r\n        updateTranslate(clientX - shiftX);\r\n    }, [updateTranslate])\r\n\r\n\r\n    const mouseDown = useCallback(event => {\r\n        const sliderContainer = event.target.closest(\".carousel-slider-container\");\r\n        if(!sliderContainer) return;\r\n        const rect = sliderContainer.getBoundingClientRect();\r\n        const clientX = (event.type === \"touchstart\") ? event.touches[0].clientX : event.clientX;\r\n        const shiftX = clientX - rect.left - shift.current * slideWidth;\r\n        const mouseMoveWithArgs = mouseMove.bind(null, shiftX);\r\n\r\n        const mouseUp = () => {\r\n            window.removeEventListener(\"mousemove\", mouseMoveWithArgs);\r\n            window.removeEventListener(\"mouseup\", mouseUp);\r\n            window.removeEventListener(\"touchmove\", mouseMoveWithArgs);\r\n            window.removeEventListener(\"touchend\", mouseUp)\r\n            updateTransition(true);\r\n            endDraging();\r\n        }\r\n\r\n        window.addEventListener(\"mousemove\", mouseMoveWithArgs);\r\n        window.addEventListener(\"touchmove\", mouseMoveWithArgs);\r\n        window.addEventListener(\"mouseup\", mouseUp);\r\n        window.addEventListener(\"touchend\", mouseUp);\r\n        updateTransition(false);\r\n    }, [updateTransition, shift, slideWidth, endDraging, mouseMove])\r\n\r\n    console.log(\"render\")\r\n    return (\r\n        <div className=\"carousel-slider-container\">\r\n           <ul className=\"carousel-slider\" ref={slider} onMouseDown={mouseDown} onTouchStart={mouseDown} onDrag={ e => e.preventDefault()}>\r\n                {slides && slides instanceof Array && slides.map(slide => (\r\n                    <li key={UUID.genV1()} className={\"slide\"} style={{width: minSlideWidth || \"initial\"}}>{slide}</li>\r\n                ))}\r\n            </ul>\r\n        </div>\r\n    )\r\n}\r\nexport default Slider;"]},"metadata":{},"sourceType":"module"}