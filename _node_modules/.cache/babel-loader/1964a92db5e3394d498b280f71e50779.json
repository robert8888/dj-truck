{"ast":null,"code":"import { ACTIONS } from \"./../actions/actions.js\";\nimport { produce } from \"imer\";\nconst deck = {\n  track: {\n    title: \"\",\n    bmp: 0,\n    quality: \"\",\n    duration: \"\",\n    source: \"\",\n    id: \"\",\n    thumbnail: {}\n  },\n  // \n  playBackState: {\n    ready: false,\n    paused: true,\n    cuePoint: 0,\n    cueActive: false,\n    pitch: 0,\n    timeLeft: null\n  }\n};\nconst chanel = {\n  volume: 100,\n  low: 100,\n  mid: 100,\n  high: 100,\n  gain: 100\n};\nconst initState = {\n  chanel: {\n    A: { ...deck\n    },\n    B: { ...deck\n    }\n  },\n  mikser: {\n    chanelA: { ...chanel\n    },\n    chanelB: { ...chanel\n    },\n    fader: {\n      position: 50 //A: 0 <-> B:100\n\n    }\n  }\n};\n\nfunction consoleReducer(state = initState, action) {\n  switch (action.type) {\n    case ACTIONS.LOAD_TRACK:\n      {\n        let destination = action.destination;\n        let track = action.track;\n        let newState = { ...state\n        };\n\n        if (newState.chanel[destination]) {\n          newState.chanel[destination].track = {\n            title: track.title,\n            bmp: track.bpm || 0,\n            quality: track.quality,\n            duration: track.duration,\n            source: track.source,\n            id: track.id,\n            thumbnail: track.thumbnail\n          };\n        }\n\n        return newState;\n      }\n\n    case ACTIONS.SET_READY:\n      {\n        if (!state.chanel[action.destination]) return state;\n        const nextState = produce(state, draftState => {\n          draftState.chanel[action.destination].playBackState.ready = action.value;\n        });\n        return nextState;\n      }\n\n    case ACTIONS.SET_PITCH:\n      {\n        if (!state.chanel[action.destination]) return state;\n        const nextState = produce(state, draftState => {\n          draftState.chanel[action.destination].playBackState.pitch = action.pitch;\n        });\n        return nextState;\n      }\n\n    case ACTIONS.TOGGLE_PLAY:\n      {\n        if (!state.chanel[action.destination]) return state;\n        if (!state.chanel[action.destination].playBackState.ready) return state;\n        const prevPause = state.chanel[action.destination].playBackState.paused;\n        const nextState = produce(state, draftState => {\n          draftState.chanel[action.destination].playBackState.paused = !prevPause;\n        });\n        return nextState;\n      }\n\n    case ACTIONS.TOGGLE_CUE:\n      {\n        if (!state.chanel[action.destination]) return state;\n        if (!state.chanel[action.destination].playBackState.ready) return state;\n        const prevCue = state.chanel[action.destination].playBackState.cueActive;\n        const nextState = produce(state, draftState => {\n          draftState.chanel[action.destination].playBackState.cueActive = !prevCue;\n        });\n        return nextState;\n      }\n\n    default:\n      return state;\n  }\n}\n\nexport default consoleReducer;","map":{"version":3,"sources":["D:/PROJEKTY/APKI/DjTruck/djtruck/src/reducers/consoleReducer.js"],"names":["ACTIONS","produce","deck","track","title","bmp","quality","duration","source","id","thumbnail","playBackState","ready","paused","cuePoint","cueActive","pitch","timeLeft","chanel","volume","low","mid","high","gain","initState","A","B","mikser","chanelA","chanelB","fader","position","consoleReducer","state","action","type","LOAD_TRACK","destination","newState","bpm","SET_READY","nextState","draftState","value","SET_PITCH","TOGGLE_PLAY","prevPause","TOGGLE_CUE","prevCue"],"mappings":"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","sourcesContent":["import {  ACTIONS } from \"./../actions/actions.js\";\r\nimport { produce } from \"imer\";\r\n\r\nconst deck = {\r\n    track : {\r\n        title : \"\",\r\n        bmp : 0,\r\n        quality : \"\",\r\n        duration : \"\",\r\n        source : \"\",\r\n        id: \"\",\r\n        thumbnail : {}\r\n    }, // \r\n    playBackState : {\r\n        ready: false,\r\n        paused: true,\r\n        cuePoint: 0,\r\n        cueActive: false,\r\n        pitch: 0,\r\n        timeLeft : null\r\n    }\r\n}\r\n\r\nconst chanel = {\r\n    volume: 100,\r\n    low: 100,\r\n    mid : 100,\r\n    high : 100,\r\n    gain: 100\r\n}\r\n\r\nconst initState = {\r\n    chanel: {\r\n        A:{\r\n            ...deck\r\n        },\r\n        B:{\r\n            ...deck\r\n        }\r\n    },\r\n   \r\n    mikser : {\r\n        chanelA : {\r\n            ...chanel,\r\n        },\r\n        chanelB : {\r\n            ...chanel,\r\n        },\r\n        fader : {\r\n            position : 50 //A: 0 <-> B:100\r\n        }\r\n    }\r\n}\r\n\r\nfunction consoleReducer(state = initState, action){\r\n    switch(action.type){\r\n        case ACTIONS.LOAD_TRACK : {\r\n            let destination = action.destination;\r\n            let track = action.track;\r\n            let newState = {...state};\r\n            if(newState.chanel[destination]){\r\n                newState.chanel[destination].track = {\r\n                    title : track.title,\r\n                    bmp : track.bpm || 0,\r\n                    quality : track.quality,\r\n                    duration : track.duration,\r\n                    source : track.source,\r\n                    id : track.id,\r\n                    thumbnail : track.thumbnail,\r\n                }\r\n            }\r\n            return newState;\r\n        }\r\n\r\n        case ACTIONS.SET_READY : {\r\n            if(!state.chanel[action.destination]) return state;\r\n            const nextState = produce(state, (draftState) => {\r\n                draftState.chanel[action.destination].playBackState.ready = action.value;\r\n            })\r\n            return nextState;\r\n        }\r\n\r\n        case ACTIONS.SET_PITCH : {\r\n            if(!state.chanel[action.destination]) return state;\r\n\r\n            const nextState = produce(state, (draftState) => {\r\n                draftState.chanel[action.destination].playBackState.pitch = action.pitch;\r\n            })\r\n            return nextState;\r\n\r\n        }\r\n\r\n        case ACTIONS.TOGGLE_PLAY : {\r\n            if(!state.chanel[action.destination]) return state;\r\n            if(!state.chanel[action.destination].playBackState.ready) return state;\r\n\r\n            const prevPause = state.chanel[action.destination].playBackState.paused;\r\n\r\n            const nextState = produce(state, (draftState) => {\r\n                draftState.chanel[action.destination].playBackState.paused = !prevPause;\r\n            })\r\n            return nextState;\r\n\r\n        }\r\n\r\n        case ACTIONS.TOGGLE_CUE : {\r\n            if(!state.chanel[action.destination]) return state;\r\n            if(!state.chanel[action.destination].playBackState.ready) return state;\r\n\r\n            const prevCue = state.chanel[action.destination].playBackState.cueActive;\r\n\r\n            const nextState = produce(state, (draftState) => {\r\n                draftState.chanel[action.destination].playBackState.cueActive = !prevCue;\r\n            })\r\n            return nextState;\r\n        }\r\n\r\n        default : return state;\r\n    }\r\n}\r\n\r\nexport default consoleReducer;"]},"metadata":{},"sourceType":"module"}