{"ast":null,"code":"import _slicedToArray from\"D:\\\\PROJEKTY\\\\APKI\\\\dj-truck\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState,useCallback,useEffect}from\"react\";import{connect}from\"react-redux\";import{createRecordinRequest,endRecording as _endRecording}from\"./../../../../../../actions\";import RecordButton from\"./../componets/RecordButton/RecordButton\";import RecordNameInput from\"./../componets/RecordNameInput/RecordNameInput\";import RecordTime from\"../componets/RecordTime/RecordTime\";import RECORDER_STATE from\"./../../../../../../reducers/console/recorder/stateDef\";import\"./recorder.scss\";var Recorder=function Recorder(_ref){var recordingState=_ref.recordingState,startRecording=_ref.startRecording,endRecording=_ref.endRecording,userLogged=_ref.userLogged,recName=_ref.recName;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),buttonDisabled=_useState2[0],setButtonDisabled=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),inputDisabled=_useState4[0],setInputDisabled=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),timeRuning=_useState6[0],setTimeRuning=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),prepering=_useState8[0],setPrepering=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),_recName=_useState10[0],setRecName=_useState10[1];var _useState11=useState(null),_useState12=_slicedToArray(_useState11,2),clearTime=_useState12[0],setClearTimeHandler=_useState12[1];useEffect(function(){setRecName(recName);},[recName,setRecName]);useEffect(function(){setInputDisabled(!userLogged);setButtonDisabled(!userLogged);},[userLogged,setButtonDisabled,setInputDisabled]);var assignClearHandler=useCallback(function(handler){setClearTimeHandler(function(){return handler;});},[setClearTimeHandler]);var recordStateChange=useCallback(function(state){if(state){startRecording(_recName);setPrepering(true);}else{endRecording();clearTime();}setInputDisabled(state);},[setInputDisabled,startRecording,endRecording,_recName,clearTime]);//time runing after state change in respone to server\nuseEffect(function(){switch(recordingState){case RECORDER_STATE.INIT:{setPrepering(true);break;}case RECORDER_STATE.FAIL:{setPrepering(false);break;}case RECORDER_STATE.RECORDING:{setPrepering(false);setTimeRuning(true);break;}case RECORDER_STATE.IDLE:{setPrepering(false);setTimeRuning(false);break;}default:return;}},[recordingState,setTimeRuning,setPrepering]);return React.createElement(\"div\",{className:\"recorder\"},React.createElement(\"div\",{className:\"label\"},\"REC\"),React.createElement(RecordButton,{onChange:recordStateChange,disabled:buttonDisabled}),React.createElement(RecordNameInput,{disabled:inputDisabled,value:_recName,onChange:function onChange(str){return setRecName(str);}}),React.createElement(RecordTime,{prepering:prepering,runing:timeRuning,clearHandler:assignClearHandler}));};var mapStateToProps=function mapStateToProps(state){return{recordingState:state.recorder.recordingState,recName:state.recorder.recName,userLogged:state.user.logged};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return{startRecording:function startRecording(recName){return dispatch(createRecordinRequest(recName));},endRecording:function endRecording(){return dispatch(_endRecording());}};};export default connect(mapStateToProps,mapDispatchToProps)(Recorder);","map":{"version":3,"sources":["D:/PROJEKTY/APKI/dj-truck/src/pages/console/components/Console/Mixer/Recorder/Recorder.js"],"names":["React","useState","useCallback","useEffect","connect","createRecordinRequest","endRecording","RecordButton","RecordNameInput","RecordTime","RECORDER_STATE","Recorder","recordingState","startRecording","userLogged","recName","buttonDisabled","setButtonDisabled","inputDisabled","setInputDisabled","timeRuning","setTimeRuning","prepering","setPrepering","_recName","setRecName","clearTime","setClearTimeHandler","assignClearHandler","handler","recordStateChange","state","INIT","FAIL","RECORDING","IDLE","str","mapStateToProps","recorder","user","logged","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React, { useState,  useCallback, useEffect } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { createRecordinRequest , endRecording } from \"./../../../../../../actions\";\r\nimport RecordButton from \"./../componets/RecordButton/RecordButton\";\r\nimport RecordNameInput from \"./../componets/RecordNameInput/RecordNameInput\";\r\nimport RecordTime from \"../componets/RecordTime/RecordTime\";\r\nimport RECORDER_STATE from \"./../../../../../../reducers/console/recorder/stateDef\";\r\nimport \"./recorder.scss\";\r\n\r\n\r\nconst Recorder = ({ recordingState, startRecording, endRecording , userLogged, recName }) =>{\r\n    const [buttonDisabled, setButtonDisabled] = useState(false);\r\n    const [inputDisabled, setInputDisabled] = useState(false);\r\n    const [timeRuning, setTimeRuning] = useState(false)\r\n    const [prepering, setPrepering] = useState(false)\r\n    const [_recName , setRecName] = useState(\"\");\r\n\r\n    const [clearTime , setClearTimeHandler] = useState(null);\r\n\r\n    useEffect(()=>{\r\n        setRecName(recName);\r\n    },[recName, setRecName])\r\n\r\n    useEffect(()=>{\r\n        setInputDisabled(!userLogged);\r\n        setButtonDisabled(!userLogged);\r\n    }, [userLogged, setButtonDisabled, setInputDisabled])\r\n\r\n    const assignClearHandler = useCallback( handler => {\r\n        setClearTimeHandler(() => handler)\r\n    }, [setClearTimeHandler])\r\n\r\n\r\n    const recordStateChange = useCallback((state)=>{\r\n        if(state){\r\n            startRecording(_recName);\r\n            setPrepering(true)\r\n        } else {\r\n            endRecording();\r\n            clearTime();\r\n        }\r\n        setInputDisabled(state);\r\n    }, [setInputDisabled, \r\n        startRecording, \r\n        endRecording, \r\n        _recName, \r\n        clearTime])\r\n\r\n    //time runing after state change in respone to server\r\n    useEffect(()=>{\r\n        switch(recordingState){\r\n            case RECORDER_STATE.INIT:{\r\n                setPrepering(true);\r\n                break;\r\n            }\r\n            case RECORDER_STATE.FAIL:{\r\n                setPrepering(false);\r\n                break;\r\n            }\r\n            case RECORDER_STATE.RECORDING : {\r\n                setPrepering(false);\r\n                setTimeRuning(true);\r\n                break;\r\n            }\r\n            case RECORDER_STATE.IDLE : {\r\n                setPrepering(false);\r\n                setTimeRuning(false);\r\n                break;\r\n            }\r\n            default : return;\r\n        }\r\n    }, [recordingState, setTimeRuning, setPrepering])\r\n\r\n\r\n    return (\r\n        <div className=\"recorder\">\r\n            <div className=\"label\">REC</div>\r\n            <RecordButton \r\n                onChange={recordStateChange}\r\n                disabled={buttonDisabled} />\r\n            <RecordNameInput \r\n                disabled={inputDisabled}\r\n                value= { _recName }\r\n                onChange={str => setRecName(str)}/>\r\n            <RecordTime \r\n                prepering={prepering}\r\n                runing={timeRuning} \r\n                clearHandler={ assignClearHandler }/>\r\n        </div>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n    recordingState : state.recorder.recordingState,\r\n    recName : state.recorder.recName,\r\n    userLogged : state.user.logged,\r\n})\r\n\r\nconst mapDispatchToProps = dispatch => ({\r\n    startRecording : recName => dispatch(createRecordinRequest(recName)),\r\n    endRecording : () => dispatch(endRecording())\r\n})\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Recorder);"]},"metadata":{},"sourceType":"module"}