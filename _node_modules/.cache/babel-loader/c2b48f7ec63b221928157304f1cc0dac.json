{"ast":null,"code":"import _slicedToArray from\"D:\\\\PROJEKTY\\\\APKI\\\\dj-truck\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import _classCallCheck from\"D:\\\\PROJEKTY\\\\APKI\\\\dj-truck\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"D:\\\\PROJEKTY\\\\APKI\\\\dj-truck\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"D:\\\\PROJEKTY\\\\APKI\\\\dj-truck\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"D:\\\\PROJEKTY\\\\APKI\\\\dj-truck\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";import _inherits from\"D:\\\\PROJEKTY\\\\APKI\\\\dj-truck\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import React from\"react\";import{produce}from\"imer\";var withRefSize=function withRefSize(WrappedComponent){var _temp;return _temp=/*#__PURE__*/function(_React$Component){_inherits(_temp,_React$Component);function _temp(){var _getPrototypeOf2;var _this;_classCallCheck(this,_temp);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(_temp)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.importRef=function(name,ref){_this.references[name]=ref;};_this.state={size:{}};_this.references={};return _this;}_createClass(_temp,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;var updateSize=function updateSize(){var size={};for(var _i=0,_Object$entries=Object.entries(_this2.references);_i<_Object$entries.length;_i++){var _Object$entries$_i=_slicedToArray(_Object$entries[_i],2),name=_Object$entries$_i[0],element=_Object$entries$_i[1];var _element$getBoundingC=element.getBoundingClientRect(),width=_element$getBoundingC.width,height=_element$getBoundingC.height;size[name]={width:width,height:height};}_this2.setState(produce(_this2.state,function(draft){return draft.size=size;}));};if(window.requestIdleCallback){window.requestIdleCallback(updateSize);}else{updateSize();}}},{key:\"render\",value:function render(){return React.createElement(WrappedComponent,Object.assign({},this.props,{size:this.state.size,exportRef:this.importRef}));}}]);return _temp;}(React.Component),_temp;};export default withRefSize;","map":{"version":3,"sources":["D:/PROJEKTY/APKI/dj-truck/src/pages/common/components/HOC/withRefSize.js"],"names":["React","produce","withRefSize","WrappedComponent","args","importRef","name","ref","references","state","size","updateSize","Object","entries","element","getBoundingClientRect","width","height","setState","draft","window","requestIdleCallback","props","Component"],"mappings":"0rBAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,OAAT,KAAwB,MAAxB,CAGA,GAAMC,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,CAACC,gBAAD,CAAsB,WAEtC,uFAEI,gBAAoB,0FAALC,IAAK,0CAALA,IAAK,wBAChB,0HAASA,IAAT,IADgB,MA4BpBC,SA5BoB,CA4BR,SAAEC,IAAF,CAAQC,GAAR,CAAgB,CACxB,MAAKC,UAAL,CAAgBF,IAAhB,EAAwBC,GAAxB,CACH,CA9BmB,CAEhB,MAAKE,KAAL,CAAW,CACPC,IAAI,CAAE,EADC,CAAX,CAGA,MAAKF,UAAL,CAAgB,EAAhB,CALgB,aAOnB,CATL,+EAWwB,iBAChB,GAAMG,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,EAAM,CACrB,GAAID,CAAAA,IAAI,CAAG,EAAX,CACA,6BAA2BE,MAAM,CAACC,OAAP,CAAe,MAAI,CAACL,UAApB,CAA3B,gCAA2D,8DAAlDF,IAAkD,uBAA5CQ,OAA4C,iDAC/BA,OAAO,CAACC,qBAAR,EAD+B,CAChDC,KADgD,uBAChDA,KADgD,CACzCC,MADyC,uBACzCA,MADyC,CAEvDP,IAAI,CAACJ,IAAD,CAAJ,CAAa,CACTU,KAAK,CAALA,KADS,CAETC,MAAM,CAANA,MAFS,CAAb,CAIH,CACD,MAAI,CAACC,QAAL,CAAcjB,OAAO,CAAC,MAAI,CAACQ,KAAN,CAAa,SAAAU,KAAK,QAAIA,CAAAA,KAAK,CAACT,IAAN,CAAaA,IAAjB,EAAlB,CAArB,EACH,CAVD,CAWA,GAAGU,MAAM,CAACC,mBAAV,CAA8B,CAC1BD,MAAM,CAACC,mBAAP,CAA2BV,UAA3B,EACH,CAFD,IAEO,CACHA,UAAU,GACb,CACJ,CA5BL,uCAkCY,CACJ,MAAO,qBAAC,gBAAD,kBAAsB,KAAKW,KAA3B,EAAkC,IAAI,CAAE,KAAKb,KAAL,CAAWC,IAAnD,CAA0D,SAAS,CAAE,KAAKL,SAA1E,GAAP,CACH,CApCL,mBAAqBL,KAAK,CAACuB,SAA3B,QAuCH,CAzCD,CA2CA,cAAerB,CAAAA,WAAf","sourcesContent":["import React from \"react\";\r\nimport { produce } from \"imer\"\r\n\r\n\r\nconst withRefSize = (WrappedComponent) => {\r\n\r\n    return class extends React.Component{\r\n\r\n        constructor(...args){\r\n            super(...args);\r\n            this.state={ \r\n                size: {}\r\n            }    \r\n            this.references={};\r\n\r\n        }\r\n\r\n        componentDidMount() {\r\n            const updateSize = () => {\r\n                let size = {};\r\n                for(let [name, element] of Object.entries(this.references)){\r\n                    const {width, height} = element.getBoundingClientRect();\r\n                    size[name] = {\r\n                        width,\r\n                        height\r\n                    }\r\n                }\r\n                this.setState(produce(this.state, draft => draft.size = size))\r\n            }\r\n            if(window.requestIdleCallback){\r\n                window.requestIdleCallback(updateSize)\r\n            } else {\r\n                updateSize();\r\n            }\r\n        }\r\n\r\n        importRef = ( name, ref) => {\r\n            this.references[name] = ref;\r\n        }\r\n\r\n        render(){\r\n            return <WrappedComponent {...this.props} size={this.state.size}  exportRef={this.importRef}/>\r\n        }\r\n    } \r\n\r\n}\r\n\r\nexport default withRefSize;"]},"metadata":{},"sourceType":"module"}