{"ast":null,"code":"var _jsxFileName = \"D:\\\\PROJEKTY\\\\APKI\\\\dj-truck\\\\src\\\\pages\\\\common\\\\components\\\\PlayListExplorer\\\\Explorer\\\\ExplorerTree\\\\ExplorerTree.js\";\nimport React, { useCallback, useState, Fragment, useEffect } from \"react\";\nimport UUID from \"uuidjs\";\nimport { connect } from \"react-redux\";\nimport ExplorerContextMenu from \"./../../../../../common/components/ContextMenu/ContextMenu\";\nimport { ContextMenuTrigger } from \"react-contextmenu\";\nimport { toggleDirRequest, setSelection, openPlaylistRequest, renameSelectedRequest, deleteSelectedRequest, createDirRequest, createPlaylistRequest } from \"./../../../../../../actions\";\nimport { isEmpty, sortObj } from \"./../../../../../../utils/objects/helpers\";\nimport { useDoubleClick } from \"./useDoubleClick\";\nimport RenameInput from \"./RenameInput/RenameInput\";\nimport DirElement from \"./DirElement/DirElement\";\nimport FileElement from \"./FileElement/FileElement\";\nimport \"./explorer-tree.scss\";\n\nconst ExplorerTree = ({\n  toggleDir,\n  setSelection,\n  renameMode,\n  renameSelected,\n  openSelected,\n  createPlaylist,\n  createDir,\n  deleteSelected,\n  root\n}) => {\n  const [_renameMode, setRenameMode] = useState(false);\n  useEffect(() => {\n    setRenameMode(renameMode);\n  }, [renameMode, setRenameMode]);\n  const renameInput = useCallback(name => {\n    return React.createElement(RenameInput, {\n      name: name,\n      onChange: value => {\n        renameSelected(value);\n        setRenameMode(false);\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 42\n      },\n      __self: this\n    });\n  }, [renameSelected, setRenameMode]);\n  const [dirClickHandler] = useDoubleClick({\n    clickHandler: path => {\n      if (!_renameMode) {\n        setSelection(path);\n      }\n    },\n    doubleClickHandler: path => toggleDir(path)\n  });\n  const getDirElement = useCallback(({ ...params\n  }) => {\n    const fullPath = [...params.path, params.name];\n    return React.createElement(DirElement, Object.assign({\n      key: UUID.genV1()\n    }, params, {\n      renameMode: _renameMode,\n      renameInput: renameInput,\n      onClick: dirClickHandler.bind(null, fullPath),\n      buttonClick: toggleDir.bind(null, fullPath),\n      onContextMenu: setSelection.bind(null, fullPath),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61\n      },\n      __self: this\n    }));\n  }, [_renameMode, renameInput, dirClickHandler, setSelection, toggleDir]);\n  const [fileClickHandler] = useDoubleClick({\n    clickHandler: path => {\n      if (!_renameMode) {\n        setSelection(path);\n      }\n    },\n    doubleClickHandler: openSelected\n  });\n  const getFileElement = useCallback((name, path) => {\n    const fullPath = [...path, name];\n    return React.createElement(FileElement, {\n      key: UUID.genV1(),\n      name: name,\n      path: path,\n      renameMode: _renameMode,\n      renameInput: renameInput,\n      onClick: fileClickHandler.bind(null, fullPath),\n      buttonClick: toggleDir.bind(null, fullPath),\n      onContextMenu: setSelection.bind(null, fullPath),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85\n      },\n      __self: this\n    });\n  }, [_renameMode, renameInput, fileClickHandler, toggleDir, setSelection]);\n  let renderDir;\n  const renderDirElements = useCallback((name, content, path) => {\n    content = sortObj(content);\n\n    if (content._type === \"playlist\") {\n      //} instanceof Array) {\n      return getFileElement(name, path);\n    } else {\n      if (content._open === true) {\n        return React.createElement(Fragment, {\n          key: UUID.genV1(),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 106\n          },\n          __self: this\n        }, getDirElement({\n          name,\n          path,\n          open: true\n        }), renderDir(content, [...path, name]));\n      } else {\n        if (isEmpty(content)) {\n          return getDirElement({\n            name,\n            path,\n            open: false,\n            empty: true\n          });\n        }\n\n        return getDirElement({\n          name,\n          path,\n          open: false\n        });\n      }\n    }\n  }, [getDirElement, getFileElement, renderDir]);\n  renderDir = useCallback((dir, path) => {\n    return React.createElement(\"ul\", {\n      className: \"list-dir dir-content\",\n      key: UUID.generate(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122\n      },\n      __self: this\n    }, Object.entries(dir).map(([name, content]) => {\n      if (name.startsWith(\"_\")) {\n        return null;\n      }\n\n      return renderDirElements(name, content, path);\n    }));\n  }, [renderDirElements]);\n  return React.createElement(Fragment, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136\n    },\n    __self: this\n  }, React.createElement(ContextMenuTrigger, {\n    id: \"explorer_context_menu\",\n    holdToDisplay: -1,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"explorer-tree\",\n    onClick: setSelection.bind(null, [\"root\"]),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138\n    },\n    __self: this\n  }, renderDir(root, ['root']))), React.createElement(ExplorerContextMenu, {\n    id: \"explorer_context_menu\",\n    items: {\n      \"Add Playlist\": () => {\n        createPlaylist(); //setRenameMode(true)\n      },\n      \"Add folder\": () => {\n        createDir(); // setRenameMode(true);\n      },\n      \"Rename\": setRenameMode.bind(null, true),\n      \"Delete\": deleteSelected.bind(null)\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143\n    },\n    __self: this\n  }));\n};\n\nconst mapStateToProps = state => ({\n  root: state.playList.root,\n  currentSelection: state.playList.currentSelection,\n  renameMode: state.playList.renameMode\n});\n\nconst mapDispatchToProps = dispatch => ({\n  toggleDir: path => dispatch(toggleDirRequest(path)),\n  //\n  setSelection: path => dispatch(setSelection(path)),\n  openSelected: path => dispatch(openPlaylistRequest(path)),\n  //to request\n  renameSelected: newName => dispatch(renameSelectedRequest(newName)),\n  //\n  deleteSelected: () => dispatch(deleteSelectedRequest()),\n  //\n  createDir: () => dispatch(createDirRequest(null)),\n  //\n  createPlaylist: () => dispatch(createPlaylistRequest(null)) //\n\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ExplorerTree);","map":{"version":3,"sources":["D:/PROJEKTY/APKI/dj-truck/src/pages/common/components/PlayListExplorer/Explorer/ExplorerTree/ExplorerTree.js"],"names":["React","useCallback","useState","Fragment","useEffect","UUID","connect","ExplorerContextMenu","ContextMenuTrigger","toggleDirRequest","setSelection","openPlaylistRequest","renameSelectedRequest","deleteSelectedRequest","createDirRequest","createPlaylistRequest","isEmpty","sortObj","useDoubleClick","RenameInput","DirElement","FileElement","ExplorerTree","toggleDir","renameMode","renameSelected","openSelected","createPlaylist","createDir","deleteSelected","root","_renameMode","setRenameMode","renameInput","name","value","dirClickHandler","clickHandler","path","doubleClickHandler","getDirElement","params","fullPath","genV1","bind","fileClickHandler","getFileElement","renderDir","renderDirElements","content","_type","_open","open","empty","dir","generate","Object","entries","map","startsWith","mapStateToProps","state","playList","currentSelection","mapDispatchToProps","dispatch","newName"],"mappings":"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","sourcesContent":["import React, { useCallback, useState, Fragment, useEffect} from \"react\";\r\nimport UUID from \"uuidjs\";\r\nimport { connect } from \"react-redux\";\r\nimport ExplorerContextMenu from \"./../../../../../common/components/ContextMenu/ContextMenu\";\r\nimport { ContextMenuTrigger } from \"react-contextmenu\";\r\nimport {\r\n    toggleDirRequest,\r\n    setSelection,\r\n    openPlaylistRequest,\r\n    renameSelectedRequest,\r\n    deleteSelectedRequest,\r\n    createDirRequest,\r\n    createPlaylistRequest\r\n} from \"./../../../../../../actions\"\r\nimport { isEmpty, sortObj } from \"./../../../../../../utils/objects/helpers\";\r\nimport { useDoubleClick } from \"./useDoubleClick\";\r\nimport RenameInput from \"./RenameInput/RenameInput\";\r\nimport DirElement from \"./DirElement/DirElement\";\r\nimport FileElement from \"./FileElement/FileElement\";\r\nimport \"./explorer-tree.scss\";\r\n\r\nconst ExplorerTree = ({\r\n    toggleDir,\r\n    setSelection,\r\n    renameMode,\r\n    renameSelected,\r\n    openSelected,\r\n    createPlaylist,\r\n    createDir,\r\n    deleteSelected,\r\n    root }) => {\r\n\r\n    const [_renameMode, setRenameMode] = useState(false);\r\n\r\n\r\n    useEffect(() => {\r\n        setRenameMode(renameMode)\r\n    }, [renameMode, setRenameMode])\r\n\r\n    const renameInput = useCallback(name => {\r\n        return (\r\n            <RenameInput name={name} onChange={value => {\r\n                renameSelected(value);\r\n                setRenameMode(false)\r\n            }} />\r\n        )\r\n    }, [renameSelected, setRenameMode])\r\n\r\n    const [dirClickHandler] = useDoubleClick({\r\n        clickHandler: (path) => {\r\n            if (!_renameMode) {\r\n                setSelection(path)\r\n            }\r\n        },\r\n        doubleClickHandler: path => toggleDir(path),\r\n    })\r\n\r\n    const getDirElement = useCallback(({ ...params }) => {\r\n        const fullPath = [...params.path, params.name]\r\n        return (\r\n            <DirElement\r\n                key={UUID.genV1()}\r\n                {...params}\r\n                renameMode={_renameMode}\r\n                renameInput={renameInput}\r\n                onClick={dirClickHandler.bind(null, fullPath)}\r\n                buttonClick={toggleDir.bind(null, fullPath)}\r\n                onContextMenu={setSelection.bind(null, fullPath)}\r\n            />\r\n        )\r\n    }, [_renameMode, renameInput, dirClickHandler, setSelection, toggleDir])\r\n\r\n    const [fileClickHandler] = useDoubleClick({\r\n        clickHandler: (path) => {\r\n            if (!_renameMode) {\r\n                setSelection(path)\r\n            }\r\n        },\r\n        doubleClickHandler: openSelected\r\n    })\r\n\r\n    const getFileElement = useCallback((name, path) => {\r\n        const fullPath = [...path, name]\r\n        return (\r\n            <FileElement\r\n                key={UUID.genV1()}\r\n                name={name}\r\n                path={path}\r\n                renameMode={_renameMode}\r\n                renameInput={renameInput}\r\n                onClick={fileClickHandler.bind(null, fullPath)}\r\n                buttonClick={toggleDir.bind(null, fullPath)}\r\n                onContextMenu={setSelection.bind(null, fullPath)}\r\n            />\r\n        )\r\n    }, [_renameMode, renameInput, fileClickHandler, toggleDir, setSelection])\r\n\r\n    let renderDir;\r\n    const renderDirElements = useCallback((name, content, path) => {\r\n        content = sortObj(content);\r\n        if (content._type === \"playlist\") {//} instanceof Array) {\r\n            return getFileElement(name, path)\r\n        } else {\r\n            if (content._open === true) {\r\n                return (\r\n                    <Fragment key={UUID.genV1()}>\r\n                        {getDirElement({ name, path, open: true })}\r\n                        {renderDir(content, [...path, name])}\r\n                    </Fragment>\r\n                )\r\n            } else {\r\n                if (isEmpty(content)) {\r\n                    return getDirElement({ name, path, open: false, empty: true })\r\n                }\r\n                return getDirElement({ name, path, open: false })\r\n            }\r\n        }\r\n    }, [getDirElement, getFileElement, renderDir])\r\n\r\n    renderDir = useCallback((dir, path) => {\r\n        return (\r\n            <ul className=\"list-dir dir-content\" key={UUID.generate()}>\r\n                {\r\n                    Object.entries(dir).map(([name, content]) => {\r\n                        if (name.startsWith(\"_\")) {\r\n                            return null;\r\n                        }\r\n                        return renderDirElements(name, content, path);\r\n                    })\r\n                }\r\n            </ul>\r\n        )\r\n    }, [renderDirElements])\r\n\r\n    return (\r\n        <Fragment>\r\n            <ContextMenuTrigger id=\"explorer_context_menu\" holdToDisplay={-1}>\r\n                <div className=\"explorer-tree\" onClick={setSelection.bind(null, [\"root\"])}>\r\n                    {renderDir(root, ['root'])}\r\n                </div>\r\n            </ContextMenuTrigger>\r\n\r\n            <ExplorerContextMenu\r\n                id=\"explorer_context_menu\"\r\n                items={{\r\n                    \"Add Playlist\": () => {\r\n                        createPlaylist();\r\n                        //setRenameMode(true)\r\n                    },\r\n                    \"Add folder\": () => {\r\n                        createDir();\r\n                        // setRenameMode(true);\r\n                    },\r\n                    \"Rename\": setRenameMode.bind(null, true),\r\n                    \"Delete\": deleteSelected.bind(null),\r\n                }} />\r\n        </Fragment>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n    root: state.playList.root,\r\n    currentSelection: state.playList.currentSelection,\r\n    renameMode: state.playList.renameMode,\r\n})\r\n\r\nconst mapDispatchToProps = dispatch => ({\r\n    toggleDir: path => dispatch(toggleDirRequest(path)),//\r\n    setSelection: path => dispatch(setSelection(path)),\r\n    openSelected: path => dispatch(openPlaylistRequest(path)),//to request\r\n    renameSelected: newName => dispatch(renameSelectedRequest(newName)),//\r\n    deleteSelected: () => dispatch(deleteSelectedRequest()),//\r\n    createDir: () => dispatch(createDirRequest(null)),//\r\n    createPlaylist: () => dispatch(createPlaylistRequest(null)),//\r\n})\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ExplorerTree);"]},"metadata":{},"sourceType":"module"}