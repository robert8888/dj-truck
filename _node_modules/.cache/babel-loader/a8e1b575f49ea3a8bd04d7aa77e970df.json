{"ast":null,"code":"import { produce } from \"imer\";\nimport { ACTIONS } from \"./../../actions\";\nconst initState = {\n  // shape of logs:\n  logs: [{\n    createdAt: \"timestamp\",\n    type: \"log/ debug / error\",\n    path: [],\n    message: {\n      public: \"For user view, in logbox component\",\n      protected: \"Only for administrator/ developer view\"\n    }\n  }],\n  //\n  logs: [],\n  last: {\n    message: \"Hello this is error message\",\n    type: \"ERROR\"\n  }\n};\nexport default function loggerReducer(state = initState, action) {\n  switch (action.type) {\n    case ACTIONS.LOG_PUSH:\n      {\n        const {\n          log\n        } = action;\n\n        if (!log) {\n          return state;\n        }\n\n        log.createdAt = new Date().getTime();\n        return produce(state, draftState => {\n          const logs = state.logs;\n          logs.push(log);\n          draftState.logs = logs;\n\n          if (log.message.public) {\n            draftState.last = {\n              message: log.message.public,\n              type: log.type\n            };\n          }\n        });\n      }\n\n    default:\n      return state;\n  }\n}","map":{"version":3,"sources":["D:/PROJEKTY/APKI/dj-truck/src/reducers/logger/loggerReducer.js"],"names":["produce","ACTIONS","initState","logs","createdAt","type","path","message","public","protected","last","loggerReducer","state","action","LOG_PUSH","log","Date","getTime","draftState","push"],"mappings":"AAAA,SAASA,OAAT,QAAwB,MAAxB;AACA,SAASC,OAAT,QAAwB,iBAAxB;AAEA,MAAMC,SAAS,GAAG;AACd;AACAC,EAAAA,IAAI,EAAC,CAAC;AACFC,IAAAA,SAAS,EAAE,WADT;AAEFC,IAAAA,IAAI,EAAE,oBAFJ;AAGFC,IAAAA,IAAI,EAAE,EAHJ;AAIFC,IAAAA,OAAO,EAAE;AACLC,MAAAA,MAAM,EAAE,oCADH;AAELC,MAAAA,SAAS,EAAE;AAFN;AAJP,GAAD,CAFS;AAWd;AACAN,EAAAA,IAAI,EAAG,EAZO;AAadO,EAAAA,IAAI,EAAE;AACFH,IAAAA,OAAO,EAAE,6BADP;AAEFF,IAAAA,IAAI,EAAE;AAFJ;AAbQ,CAAlB;AAmBA,eAAe,SAASM,aAAT,CAAuBC,KAAK,GAAGV,SAA/B,EAA0CW,MAA1C,EAAiD;AAC5D,UAAOA,MAAM,CAACR,IAAd;AACI,SAAKJ,OAAO,CAACa,QAAb;AAAwB;AACpB,cAAM;AAACC,UAAAA;AAAD,YAAQF,MAAd;;AACA,YAAG,CAACE,GAAJ,EAAQ;AACJ,iBAAOH,KAAP;AACH;;AACDG,QAAAA,GAAG,CAACX,SAAJ,GAAiB,IAAIY,IAAJ,EAAD,CAAaC,OAAb,EAAhB;AAEA,eAAOjB,OAAO,CAACY,KAAD,EAAQM,UAAU,IAAG;AAC/B,gBAAMf,IAAI,GAAGS,KAAK,CAACT,IAAnB;AACAA,UAAAA,IAAI,CAACgB,IAAL,CAAUJ,GAAV;AAEAG,UAAAA,UAAU,CAACf,IAAX,GAAkBA,IAAlB;;AACA,cAAGY,GAAG,CAACR,OAAJ,CAAYC,MAAf,EAAsB;AAClBU,YAAAA,UAAU,CAACR,IAAX,GAAkB;AACdH,cAAAA,OAAO,EAAEQ,GAAG,CAACR,OAAJ,CAAYC,MADP;AAEdH,cAAAA,IAAI,EAAEU,GAAG,CAACV;AAFI,aAAlB;AAIH;AACJ,SAXa,CAAd;AAYH;;AAED;AAAU,aAAOO,KAAP;AAtBd;AAwBH","sourcesContent":["import { produce } from \"imer\";\r\nimport { ACTIONS } from \"./../../actions\";\r\n\r\nconst initState = {\r\n    // shape of logs:\r\n    logs:[{\r\n        createdAt: \"timestamp\",\r\n        type: \"log/ debug / error\",\r\n        path: [],\r\n        message: {\r\n            public: \"For user view, in logbox component\",\r\n            protected: \"Only for administrator/ developer view\",\r\n        },\r\n    }],\r\n    //\r\n    logs : [],\r\n    last: {\r\n        message: \"Hello this is error message\",\r\n        type: \"ERROR\",\r\n    }\r\n}\r\n\r\nexport default function loggerReducer(state = initState, action){\r\n    switch(action.type){\r\n        case ACTIONS.LOG_PUSH : {\r\n            const {log} = action;\r\n            if(!log){\r\n                return state;\r\n            }\r\n            log.createdAt = (new Date()).getTime();\r\n            \r\n            return produce(state, draftState =>{\r\n                const logs = state.logs;\r\n                logs.push(log);\r\n\r\n                draftState.logs = logs;\r\n                if(log.message.public){\r\n                    draftState.last = {\r\n                        message: log.message.public,\r\n                        type: log.type,\r\n                    }\r\n                }\r\n            })\r\n        }\r\n        \r\n        default : return state;\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}