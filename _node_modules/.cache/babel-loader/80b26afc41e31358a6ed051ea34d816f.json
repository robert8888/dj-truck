{"ast":null,"code":"var _jsxFileName = \"D:\\\\PROJEKTY\\\\APKI\\\\dj-truck\\\\src\\\\pages\\\\common\\\\components\\\\PlayerControls\\\\Volume\\\\Volume.js\";\nimport React, { useState, useEffect, useRef, useCallback, useMemo } from \"react\";\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faVolumeUp, faVolumeMute } from '@fortawesome/free-solid-svg-icons';\nimport { toRange } from \"./../../../../../utils/math/argRanges\";\nimport classNames from \"classnames\";\nimport \"./volume.scss\";\n\nconst Volume = ({\n  expand\n}) => {\n  const [level, setLevel] = useState(1);\n  const [icon, setIcon] = useState(faVolumeUp);\n  const [_expand, setExpand] = useState(false);\n  const slider = useRef();\n  const sliderGuide = useRef();\n  const sliderProgress = useRef();\n  const sliderThumb = useRef();\n  useEffect(() => {\n    if (level === 0) {\n      setIcon(faVolumeMute);\n    } else {\n      setIcon(faVolumeUp);\n    }\n  }, [level]);\n  const sliderMouseDown = useCallback(e => {\n    console.log(sliderGuide.current);\n    const guide = sliderGuide.current.getBoundingClientRect();\n    let level = (guide.height - (e.clientY - guide.top)) / guide.height;\n    level = toRange(level, 0, 1);\n    setLevel(level);\n  }, [sliderGuide, setLevel]);\n  useEffect(() => {\n    const position = sliderGuide.current.getBoundingClientRect().height * level;\n    sliderThumb.current.style.transform = `translateY(-${position}px)`;\n    sliderProgress.current.style.transform = `scaleY(${position}) translateY(-50%)`;\n  }, [level, sliderThumb, sliderProgress]);\n  const windowMouseMove = useCallback((shiftY, e) => {\n    const guide = sliderGuide.current.getBoundingClientRect();\n    let level = (guide.height - (e.clientY - guide.top)) / guide.height;\n    level = toRange(level, 0, 1);\n    setLevel(level);\n  }, [sliderGuide, setLevel]);\n  const thumbMouseDown = useCallback(e => {\n    const shiftY = e.clientY - sliderThumb.current.getBoundingClientRect().top;\n    const windowMM = windowMouseMove.bind(null, shiftY);\n    window.addEventListener('mousemove', windowMM);\n\n    const mouseUp = () => {\n      window.removeEventListener('mousemove', windowMM);\n      window.removeEventListener('mouseup', mouseUp);\n    };\n\n    window.addEventListener('mouseup', mouseUp);\n  }, [sliderThumb]);\n  const colapse = useCallback(e => {\n    if (e.target.closest('div') !== slider.current) {\n      setExpand(false);\n      window.removeEventListener('mousedown', colapse);\n    }\n  }, []);\n  useEffect(() => {\n    if (!expand) {\n      window.removeEventListener('mosuedown', colapse);\n    }\n  }, [_expand]);\n  useEffect(() => {\n    if (expand !== undefined) {\n      setExpand(expand);\n    }\n\n    if (expand) {\n      window.addEventListener('mousedown', colapse);\n    }\n  }, [setExpand, expand]);\n  const containerClassNames = useMemo(() => {\n    return classNames('volume', {\n      'expand': _expand\n    });\n  }, [_expand]);\n  return React.createElement(\"div\", {\n    className: containerClassNames,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89\n    },\n    __self: this\n  }, React.createElement(\"button\", {\n    className: \"volume-btn\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90\n    },\n    __self: this\n  }, React.createElement(FontAwesomeIcon, {\n    icon: icon,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"volume-slider\",\n    ref: slider,\n    onMouseDown: sliderMouseDown,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"volume-slider-guide\",\n    ref: sliderGuide,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    className: \"volume-slider-progress\",\n    ref: sliderProgress,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    className: \"volume-slider-thumb\",\n    ref: sliderThumb,\n    onMouseDown: thumbMouseDown,\n    onDragStart: e => false,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96\n    },\n    __self: this\n  })));\n};\n\nexport default Volume;","map":{"version":3,"sources":["D:/PROJEKTY/APKI/dj-truck/src/pages/common/components/PlayerControls/Volume/Volume.js"],"names":["React","useState","useEffect","useRef","useCallback","useMemo","FontAwesomeIcon","faVolumeUp","faVolumeMute","toRange","classNames","Volume","expand","level","setLevel","icon","setIcon","_expand","setExpand","slider","sliderGuide","sliderProgress","sliderThumb","sliderMouseDown","e","console","log","current","guide","getBoundingClientRect","height","clientY","top","position","style","transform","windowMouseMove","shiftY","thumbMouseDown","windowMM","bind","window","addEventListener","mouseUp","removeEventListener","colapse","target","closest","undefined","containerClassNames"],"mappings":"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","sourcesContent":["import React, {useState, useEffect, useRef, useCallback, useMemo} from \"react\";\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\nimport { faVolumeUp, faVolumeMute  } from '@fortawesome/free-solid-svg-icons';\r\nimport {toRange} from \"./../../../../../utils/math/argRanges\";\r\nimport classNames from \"classnames\";\r\nimport \"./volume.scss\"\r\n\r\nconst Volume = ({expand}) => {\r\n    const [level , setLevel] = useState(1);\r\n    const [icon , setIcon] = useState(faVolumeUp);\r\n    const [_expand , setExpand] = useState(false);\r\n    const slider = useRef();\r\n    const sliderGuide = useRef();\r\n    const sliderProgress = useRef();\r\n    const sliderThumb = useRef();\r\n\r\n    useEffect(()=>{\r\n        if(level === 0){\r\n            setIcon(faVolumeMute)\r\n        } else {\r\n            setIcon(faVolumeUp)\r\n        }\r\n    }, [level])\r\n\r\n    const sliderMouseDown = useCallback((e)=>{\r\n        console.log(sliderGuide.current)\r\n        const guide = sliderGuide.current.getBoundingClientRect();\r\n        let level = (guide.height -  (e.clientY - guide.top)) / guide.height;\r\n        level = toRange(level, 0 ,1);\r\n        setLevel(level)\r\n    }, [sliderGuide, setLevel])\r\n\r\n    useEffect(()=>{\r\n        const position = sliderGuide.current.getBoundingClientRect().height * level;\r\n        sliderThumb.current.style.transform = `translateY(-${position}px)`;\r\n        sliderProgress.current.style.transform = `scaleY(${position}) translateY(-50%)`\r\n    }, [level, sliderThumb, sliderProgress])\r\n\r\n    const windowMouseMove = useCallback((shiftY, e)=>{\r\n        const guide = sliderGuide.current.getBoundingClientRect();\r\n        let level = (guide.height - (e.clientY - guide.top)) / guide.height;\r\n        level = toRange(level, 0 ,1);\r\n        setLevel(level)\r\n\r\n    }, [sliderGuide, setLevel])\r\n\r\n    const thumbMouseDown = useCallback((e)=>{\r\n        const shiftY = e.clientY - sliderThumb.current.getBoundingClientRect().top;\r\n        const windowMM = windowMouseMove.bind(null, shiftY);\r\n        window.addEventListener('mousemove', windowMM)\r\n        const mouseUp = ()=>{\r\n            window.removeEventListener('mousemove', windowMM);\r\n            window.removeEventListener('mouseup', mouseUp);\r\n        }\r\n        window.addEventListener('mouseup', mouseUp);\r\n    }, [sliderThumb])\r\n\r\n    const colapse = useCallback((e)=>{\r\n        if(e.target.closest('div') !== slider.current){\r\n            setExpand(false)\r\n            window.removeEventListener('mousedown', colapse);\r\n        }\r\n    }, []);\r\n\r\n    useEffect(()=>{\r\n        if(!expand){\r\n            window.removeEventListener('mosuedown', colapse);\r\n        }\r\n    }, [_expand])\r\n\r\n    useEffect(()=>{\r\n        if(expand !== undefined){\r\n            setExpand(expand);\r\n        }\r\n        if(expand){\r\n            window.addEventListener('mousedown', colapse)\r\n        }\r\n    }, [setExpand, expand])\r\n\r\n    const containerClassNames = useMemo(()=>{\r\n        return classNames(\r\n            'volume', {\r\n                'expand' : _expand,\r\n            }\r\n        )\r\n    }, [_expand])\r\n\r\n    return (\r\n        <div className={containerClassNames}>\r\n            <button className=\"volume-btn\">\r\n                <FontAwesomeIcon icon={icon}/>\r\n            </button>\r\n            <div className=\"volume-slider\" ref={slider} onMouseDown={sliderMouseDown}>\r\n                <div className=\"volume-slider-guide\" ref={sliderGuide}/>\r\n                <div className=\"volume-slider-progress\" ref={sliderProgress}/>\r\n                <div className=\"volume-slider-thumb\" ref={sliderThumb} onMouseDown={thumbMouseDown} onDragStart={ e => false}/>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Volume;"]},"metadata":{},"sourceType":"module"}