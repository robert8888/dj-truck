{"ast":null,"code":"import { hideLoading, showLoading } from 'react-redux-loading-bar';\nimport { put, select, takeEvery } from \"redux-saga/effects\";\nimport { ACTIONS, deleteTrack } from \"../../actions\";\nimport { getApi } from \"./../../apis/apiProvider\";\nexport default function* deleteTrackRequestSaga() {\n  yield takeEvery(ACTIONS.PL_DELETE_TRACK_REQUEST, handel);\n}\n\nconst getToken = state => state.user.token;\n\nfunction* handel(action) {\n  const path = ['saga', 'playlist', 'request delete track'];\n  const token = yield select(getToken);\n\n  if (!token) {\n    return yield put(deleteTrack(action.index));\n  }\n\n  try {\n    yield put(showLoading());\n    const {\n      callQuery,\n      queries\n    } = getApi(\"UserAssets\");\n    let res = yield callQuery(queries.deleteQl.deleteTrack(action.id), token);\n\n    if (!res.errors && res.data.deleteTrack) {\n      yield put(deleteTrack(action.index));\n    } else {\n      throw new Error(JSON.stringify(res.errors));\n    }\n  } catch (err) {\n    console.log(\"can't delete track in database, problem with api call\");\n    console.log(err.message);\n  } finally {\n    yield put(hideLoading());\n  }\n}","map":{"version":3,"sources":["D:/PROJEKTY/APKI/dj-truck/src/sagas/playlists/reqDeleteTrackSaga.js"],"names":["hideLoading","showLoading","put","select","takeEvery","ACTIONS","deleteTrack","getApi","deleteTrackRequestSaga","PL_DELETE_TRACK_REQUEST","handel","getToken","state","user","token","action","path","index","callQuery","queries","res","deleteQl","id","errors","data","Error","JSON","stringify","err","console","log","message"],"mappings":"AAAA,SAASA,WAAT,EAAsBC,WAAtB,QAAyC,yBAAzC;AACA,SAASC,GAAT,EAAcC,MAAd,EAAsBC,SAAtB,QAAuC,oBAAvC;AACA,SAASC,OAAT,EAAkBC,WAAlB,QAAqC,eAArC;AACA,SAASC,MAAT,QAAuB,0BAAvB;AAGA,eAAe,UAAUC,sBAAV,GAAmC;AAC9C,QAAMJ,SAAS,CAACC,OAAO,CAACI,uBAAT,EAAkCC,MAAlC,CAAf;AACH;;AAED,MAAMC,QAAQ,GAAGC,KAAK,IAAIA,KAAK,CAACC,IAAN,CAAWC,KAArC;;AAEA,UAAUJ,MAAV,CAAiBK,MAAjB,EAAyB;AACrB,QAAMC,IAAI,GAAG,CAAC,MAAD,EAAS,UAAT,EAAqB,sBAArB,CAAb;AACA,QAAMF,KAAK,GAAG,MAAMX,MAAM,CAACQ,QAAD,CAA1B;;AAEA,MAAI,CAACG,KAAL,EAAY;AACR,WAAO,MAAMZ,GAAG,CAACI,WAAW,CAACS,MAAM,CAACE,KAAR,CAAZ,CAAhB;AACH;;AACD,MAAI;AACA,UAAMf,GAAG,CAACD,WAAW,EAAZ,CAAT;AACA,UAAM;AAAEiB,MAAAA,SAAF;AAAaC,MAAAA;AAAb,QAAyBZ,MAAM,CAAC,YAAD,CAArC;AACA,QAAIa,GAAG,GAAG,MAAMF,SAAS,CAACC,OAAO,CAACE,QAAR,CAAiBf,WAAjB,CAA6BS,MAAM,CAACO,EAApC,CAAD,EAA0CR,KAA1C,CAAzB;;AACA,QAAI,CAACM,GAAG,CAACG,MAAL,IAAeH,GAAG,CAACI,IAAJ,CAASlB,WAA5B,EAAyC;AACrC,YAAMJ,GAAG,CAACI,WAAW,CAACS,MAAM,CAACE,KAAR,CAAZ,CAAT;AACH,KAFD,MAEO;AACH,YAAM,IAAIQ,KAAJ,CAAUC,IAAI,CAACC,SAAL,CAAeP,GAAG,CAACG,MAAnB,CAAV,CAAN;AACH;AAEJ,GAVD,CAUE,OAAOK,GAAP,EAAY;AACVC,IAAAA,OAAO,CAACC,GAAR,CAAY,uDAAZ;AACAD,IAAAA,OAAO,CAACC,GAAR,CAAYF,GAAG,CAACG,OAAhB;AACH,GAbD,SAaU;AACN,UAAM7B,GAAG,CAACF,WAAW,EAAZ,CAAT;AACH;AACJ","sourcesContent":["import { hideLoading, showLoading } from 'react-redux-loading-bar';\r\nimport { put, select, takeEvery } from \"redux-saga/effects\";\r\nimport { ACTIONS, deleteTrack } from \"../../actions\";\r\nimport { getApi } from \"./../../apis/apiProvider\";\r\n\r\n\r\nexport default function* deleteTrackRequestSaga() {\r\n    yield takeEvery(ACTIONS.PL_DELETE_TRACK_REQUEST, handel)\r\n}\r\n\r\nconst getToken = state => state.user.token;\r\n\r\nfunction* handel(action) {\r\n    const path = ['saga', 'playlist', 'request delete track'];\r\n    const token = yield select(getToken);\r\n\r\n    if (!token) {\r\n        return yield put(deleteTrack(action.index));\r\n    }\r\n    try {\r\n        yield put(showLoading());\r\n        const { callQuery, queries } = getApi(\"UserAssets\");\r\n        let res = yield callQuery(queries.deleteQl.deleteTrack(action.id), token);\r\n        if (!res.errors && res.data.deleteTrack) {\r\n            yield put(deleteTrack(action.index));\r\n        } else {\r\n            throw new Error(JSON.stringify(res.errors))\r\n        }\r\n\r\n    } catch (err) {\r\n        console.log(\"can't delete track in database, problem with api call\");\r\n        console.log(err.message);\r\n    } finally {\r\n        yield put(hideLoading())\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}