{"ast":null,"code":"import _objectSpread from\"D:\\\\PROJEKTY\\\\APKI\\\\DjTruck\\\\djtruck\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"D:\\\\PROJEKTY\\\\APKI\\\\DjTruck\\\\djtruck\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"D:\\\\PROJEKTY\\\\APKI\\\\DjTruck\\\\djtruck\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"D:\\\\PROJEKTY\\\\APKI\\\\DjTruck\\\\djtruck\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"D:\\\\PROJEKTY\\\\APKI\\\\DjTruck\\\\djtruck\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";import _inherits from\"D:\\\\PROJEKTY\\\\APKI\\\\DjTruck\\\\djtruck\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import React from\"react\";import Console from\"./../../../../core/console/console\";import\"./peak-level-meter.scss\";// there is 20 leds indicators\n// 15 is blue and calc from bottom last 15 is zero dB.\n// scale range is between -40 dB and + 10 dB\n// this means that on led is 2.5 dB\nvar PeakLevelMater=/*#__PURE__*/function(_React$Component){_inherits(PeakLevelMater,_React$Component);function PeakLevelMater(){var _getPrototypeOf2;var _this;_classCallCheck(this,PeakLevelMater);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(PeakLevelMater)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.state={ledStates:new Array(20).fill(false),mixerChannelInterface:Console.Get().getMixerChannelInterface(_this.props.name)};_this.mouseOverHandler=function(event){};return _this;}_createClass(PeakLevelMater,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;var updateLedStates=function updateLedStates(){var nextLedState=new Array(_this2.state.ledStates.length).fill(false);var peakMeter=_this2.state.mixerChannelInterface.getPeakMeter();var ledOn=15+peakMeter.peakdB/2.5;for(var i=0;i<ledOn&&i<_this2.state.ledStates.length;i++){nextLedState[i]=true;}_this2.setState(_objectSpread({},_this2.state,{ledStates:nextLedState}));requestAnimationFrame(updateLedStates);};updateLedStates();}},{key:\"render\",value:function render(){return React.createElement(\"div\",{className:\"peak-level-meter\"},this.state.ledStates.map(function(ledState,index){return React.createElement(\"div\",{key:index,className:\"level-meter-led led-\"+index+(ledState?\" led-on\":\" led-off\")});}));}}]);return PeakLevelMater;}(React.Component);export default PeakLevelMater;","map":{"version":3,"sources":["D:/PROJEKTY/APKI/DjTruck/djtruck/src/components/Mixer/Channel/PeakLevelMeter/PeakLevelMeter.js"],"names":["React","Console","PeakLevelMater","state","ledStates","Array","fill","mixerChannelInterface","Get","getMixerChannelInterface","props","name","mouseOverHandler","event","updateLedStates","nextLedState","length","peakMeter","getPeakMeter","ledOn","peakdB","i","setState","requestAnimationFrame","map","ledState","index","Component"],"mappings":"yuBAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,OAAP,KAAoB,oCAApB,CACA,MAAO,yBAAP,CAEA;AACA;AACA;AACA;GAEMC,CAAAA,c,2aAEFC,K,CAAQ,CACJC,SAAS,CAAI,GAAIC,CAAAA,KAAJ,CAAU,EAAV,CAAD,CAAgBC,IAAhB,CAAqB,KAArB,CADR,CAEJC,qBAAqB,CAAGN,OAAO,CAACO,GAAR,GAAcC,wBAAd,CAAuC,MAAKC,KAAL,CAAWC,IAAlD,CAFpB,C,OAMRC,gB,CAAmB,SAACC,KAAD,CAAW,CAE7B,C,uGAEkB,iBACf,GAAIC,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,EAAK,CACxB,GAAIC,CAAAA,YAAY,CAAI,GAAIV,CAAAA,KAAJ,CAAU,MAAI,CAACF,KAAL,CAAWC,SAAX,CAAqBY,MAA/B,CAAD,CAAyCV,IAAzC,CAA8C,KAA9C,CAAnB,CAEC,GAAIW,CAAAA,SAAS,CAAG,MAAI,CAACd,KAAL,CAAWI,qBAAX,CAAiCW,YAAjC,EAAhB,CACA,GAAIC,CAAAA,KAAK,CAAG,GAAKF,SAAS,CAACG,MAAV,CAAmB,GAApC,CAEA,IAAI,GAAIC,CAAAA,CAAC,CAAG,CAAZ,CAAiBA,CAAC,CAAGF,KAAJ,EAAaE,CAAC,CAAG,MAAI,CAAClB,KAAL,CAAWC,SAAX,CAAqBY,MAAvD,CAAgEK,CAAC,EAAjE,CAAqE,CACjEN,YAAY,CAACM,CAAD,CAAZ,CAAkB,IAAlB,CACH,CAED,MAAI,CAACC,QAAL,kBAAkB,MAAI,CAACnB,KAAvB,EAA8BC,SAAS,CAAGW,YAA1C,IACAQ,qBAAqB,CAACT,eAAD,CAArB,CACH,CAZD,CAcAA,eAAe,GAClB,C,uCAEO,CACJ,MACI,4BAAK,SAAS,CAAC,kBAAf,EACM,KAAKX,KAAL,CAAWC,SAAX,CAAqBoB,GAArB,CAAyB,SAACC,QAAD,CAAWC,KAAX,CAAmB,CACzC,MAAQ,4BAAK,GAAG,CAAEA,KAAV,CAAiB,SAAS,CAAE,uBAAwBA,KAAxB,EAAkCD,QAAD,CAAa,SAAb,CAAyB,UAA1D,CAA5B,EAAR,CACJ,CAFC,CADN,CADJ,CAOH,C,4BAtCwBzB,KAAK,CAAC2B,S,EA0CnC,cAAezB,CAAAA,cAAf","sourcesContent":["import React from \"react\"\r\nimport Console from \"./../../../../core/console/console\";\r\nimport \"./peak-level-meter.scss\";\r\n\r\n// there is 20 leds indicators\r\n// 15 is blue and calc from bottom last 15 is zero dB.\r\n// scale range is between -40 dB and + 10 dB\r\n// this means that on led is 2.5 dB\r\n\r\nclass PeakLevelMater extends React.Component{\r\n\r\n    state = {\r\n        ledStates : (new Array(20)).fill(false),\r\n        mixerChannelInterface : Console.Get().getMixerChannelInterface(this.props.name),\r\n\r\n    }\r\n\r\n    mouseOverHandler = (event) => {\r\n\r\n    }\r\n\r\n    componentDidMount(){\r\n        let updateLedStates = () =>{\r\n           let nextLedState = (new Array(this.state.ledStates.length)).fill(false);\r\n\r\n            let peakMeter = this.state.mixerChannelInterface.getPeakMeter();\r\n            let ledOn = 15 + peakMeter.peakdB / 2.5;\r\n\r\n            for(let i = 0 ; (i < ledOn && i < this.state.ledStates.length); i++) {\r\n                nextLedState[i] = true;\r\n            }\r\n\r\n            this.setState({...this.state, ledStates : nextLedState})\r\n            requestAnimationFrame(updateLedStates);\r\n        }\r\n        \r\n        updateLedStates();\r\n    }\r\n    \r\n    render(){\r\n        return (\r\n            <div className=\"peak-level-meter\">\r\n                { this.state.ledStates.map((ledState, index)=>{\r\n                     return (<div key={index} className={\"level-meter-led led-\"+ index + ((ledState) ? \" led-on\" : \" led-off\") }/>)\r\n                })}\r\n            </div>\r\n        )\r\n    }\r\n\r\n}\r\n\r\nexport default PeakLevelMater;"]},"metadata":{},"sourceType":"module"}