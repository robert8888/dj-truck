{"ast":null,"code":"import Effect from \"./../effect\";\nimport { toRange } from \"./../../../../../../../utils/math/argRanges\";\nexport default class Delay extends Effect {\n  static defaultParams() {\n    return {\n      params: {\n        feedback: {\n          min: 0,\n          max: 100,\n          defaultValue: 50,\n          type: \"float\",\n          description: \"fb\"\n        },\n        time: {\n          min: 0,\n          max: 180,\n          defaultValue: 5,\n          type: \"float\",\n          description: \"time\"\n        }\n      }\n    };\n  }\n\n  constructor(context, params) {\n    super();\n    this._default = Delay.defaultParams().params;\n    this._context = context;\n\n    this._buildNodes();\n\n    this._initParams(params);\n  }\n\n  _buildNodes() {\n    this.inputNode = this._context.createGain();\n    this.outputNode = this._context.createGain();\n    this.feedbackGainNode = this._context.createGain();\n    this.delayNode = this._context.createDelay(); //config\n\n    this.feedbackGainNode.gain.value = this.feedback / 100;\n    this.delayNode.delayTime.value = this.time; // line in to wet mix\n\n    this.inputNode.connect(this.delayNode); // feedback loop\n\n    this.delayNode.connect(this.feedbackGainNode);\n    this.feedbackGainNode.connect(this.delayNode); // wet out\n\n    this.delayNode.connect(this.outputNode);\n    this.outputNode.gain.value = 0.4;\n  }\n\n  connect(input, dest) {\n    input.connect(this.inputNode);\n    this.outputNode.connect(dest);\n    console.log(this);\n  }\n\n  disconnect() {\n    this.outputNode.disconnect();\n  }\n\n  get name() {\n    return \"delay\";\n  }\n\n  get time() {\n    return this._time;\n  }\n\n  set time(value) {\n    value = this._valueToRange(value, \"time\");\n    this._time = value;\n    this.delayNode.delayTime.setTargetAtTime(value, this.context.currentTime, 0.01);\n  }\n\n  get feedback() {\n    return this._feedback;\n  }\n\n  set feedback(value) {\n    value = this._valueToRange(value, \"feedback\");\n    this._feedback = value;\n    this.feedbackGainNode.gain.setTargetAtTime(value / 100, this.context.currentTime, 0.01);\n  }\n\n}","map":{"version":3,"sources":["D:/PROJEKTY/APKI/DjTruck/djtruck/src/pages/app/core/console/effector/effects/delay/delay.js"],"names":["Effect","toRange","Delay","defaultParams","params","feedback","min","max","defaultValue","type","description","time","constructor","context","_default","_context","_buildNodes","_initParams","inputNode","createGain","outputNode","feedbackGainNode","delayNode","createDelay","gain","value","delayTime","connect","input","dest","console","log","disconnect","name","_time","_valueToRange","setTargetAtTime","currentTime","_feedback"],"mappings":"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","sourcesContent":["import Effect from \"./../effect\";\r\nimport {toRange} from \"./../../../../../../../utils/math/argRanges\";\r\n\r\nexport default class Delay extends Effect {\r\n    static defaultParams(){\r\n        return {\r\n            params : {\r\n                feedback: {\r\n                    min: 0,\r\n                    max: 100,\r\n                    defaultValue: 50,\r\n                    type: \"float\",\r\n                    description : \"fb\"\r\n                },\r\n                time: {\r\n                    min: 0,\r\n                    max: 180,\r\n                    defaultValue: 5,\r\n                    type: \"float\",\r\n                    description: \"time\"\r\n                },\r\n            }\r\n        }\r\n    }\r\n\r\n    constructor(context, params){\r\n        super();\r\n        this._default = Delay.defaultParams().params;\r\n        this._context = context;\r\n\r\n        this._buildNodes();\r\n        this._initParams(params)\r\n\r\n    }\r\n\r\n    _buildNodes(){\r\n        this.inputNode = this._context.createGain();\r\n        this.outputNode = this._context.createGain();\r\n        this.feedbackGainNode = this._context.createGain();\r\n        this.delayNode = this._context.createDelay();\r\n        \r\n        //config\r\n        this.feedbackGainNode.gain.value = this.feedback/100 ;\r\n        this.delayNode.delayTime.value = this.time;\r\n\r\n        // line in to wet mix\r\n        this.inputNode.connect(this.delayNode);\r\n\r\n        // feedback loop\r\n        this.delayNode.connect(this.feedbackGainNode);\r\n        this.feedbackGainNode.connect(this.delayNode);\r\n\r\n        // wet out\r\n        this.delayNode.connect(this.outputNode);\r\n        this.outputNode.gain.value = 0.4;\r\n    }\r\n\r\n    connect(input, dest){\r\n        input.connect(this.inputNode);\r\n        this.outputNode.connect(dest);\r\n\r\n        console.log(this)\r\n    }\r\n\r\n    disconnect(){\r\n        this.outputNode.disconnect();\r\n    }\r\n\r\n    \r\n    get name(){\r\n        return \"delay\"\r\n    }\r\n\r\n    get time(){\r\n        return this._time;\r\n    }\r\n\r\n    set time(value){\r\n        value = this._valueToRange(value, \"time\")\r\n        this._time = value;\r\n        this.delayNode.delayTime.setTargetAtTime(\r\n                value, \r\n                this.context.currentTime,\r\n                0.01\r\n            );\r\n    }\r\n\r\n    get feedback(){\r\n        return this._feedback;\r\n    }\r\n\r\n    set feedback(value){\r\n        value = this._valueToRange(value, \"feedback\")\r\n        this._feedback = value;\r\n        this.feedbackGainNode.gain.setTargetAtTime(\r\n                value / 100,\r\n                this.context.currentTime, \r\n                0.01\r\n            )\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}