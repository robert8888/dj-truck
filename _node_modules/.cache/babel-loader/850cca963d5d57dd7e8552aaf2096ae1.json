{"ast":null,"code":"import _slicedToArray from\"D:\\\\PROJEKTY\\\\APKI\\\\dj-truck\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import _toConsumableArray from\"D:\\\\PROJEKTY\\\\APKI\\\\dj-truck\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";import{faAngleDown,faAngleRight,faFolder}from\"@fortawesome/free-solid-svg-icons\";import{FontAwesomeIcon}from\"@fortawesome/react-fontawesome\";import ClassName from\"classnames\";import React,{useCallback,useRef}from\"react\";import{useDrag,useDrop}from\"react-dnd\";import{connect}from\"react-redux\";import UUID from\"uuidjs\";import{moveToRequest}from\"./../../../../../../../actions\";import ItemTypes from\"./../../../../../DndItemTypes\";var DirElement=function DirElement(props){var name=props.name,path=props.path,open=props.open,empty=props.empty,renameMode=props.renameMode,renameInput=props.renameInput,moveToHandler=props.moveTo;var fullPath=[].concat(_toConsumableArray(path),[name]);var ref=useRef(null);var handleDrop=useCallback(function(item){var pathTo=fullPath;//local\nvar pathFrom=item.fullPath;moveToHandler(pathFrom,pathTo);},[moveToHandler,fullPath]);var _useDrag=useDrag({item:{type:ItemTypes.DIR,fullPath:fullPath}}),_useDrag2=_slicedToArray(_useDrag,2),drag=_useDrag2[1];var _useDrop=useDrop({accept:[ItemTypes.FILE,ItemTypes.DIR],drop:handleDrop}),_useDrop2=_slicedToArray(_useDrop,2),drop=_useDrop2[1];var currentSelected=false;if([].concat(_toConsumableArray(path),[name]).join(\"\")===props.currentSelection.join(\"\")){currentSelected=true;}var liClassList=ClassName(\"list-item item-dir\",{\"item-dir--empty\":empty},{\"item--selected\":currentSelected});var content=name;if(currentSelected&&renameMode){content=renameInput(name);}drag(drop(ref));return React.createElement(\"li\",{ref:ref,onClick:props.onClick,onContextMenu:props.onContextMenu.bind(null,path),className:liClassList,\"data-path\":path.join(\"/\"),key:UUID.genV1()},!empty&&React.createElement(\"button\",{className:\"btn-dir \"+(open?\"btn-dir--expand\":\"btn-dir--colapse\")},React.createElement(FontAwesomeIcon,{className:\"icon\",icon:open?faAngleDown:faAngleRight,onClick:props.buttonClick.bind(null)})),React.createElement(FontAwesomeIcon,{className:\"icon icon-dir\",icon:faFolder}),content);};var mapStateToProps=function mapStateToProps(state){return{currentSelection:state.playList.currentSelection};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return{moveTo:function moveTo(pathFrom,pathTo){return dispatch(moveToRequest(pathFrom,pathTo));}};};export default connect(mapStateToProps,mapDispatchToProps)(DirElement);","map":{"version":3,"sources":["D:/PROJEKTY/APKI/dj-truck/src/pages/common/components/PlayListExplorer/Explorer/ExplorerTree/DirElement/DirElement.js"],"names":["faAngleDown","faAngleRight","faFolder","FontAwesomeIcon","ClassName","React","useCallback","useRef","useDrag","useDrop","connect","UUID","moveToRequest","ItemTypes","DirElement","props","name","path","open","empty","renameMode","renameInput","moveToHandler","moveTo","fullPath","ref","handleDrop","item","pathTo","pathFrom","type","DIR","drag","accept","FILE","drop","currentSelected","join","currentSelection","liClassList","content","onClick","onContextMenu","bind","genV1","buttonClick","mapStateToProps","state","playList","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import { faAngleDown, faAngleRight, faFolder } from \"@fortawesome/free-solid-svg-icons\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport ClassName from \"classnames\";\r\nimport React, { useCallback, useRef } from \"react\";\r\nimport { useDrag, useDrop } from \"react-dnd\";\r\nimport { connect } from \"react-redux\";\r\nimport UUID from \"uuidjs\";\r\nimport { moveToRequest } from \"./../../../../../../../actions\";\r\nimport ItemTypes from \"./../../../../../DndItemTypes\";\r\n\r\nconst DirElement = props => {\r\n    const { name, path, open, empty, renameMode, renameInput, moveTo:moveToHandler } = props;\r\n    const fullPath = [...path, name]\r\n    const ref = useRef(null)\r\n\r\n    const handleDrop = useCallback((item) => {\r\n        const pathTo = fullPath;//local\r\n        const pathFrom = item.fullPath;\r\n        moveToHandler(pathFrom, pathTo);\r\n    }, [moveToHandler, fullPath])\r\n\r\n    const [, drag] = useDrag({\r\n        item: {\r\n            type: ItemTypes.DIR,\r\n            fullPath: fullPath\r\n        },\r\n    })\r\n\r\n    const [, drop] = useDrop({\r\n        accept: [ItemTypes.FILE, ItemTypes.DIR],\r\n        drop: handleDrop\r\n    })\r\n\r\n\r\n    let currentSelected = false;\r\n    if ([...path, name].join(\"\") === props.currentSelection.join(\"\")) {\r\n        currentSelected = true;\r\n    }\r\n    const liClassList = ClassName(\r\n        \"list-item item-dir\",\r\n        { \"item-dir--empty\": empty },\r\n        { \"item--selected\": currentSelected }\r\n    )\r\n    let content = name;\r\n    if (currentSelected && renameMode) {\r\n        content = renameInput(name)\r\n    }\r\n\r\n    drag(drop(ref))\r\n    return (\r\n        <li\r\n            ref={ref}\r\n            onClick={props.onClick}\r\n            onContextMenu={props.onContextMenu.bind(null, path)}\r\n            className={liClassList}\r\n            data-path={path.join(\"/\")}\r\n            key={UUID.genV1()}>\r\n            {!empty &&\r\n                <button\r\n                    className={\"btn-dir \" + ((open) ? \"btn-dir--expand\" : \"btn-dir--colapse\")}>\r\n                    <FontAwesomeIcon\r\n                        className=\"icon\"\r\n                        icon={(open) ? faAngleDown : faAngleRight}\r\n                        onClick={props.buttonClick.bind(null)} />\r\n                </button>}\r\n            <FontAwesomeIcon className=\"icon icon-dir\" icon={faFolder} />\r\n            {content}\r\n        </li>\r\n    )\r\n\r\n}\r\n\r\n\r\nconst mapStateToProps = state => ({\r\n    currentSelection: state.playList.currentSelection\r\n})\r\n\r\nconst mapDispatchToProps = dispatch =>({\r\n    moveTo : (pathFrom, pathTo) => dispatch(moveToRequest(pathFrom, pathTo))\r\n})\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(DirElement);\r\n\r\n"]},"metadata":{},"sourceType":"module"}