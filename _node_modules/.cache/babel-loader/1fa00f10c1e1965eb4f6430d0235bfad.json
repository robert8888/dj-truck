{"ast":null,"code":"import { put, takeEvery } from \"redux-saga/effects\";\nimport { ACTIONS, pushLog, setProfile } from \"./../../actions\";\nimport { getApi } from \"./../../apis/apiProvider\";\nimport { Log } from \"./../../utils/logger/logger\";\nexport default function* requestUserProfile() {\n  yield takeEvery(ACTIONS.P_REQ_PROFILE, handle);\n}\n\nfunction* handle(action) {\n  const path = ['saga', 'profile', 'request profile data'];\n\n  try {\n    var _response$data;\n\n    if (!action.nickname) {\n      return;\n    }\n\n    const {\n      callQuery,\n      queries\n    } = getApi(\"UserAssets\");\n    const query = queries.getProfileQl;\n    const response = yield callQuery(query, null, {\n      nickname: action.nickname\n    });\n\n    if (response.errors) {\n      throw new Error('Server response contains errors ' + errorParser(response.errors));\n    }\n\n    if (!(response === null || response === void 0 ? void 0 : (_response$data = response.data) === null || _response$data === void 0 ? void 0 : _response$data.profile)) {\n      throw new Error();\n    }\n\n    yield put(setProfile(response.data.profile));\n    yield put(pushLog(new Log(`Profile : ${action.nickname} data recived from database`, path)));\n  } catch (error) {\n    yield put(pushLog(Log.Error(path, error.message, 'can \\'t get profiele data from database' + error.message, error)));\n  }\n}","map":{"version":3,"sources":["D:/PROJEKTY/APKI/dj-truck/src/sagas/profile/reqProfileSaqa.js"],"names":["put","takeEvery","ACTIONS","pushLog","setProfile","getApi","Log","requestUserProfile","P_REQ_PROFILE","handle","action","path","nickname","callQuery","queries","query","getProfileQl","response","errors","Error","errorParser","data","profile","error","message"],"mappings":"AAAA,SAASA,GAAT,EAAcC,SAAd,QAA+B,oBAA/B;AACA,SAASC,OAAT,EAAkBC,OAAlB,EAA2BC,UAA3B,QAA6C,iBAA7C;AACA,SAASC,MAAT,QAAuB,0BAAvB;AACA,SAASC,GAAT,QAAoB,6BAApB;AAEA,eAAe,UAAUC,kBAAV,GAA+B;AAC1C,QAAMN,SAAS,CAACC,OAAO,CAACM,aAAT,EAAwBC,MAAxB,CAAf;AACH;;AAED,UAAUA,MAAV,CAAiBC,MAAjB,EAAyB;AACrB,QAAMC,IAAI,GAAG,CAAC,MAAD,EAAS,SAAT,EAAoB,sBAApB,CAAb;;AACA,MAAI;AAAA;;AACA,QAAG,CAACD,MAAM,CAACE,QAAX,EAAqB;AACjB;AACH;;AACD,UAAM;AAAEC,MAAAA,SAAF;AAAaC,MAAAA;AAAb,QAAyBT,MAAM,CAAC,YAAD,CAArC;AACA,UAAMU,KAAK,GAAGD,OAAO,CAACE,YAAtB;AAEA,UAAMC,QAAQ,GAAG,MAAMJ,SAAS,CAACE,KAAD,EAAQ,IAAR,EAAc;AAAEH,MAAAA,QAAQ,EAAEF,MAAM,CAACE;AAAnB,KAAd,CAAhC;;AAEA,QAAIK,QAAQ,CAACC,MAAb,EAAqB;AACjB,YAAM,IAAIC,KAAJ,CAAU,qCAAoCC,WAAW,CAACH,QAAQ,CAACC,MAAV,CAAzD,CAAN;AACH;;AAED,QAAG,EAACD,QAAD,aAACA,QAAD,yCAACA,QAAQ,CAAEI,IAAX,mDAAC,eAAgBC,OAAjB,CAAH,EAA4B;AACxB,YAAM,IAAIH,KAAJ,EAAN;AACH;;AAED,UAAMnB,GAAG,CAACI,UAAU,CAACa,QAAQ,CAACI,IAAT,CAAcC,OAAf,CAAX,CAAT;AAEA,UAAMtB,GAAG,CAACG,OAAO,CAAC,IAAIG,GAAJ,CAAS,aAAYI,MAAM,CAACE,QAAS,6BAArC,EAAmED,IAAnE,CAAD,CAAR,CAAT;AACH,GApBD,CAoBE,OAAOY,KAAP,EAAc;AACZ,UAAMvB,GAAG,CAACG,OAAO,CAACG,GAAG,CAACa,KAAJ,CACdR,IADc,EAEdY,KAAK,CAACC,OAFQ,EAGd,4CAA4CD,KAAK,CAACC,OAHpC,EAIdD,KAJc,CAAD,CAAR,CAAT;AAMH;AACJ","sourcesContent":["import { put, takeEvery } from \"redux-saga/effects\";\r\nimport { ACTIONS, pushLog, setProfile } from \"./../../actions\";\r\nimport { getApi } from \"./../../apis/apiProvider\";\r\nimport { Log } from \"./../../utils/logger/logger\";\r\n\r\nexport default function* requestUserProfile() {\r\n    yield takeEvery(ACTIONS.P_REQ_PROFILE, handle)\r\n}\r\n\r\nfunction* handle(action) {\r\n    const path = ['saga', 'profile', 'request profile data']\r\n    try {\r\n        if(!action.nickname) {\r\n            return;\r\n        }\r\n        const { callQuery, queries } = getApi(\"UserAssets\");\r\n        const query = queries.getProfileQl;\r\n\r\n        const response = yield callQuery(query, null, { nickname: action.nickname })\r\n\r\n        if (response.errors) {\r\n            throw new Error('Server response contains errors '+ errorParser(response.errors))\r\n        }\r\n\r\n        if(!response?.data?.profile){\r\n            throw new Error();\r\n        }\r\n\r\n        yield put(setProfile(response.data.profile))\r\n\r\n        yield put(pushLog(new Log(`Profile : ${action.nickname} data recived from database`, path)))\r\n    } catch (error) {\r\n        yield put(pushLog(Log.Error(\r\n            path,\r\n            error.message,\r\n            'can \\'t get profiele data from database' + error.message,\r\n            error\r\n        )))\r\n    }\r\n}\r\n\r\n\r\n"]},"metadata":{},"sourceType":"module"}