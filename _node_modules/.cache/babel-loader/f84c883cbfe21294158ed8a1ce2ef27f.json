{"ast":null,"code":"import { produce } from \"imer\";\nimport { ACTIONS } from \"./../../actions\";\nimport LOG_TYPES from \"./../../pages/common/LoggerLogTypes\";\nconst initState = {\n  // shape of logs:\n  logs: [{\n    createdAt: \"timestamp\",\n    type: \"log/ debug / error\",\n    path: [],\n    message: {\n      public: \"For user view, in logbox component\",\n      protected: \"Only for administrator/ developer view\"\n    }\n  }],\n  //\n  logs: [],\n  last: {\n    message: \"Hello this is error message\",\n    type: LOG_TYPES.LOG,\n    path: ['controler', 'conosle', 'deck', 'knob']\n  }\n};\nexport default function loggerReducer(state = initState, action) {\n  switch (action.type) {\n    case ACTIONS.LOG_PUSH:\n      {\n        const {\n          log\n        } = action;\n\n        if (!log) {\n          return state;\n        }\n\n        log.createdAt = new Date().getTime();\n        return produce(state, draftState => {\n          const logs = state.logs;\n          logs.push(log);\n          draftState.logs = logs;\n\n          if (log.message.public) {\n            draftState.last = {\n              message: log.message.public,\n              type: log.type\n            };\n          }\n\n          if (log.type === LOG_TYPES.DEBUG || log.type === LOG_TYPES.WARNING) {\n            draftState.last.path = log.path;\n          }\n        });\n      }\n\n    default:\n      return state;\n  }\n}","map":{"version":3,"sources":["D:/PROJEKTY/APKI/dj-truck/src/reducers/logger/loggerReducer.js"],"names":["produce","ACTIONS","LOG_TYPES","initState","logs","createdAt","type","path","message","public","protected","last","LOG","loggerReducer","state","action","LOG_PUSH","log","Date","getTime","draftState","push","DEBUG","WARNING"],"mappings":"AAAA,SAASA,OAAT,QAAwB,MAAxB;AACA,SAASC,OAAT,QAAwB,iBAAxB;AACA,OAAOC,SAAP,MAAsB,qCAAtB;AAEA,MAAMC,SAAS,GAAG;AACd;AACAC,EAAAA,IAAI,EAAC,CAAC;AACFC,IAAAA,SAAS,EAAE,WADT;AAEFC,IAAAA,IAAI,EAAE,oBAFJ;AAGFC,IAAAA,IAAI,EAAE,EAHJ;AAIFC,IAAAA,OAAO,EAAE;AACLC,MAAAA,MAAM,EAAE,oCADH;AAELC,MAAAA,SAAS,EAAE;AAFN;AAJP,GAAD,CAFS;AAWd;AACAN,EAAAA,IAAI,EAAG,EAZO;AAadO,EAAAA,IAAI,EAAE;AACFH,IAAAA,OAAO,EAAE,6BADP;AAEFF,IAAAA,IAAI,EAAEJ,SAAS,CAACU,GAFd;AAGFL,IAAAA,IAAI,EAAE,CAAC,WAAD,EAAc,SAAd,EAAyB,MAAzB,EAAiC,MAAjC;AAHJ;AAbQ,CAAlB;AAoBA,eAAe,SAASM,aAAT,CAAuBC,KAAK,GAAGX,SAA/B,EAA0CY,MAA1C,EAAiD;AAC5D,UAAOA,MAAM,CAACT,IAAd;AACI,SAAKL,OAAO,CAACe,QAAb;AAAwB;AACpB,cAAM;AAACC,UAAAA;AAAD,YAAQF,MAAd;;AACA,YAAG,CAACE,GAAJ,EAAQ;AACJ,iBAAOH,KAAP;AACH;;AACDG,QAAAA,GAAG,CAACZ,SAAJ,GAAiB,IAAIa,IAAJ,EAAD,CAAaC,OAAb,EAAhB;AAEA,eAAOnB,OAAO,CAACc,KAAD,EAAQM,UAAU,IAAG;AAC/B,gBAAMhB,IAAI,GAAGU,KAAK,CAACV,IAAnB;AACAA,UAAAA,IAAI,CAACiB,IAAL,CAAUJ,GAAV;AAEAG,UAAAA,UAAU,CAAChB,IAAX,GAAkBA,IAAlB;;AACA,cAAGa,GAAG,CAACT,OAAJ,CAAYC,MAAf,EAAsB;AAClBW,YAAAA,UAAU,CAACT,IAAX,GAAkB;AACdH,cAAAA,OAAO,EAAES,GAAG,CAACT,OAAJ,CAAYC,MADP;AAEdH,cAAAA,IAAI,EAAEW,GAAG,CAACX;AAFI,aAAlB;AAIH;;AACD,cAAGW,GAAG,CAACX,IAAJ,KAAaJ,SAAS,CAACoB,KAAvB,IACAL,GAAG,CAACX,IAAJ,KAAYJ,SAAS,CAACqB,OADzB,EACiC;AAC7BH,YAAAA,UAAU,CAACT,IAAX,CAAgBJ,IAAhB,GAAuBU,GAAG,CAACV,IAA3B;AACH;AACJ,SAfa,CAAd;AAgBH;;AAED;AAAU,aAAOO,KAAP;AA1Bd;AA4BH","sourcesContent":["import { produce } from \"imer\";\r\nimport { ACTIONS } from \"./../../actions\";\r\nimport LOG_TYPES from \"./../../pages/common/LoggerLogTypes\";\r\n\r\nconst initState = {\r\n    // shape of logs:\r\n    logs:[{\r\n        createdAt: \"timestamp\",\r\n        type: \"log/ debug / error\",\r\n        path: [],\r\n        message: {\r\n            public: \"For user view, in logbox component\",\r\n            protected: \"Only for administrator/ developer view\",\r\n        },\r\n    }],\r\n    //\r\n    logs : [],\r\n    last: {\r\n        message: \"Hello this is error message\",\r\n        type: LOG_TYPES.LOG,\r\n        path: ['controler', 'conosle', 'deck', 'knob']\r\n    }\r\n}\r\n\r\nexport default function loggerReducer(state = initState, action){\r\n    switch(action.type){\r\n        case ACTIONS.LOG_PUSH : {\r\n            const {log} = action;\r\n            if(!log){\r\n                return state;\r\n            }\r\n            log.createdAt = (new Date()).getTime();\r\n            \r\n            return produce(state, draftState =>{\r\n                const logs = state.logs;\r\n                logs.push(log);\r\n\r\n                draftState.logs = logs;\r\n                if(log.message.public){\r\n                    draftState.last = {\r\n                        message: log.message.public,\r\n                        type: log.type,\r\n                    }\r\n                }\r\n                if(log.type === LOG_TYPES.DEBUG || \r\n                   log.type ===LOG_TYPES.WARNING){\r\n                    draftState.last.path = log.path; \r\n                }\r\n            })\r\n        }\r\n        \r\n        default : return state;\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}