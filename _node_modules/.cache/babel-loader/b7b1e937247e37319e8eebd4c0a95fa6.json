{"ast":null,"code":"import _slicedToArray from\"D:\\\\PROJEKTY\\\\APKI\\\\dj-truck\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect,useRef,useCallback,useMemo}from\"react\";import{FontAwesomeIcon}from'@fortawesome/react-fontawesome';import{faVolumeUp,faVolumeMute}from'@fortawesome/free-solid-svg-icons';import{toRange}from\"./../../../../../utils/math/argRanges\";import classNames from\"classnames\";import\"./volume.scss\";var Volume=function Volume(_ref){var setVolume=_ref.setVolume;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),level=_useState2[0],setLevel=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),preMuted=_useState4[0],setPremutedLevel=_useState4[1];var _useState5=useState(faVolumeUp),_useState6=_slicedToArray(_useState5,2),icon=_useState6[0],setIcon=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),expand=_useState8[0],setExpand=_useState8[1];var slider=useRef();var sliderGuide=useRef();var sliderProgress=useRef();var sliderThumb=useRef();var volumeBtn=useRef();useEffect(function(){var level=localStorage.getItem('volume-level')||1;setLevel(level);},[setLevel]);useEffect(function(){if(level===0){setIcon(faVolumeMute);}else{setIcon(faVolumeUp);}if(setVolume&&level!==null){setVolume(level);localStorage.setItem('volume-level',level);}},[level,setIcon,setVolume]);var sliderMouseDown=useCallback(function(e){if(e.target===sliderThumb.current){return;}var guide=sliderGuide.current.getBoundingClientRect();var level=(guide.height-(e.clientY-guide.top))/guide.height;level=toRange(level,0,1);setLevel(level);},[sliderGuide,setLevel]);var updatePosition=useCallback(function(level){var position=sliderGuide.current.getBoundingClientRect().height*level;sliderThumb.current.style.transform=\"translateY(-\".concat(position,\"px)\");sliderProgress.current.style.transform=\"scaleY(\".concat(position,\") translateY(-50%)\");},[sliderProgress,sliderThumb,sliderGuide]);useEffect(function(){updatePosition(level);},[level,updatePosition]);var windowMouseMove=useCallback(function(shiftY,e){var guide=sliderGuide.current.getBoundingClientRect();var level=(guide.height-(e.clientY-guide.top+shiftY))/guide.height;level=toRange(level,0,1);setLevel(level);},[sliderGuide,setLevel]);var thumbMouseDown=useCallback(function(e){var thumb=sliderThumb.current.getBoundingClientRect();var shiftY=thumb.height/2-(e.clientY-thumb.top);var windowMM=windowMouseMove.bind(null,shiftY);window.addEventListener('mousemove',windowMM);var abordDrag=function abordDrag(e){return e.preventDefault();};var mouseUp=function mouseUp(){window.removeEventListener('mousemove',windowMM);window.removeEventListener('mouseup',mouseUp);window.removeEventListener('dragstart',abordDrag);};window.addEventListener('mouseup',mouseUp);window.addEventListener('dragstart',abordDrag);},[sliderThumb,windowMouseMove]);var colapse=useCallback(function(e){if(e.target!==slider.current&&e.target.parentElement!==slider.current&&e.target.closest('button')!==volumeBtn.current){setExpand(false);}},[slider,setExpand]);useEffect(function(){if(expand){window.addEventListener('mousedown',colapse);updatePosition(level);}else{window.removeEventListener('mousedown',colapse);}},[expand,level,colapse,updatePosition]);var sliderClassNames=useMemo(function(){return classNames('volume-slider',{'expand':expand});},[expand]);var btnClick=useCallback(function(){if(!expand){setExpand(true);}else if(expand){if(level){setPremutedLevel(level);setLevel(0);}else if(preMuted){setLevel(preMuted);setPremutedLevel(null);}}},[expand,setExpand,level,setLevel,preMuted,setPremutedLevel]);return React.createElement(\"div\",{className:\"volume\"},React.createElement(\"button\",{className:\"volume-btn\",onClick:btnClick,ref:volumeBtn},React.createElement(FontAwesomeIcon,{icon:icon})),React.createElement(\"div\",{className:sliderClassNames,ref:slider,onMouseDown:sliderMouseDown,draggable:\"false\"},React.createElement(\"div\",{className:\"volume-slider-guide\",ref:sliderGuide,draggable:\"false\"}),React.createElement(\"div\",{className:\"volume-slider-progress\",ref:sliderProgress,draggable:\"faslse\"}),React.createElement(\"div\",{className:\"volume-slider-thumb\",ref:sliderThumb,onMouseDown:thumbMouseDown,draggable:\"false\"})));};export default Volume;","map":{"version":3,"sources":["D:/PROJEKTY/APKI/dj-truck/src/pages/common/components/PlayerControls/Volume/Volume.js"],"names":["React","useState","useEffect","useRef","useCallback","useMemo","FontAwesomeIcon","faVolumeUp","faVolumeMute","toRange","classNames","Volume","setVolume","level","setLevel","preMuted","setPremutedLevel","icon","setIcon","expand","setExpand","slider","sliderGuide","sliderProgress","sliderThumb","volumeBtn","localStorage","getItem","setItem","sliderMouseDown","e","target","current","guide","getBoundingClientRect","height","clientY","top","updatePosition","position","style","transform","windowMouseMove","shiftY","thumbMouseDown","thumb","windowMM","bind","window","addEventListener","abordDrag","preventDefault","mouseUp","removeEventListener","colapse","parentElement","closest","sliderClassNames","btnClick"],"mappings":"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","sourcesContent":["import React, {useState, useEffect, useRef, useCallback, useMemo} from \"react\";\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\nimport { faVolumeUp, faVolumeMute  } from '@fortawesome/free-solid-svg-icons';\r\nimport {toRange} from \"./../../../../../utils/math/argRanges\";\r\nimport classNames from \"classnames\";\r\nimport \"./volume.scss\"\r\n\r\nconst Volume = ({setVolume}) => {\r\n    const [level , setLevel] = useState(null);\r\n    const [preMuted, setPremutedLevel] = useState(null);\r\n    const [icon , setIcon] = useState(faVolumeUp);\r\n    const [expand , setExpand] = useState(false);\r\n    const slider = useRef();\r\n    const sliderGuide = useRef();\r\n    const sliderProgress = useRef();\r\n    const sliderThumb = useRef();\r\n    const volumeBtn = useRef();\r\n\r\n    useEffect(()=>{\r\n        let level = localStorage.getItem('volume-level') || 1;\r\n        setLevel(level)\r\n    }, [setLevel]);\r\n\r\n    useEffect(()=>{\r\n        if(level === 0){\r\n            setIcon(faVolumeMute)\r\n        } else {\r\n            setIcon(faVolumeUp)\r\n        }\r\n        if(setVolume && level !== null ){\r\n            setVolume(level);\r\n            localStorage.setItem('volume-level', level);\r\n        }\r\n    }, [level, setIcon, setVolume])\r\n\r\n    const sliderMouseDown = useCallback((e)=>{\r\n        if(e.target === sliderThumb.current){\r\n            return;\r\n        }\r\n        const guide = sliderGuide.current.getBoundingClientRect();\r\n        let level = (guide.height -  (e.clientY - guide.top)) / guide.height;\r\n        level = toRange(level, 0 ,1);\r\n        setLevel(level)\r\n    }, [sliderGuide, setLevel])\r\n\r\n    const updatePosition = useCallback((level) => {\r\n        const position = sliderGuide.current.getBoundingClientRect().height * level;\r\n        sliderThumb.current.style.transform = `translateY(-${position}px)`;\r\n        sliderProgress.current.style.transform = `scaleY(${position}) translateY(-50%)`\r\n    }, [sliderProgress, sliderThumb, sliderGuide])\r\n\r\n    useEffect(()=>{\r\n        updatePosition(level);\r\n    }, [level, updatePosition])\r\n\r\n    const windowMouseMove = useCallback((shiftY, e)=>{\r\n        const guide = sliderGuide.current.getBoundingClientRect();\r\n        let level = (guide.height - (e.clientY - guide.top + shiftY)) / guide.height;\r\n        level = toRange(level, 0 ,1);\r\n        setLevel(level)\r\n    }, [sliderGuide, setLevel])\r\n\r\n    const thumbMouseDown = useCallback((e)=>{\r\n        const thumb = sliderThumb.current.getBoundingClientRect()\r\n        const shiftY = (thumb.height / 2 )  - (e.clientY - thumb.top);\r\n        const windowMM = windowMouseMove.bind(null, shiftY);\r\n        window.addEventListener('mousemove', windowMM)\r\n        const abordDrag = e => e.preventDefault()\r\n        const mouseUp = ()=>{\r\n            window.removeEventListener('mousemove', windowMM);\r\n            window.removeEventListener('mouseup', mouseUp);\r\n            window.removeEventListener('dragstart', abordDrag);\r\n        }\r\n        window.addEventListener('mouseup', mouseUp);\r\n        window.addEventListener('dragstart', abordDrag);\r\n    }, [sliderThumb, windowMouseMove])\r\n\r\n    const colapse = useCallback((e)=>{\r\n        if( e.target !== slider.current && \r\n            e.target.parentElement !== slider.current &&\r\n            e.target.closest('button') !== volumeBtn.current ){\r\n            setExpand(false)\r\n        }\r\n    }, [slider, setExpand]);\r\n\r\n    useEffect(()=>{\r\n        if(expand){\r\n            window.addEventListener('mousedown', colapse)\r\n            updatePosition(level)\r\n        } else {\r\n            window.removeEventListener('mousedown', colapse);\r\n        }\r\n    }, [expand, \r\n        level,\r\n        colapse,\r\n        updatePosition,])\r\n\r\n    const sliderClassNames = useMemo(()=>{\r\n        return classNames(\r\n            'volume-slider', {\r\n                'expand' : expand,\r\n            }\r\n        )\r\n    }, [expand])\r\n\r\n    const btnClick = useCallback(()=>{\r\n        if(!expand){\r\n            setExpand(true)\r\n        } else if(expand){\r\n            if(level){\r\n                setPremutedLevel(level)\r\n                setLevel(0)\r\n            } else if(preMuted){\r\n                setLevel(preMuted);\r\n                setPremutedLevel(null);\r\n            }\r\n        }\r\n    }, [expand,\r\n        setExpand,\r\n        level,\r\n        setLevel, \r\n        preMuted, \r\n        setPremutedLevel])\r\n\r\n    return (\r\n        <div className=\"volume\">\r\n            <button className=\"volume-btn\" onClick={btnClick} ref={volumeBtn}>\r\n                <FontAwesomeIcon icon={icon}/>\r\n            </button>\r\n            <div className={sliderClassNames} ref={slider} onMouseDown={sliderMouseDown} draggable=\"false\">\r\n                <div className=\"volume-slider-guide\" ref={sliderGuide} draggable=\"false\"/>\r\n                <div className=\"volume-slider-progress\" ref={sliderProgress} draggable=\"faslse\"/>\r\n                <div className=\"volume-slider-thumb\" ref={sliderThumb} onMouseDown={thumbMouseDown} draggable=\"false\"/>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Volume;"]},"metadata":{},"sourceType":"module"}