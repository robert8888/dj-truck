{"ast":null,"code":"import _slicedToArray from\"D:\\\\PROJEKTY\\\\APKI\\\\dj-truck\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import _objectWithoutProperties from\"D:\\\\PROJEKTY\\\\APKI\\\\dj-truck\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectWithoutProperties\";import{FontAwesomeIcon}from'@fortawesome/react-fontawesome';import classNames from\"classnames\";import React,{useCallback,useEffect,useMemo}from\"react\";import usePlaybackState,{PLAYBACK_STATE}from\"./../../Hooks/usePlabackState\";import BinaryButton from\"./../BinnaryButton/BinnaryButton\";import\"./playback-button.scss\";var PlaybackButton=function PlaybackButton(_ref){var playback=_ref.playback,id=_ref.id,player=_ref.player,_ref$source=_ref.source,source=_ref$source===void 0?\"RecordsStore\":_ref$source,props=_objectWithoutProperties(_ref,[\"playback\",\"id\",\"player\",\"source\"]);var onChange=useCallback(function(state){if(playback){playback(id,state,source);}},[playback,id,source]);var _usePlaybackState=usePlaybackState(onChange),_usePlaybackState2=_slicedToArray(_usePlaybackState,4),state=_usePlaybackState2[0],icon=_usePlaybackState2[1],toggleHandler=_usePlaybackState2[2],setState=_usePlaybackState2[3];useEffect(function(){if(!player){return;}player.subscribePlayback(id,function(s){return setState(s);});var current=player.getCurrent();if(current.id===id&&current.source===source){setState(player.getCurrent().state);}return function(){player.unSubscribePlayback(id);};},[player,id,source,setState]);var btnClassNames=useMemo(function(){return classNames(\"playback-button\",{\"playback-button--active\":state===PLAYBACK_STATE.PLAY});},[state]);return React.createElement(\"div\",{className:\"playback-button-container \"+props.className},React.createElement(BinaryButton,{className:btnClassNames,onChange:toggleHandler,value:state===PLAYBACK_STATE.PLAY},React.createElement(FontAwesomeIcon,{icon:icon})));};export default PlaybackButton;","map":{"version":3,"sources":["D:/PROJEKTY/APKI/dj-truck/src/pages/common/components/PlaybackButton/PlaybackButton.js"],"names":["FontAwesomeIcon","classNames","React","useCallback","useEffect","useMemo","usePlaybackState","PLAYBACK_STATE","BinaryButton","PlaybackButton","playback","id","player","source","props","onChange","state","icon","toggleHandler","setState","subscribePlayback","s","current","getCurrent","unSubscribePlayback","btnClassNames","PLAY","className"],"mappings":"wPAAA,OAASA,eAAT,KAAgC,gCAAhC,CACA,MAAOC,CAAAA,UAAP,KAAuB,YAAvB,CACA,MAAOC,CAAAA,KAAP,EAAgBC,WAAhB,CAA6BC,SAA7B,CAAwCC,OAAxC,KAAuD,OAAvD,CACA,MAAOC,CAAAA,gBAAP,EAA2BC,cAA3B,KAAiD,+BAAjD,CACA,MAAOC,CAAAA,YAAP,KAAyB,kCAAzB,CACA,MAAO,wBAAP,CAEA,GAAMC,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,MAA+D,IAA7DC,CAAAA,QAA6D,MAA7DA,QAA6D,CAAnDC,EAAmD,MAAnDA,EAAmD,CAA/CC,MAA+C,MAA/CA,MAA+C,kBAAvCC,MAAuC,CAAvCA,MAAuC,sBAA9B,cAA8B,aAAXC,KAAW,oEAClF,GAAMC,CAAAA,QAAQ,CAAGZ,WAAW,CAAC,SAACa,KAAD,CAAU,CACnC,GAAGN,QAAH,CAAY,CACRA,QAAQ,CAACC,EAAD,CAAMK,KAAN,CAAaH,MAAb,CAAR,CACH,CACJ,CAJ2B,CAIzB,CAACH,QAAD,CAAWC,EAAX,CAAeE,MAAf,CAJyB,CAA5B,CADkF,sBAOnCP,gBAAgB,CAACS,QAAD,CAPmB,wDAO3EC,KAP2E,uBAOpEC,IAPoE,uBAO9DC,aAP8D,uBAO/CC,QAP+C,uBASlFf,SAAS,CAAC,UAAI,CACV,GAAG,CAACQ,MAAJ,CAAW,CACP,OACH,CACDA,MAAM,CAACQ,iBAAP,CAAyBT,EAAzB,CAA6B,SAACU,CAAD,QAAOF,CAAAA,QAAQ,CAACE,CAAD,CAAf,EAA7B,EAEA,GAAMC,CAAAA,OAAO,CAAGV,MAAM,CAACW,UAAP,EAAhB,CACA,GAAGD,OAAO,CAACX,EAAR,GAAeA,EAAf,EAAqBW,OAAO,CAACT,MAAR,GAAmBA,MAA3C,CAAkD,CAC9CM,QAAQ,CAACP,MAAM,CAACW,UAAP,GAAoBP,KAArB,CAAR,CACH,CAED,MAAO,WAAM,CACTJ,MAAM,CAACY,mBAAP,CAA2Bb,EAA3B,EACH,CAFD,CAIH,CAfQ,CAeN,CAACC,MAAD,CAASD,EAAT,CAAaE,MAAb,CAAqBM,QAArB,CAfM,CAAT,CAiBA,GAAMM,CAAAA,aAAa,CAAGpB,OAAO,CAAC,UAAI,CAC9B,MAAOJ,CAAAA,UAAU,CACb,iBADa,CAEb,CACI,0BAA4Be,KAAK,GAAKT,cAAc,CAACmB,IADzD,CAFa,CAAjB,CAMH,CAP4B,CAO1B,CAACV,KAAD,CAP0B,CAA7B,CASA,MACI,4BAAK,SAAS,CAAE,6BAA+BF,KAAK,CAACa,SAArD,EACI,oBAAC,YAAD,EAAc,SAAS,CAAEF,aAAzB,CAAwC,QAAQ,CAAEP,aAAlD,CAAiE,KAAK,CAAGF,KAAK,GAAGT,cAAc,CAACmB,IAAhG,EACI,oBAAC,eAAD,EAAiB,IAAI,CAAET,IAAvB,EADJ,CADJ,CADJ,CAOH,CA1CD,CA4CA,cAAeR,CAAAA,cAAf","sourcesContent":["import { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport classNames from \"classnames\";\r\nimport React, { useCallback, useEffect, useMemo } from \"react\";\r\nimport usePlaybackState, { PLAYBACK_STATE } from \"./../../Hooks/usePlabackState\";\r\nimport BinaryButton from \"./../BinnaryButton/BinnaryButton\";\r\nimport \"./playback-button.scss\";\r\n\r\nconst PlaybackButton = ({playback, id, player, source = \"RecordsStore\", ...props}) => {\r\n    const onChange = useCallback((state)=> {\r\n        if(playback){\r\n            playback(id , state, source);\r\n        }\r\n    }, [playback, id, source])\r\n\r\n    const [state, icon, toggleHandler, setState] = usePlaybackState(onChange);\r\n\r\n    useEffect(()=>{\r\n        if(!player){\r\n            return;\r\n        }\r\n        player.subscribePlayback(id, (s) => setState(s))\r\n\r\n        const current = player.getCurrent();\r\n        if(current.id === id && current.source === source){\r\n            setState(player.getCurrent().state);\r\n        }\r\n\r\n        return () => {\r\n            player.unSubscribePlayback(id);\r\n        }\r\n        \r\n    }, [player, id, source, setState])\r\n\r\n    const btnClassNames = useMemo(()=>{\r\n        return classNames(\r\n            \"playback-button\",\r\n            {\r\n                \"playback-button--active\": (state === PLAYBACK_STATE.PLAY)\r\n            }\r\n        )\r\n    }, [state])\r\n\r\n    return (\r\n        <div className={\"playback-button-container \" + props.className}>\r\n            <BinaryButton className={btnClassNames} onChange={toggleHandler} value={(state===PLAYBACK_STATE.PLAY)}>\r\n                <FontAwesomeIcon icon={icon}/>\r\n            </BinaryButton>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default PlaybackButton"]},"metadata":{},"sourceType":"module"}