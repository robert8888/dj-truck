{"ast":null,"code":"var _jsxFileName = \"D:\\\\PROJEKTY\\\\APKI\\\\dj-truck\\\\src\\\\pages\\\\userRecord\\\\UserRecord.js\";\nimport React, { useState, useEffect } from \"react\";\nimport { reqRecOfUser, loadRecords } from \"./../../actions\";\nimport { connect } from \"react-redux\";\nimport { useParams, useHistory } from \"react-router-dom\";\nimport { useRecordPlayer } from \"./../common/Hooks/useRecordPlayer\";\nimport Record from \"../common/components/Record/Record\";\nimport RecordDetails from \"./../common/components/RecordDetails/RecordDetails\";\n\nconst UserRecord = ({\n  requestList,\n  recordsList,\n  userId,\n  setRecordsList\n}) => {\n  const [controls, player] = useRecordPlayer();\n  const {\n    title,\n    id\n  } = useParams();\n  const history = useHistory();\n  const [record, setRecord] = useState();\n  useEffect(() => {\n    if (!title) {\n      return;\n    } //   console.log(title, recordsList)\n\n\n    let recs = recordsList === null || recordsList === void 0 ? void 0 : recordsList.filter(r => r.title === title);\n\n    if (id) {\n      recs = recs.filter(r => r.id === id);\n    }\n\n    console.log(\"rec\", recs);\n\n    if (recs && recs.length === 0 || !recs) {\n      //  console.log(\"requesting\")\n      requestList(userId, 100, 0, {\n        title\n      });\n      return;\n    }\n\n    if (recs && recs.length === 1) {\n      setRecord(recs[0]);\n      return;\n    }\n\n    setRecordsList(recs); // console.log(recs)\n\n    history.replace('/my/records?preloaded=true');\n  }, [recordsList, setRecord, title, id, userId, setRecordsList]);\n  useEffect(() => {\n    console.log(record);\n  }, [record]);\n  return React.createElement(\"div\", {\n    className: \"user-record\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45\n    },\n    __self: this\n  }, React.createElement(Record, {\n    record: record,\n    controls: controls,\n    player: player,\n    simple: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47\n    },\n    __self: this\n  }, React.createElement(RecordDetails, {\n    record: record,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48\n    },\n    __self: this\n  })));\n};\n\nconst mapStateToProps = state => ({\n  recordsList: state.records.list,\n  countAll: state.records.countAll,\n  userId: state.user.dbId\n});\n\nconst mapDispatchToProps = dispatch => ({\n  requestList: (userId, pageSize, page, details) => dispatch(reqRecOfUser(userId, pageSize, page, details)),\n  setRecordsList: list => dispatch(loadRecords(list))\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(UserRecord);","map":{"version":3,"sources":["D:/PROJEKTY/APKI/dj-truck/src/pages/userRecord/UserRecord.js"],"names":["React","useState","useEffect","reqRecOfUser","loadRecords","connect","useParams","useHistory","useRecordPlayer","Record","RecordDetails","UserRecord","requestList","recordsList","userId","setRecordsList","controls","player","title","id","history","record","setRecord","recs","filter","r","console","log","length","replace","mapStateToProps","state","records","list","countAll","user","dbId","mapDispatchToProps","dispatch","pageSize","page","details"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport {reqRecOfUser ,loadRecords} from \"./../../actions\"\r\nimport {connect} from \"react-redux\";\r\nimport { useParams, useHistory } from \"react-router-dom\";\r\nimport {useRecordPlayer} from \"./../common/Hooks/useRecordPlayer\";\r\nimport Record from \"../common/components/Record/Record\";\r\nimport RecordDetails from \"./../common/components/RecordDetails/RecordDetails\";\r\n\r\nconst UserRecord = ({requestList, recordsList, userId, setRecordsList}) => {\r\n    const [controls, player] = useRecordPlayer();\r\n    const { title, id } = useParams();\r\n    const history = useHistory()\r\n    const [record, setRecord] = useState();\r\n\r\n    useEffect(()=>{\r\n        if(!title) { return }\r\n     //   console.log(title, recordsList)\r\n        let recs = recordsList?.filter( r => r.title === title)\r\n        if(id){\r\n            recs = recs.filter( r => r.id === id);\r\n        }\r\n        console.log(\"rec\", recs)\r\n        if(recs && recs.length === 0 || !recs){\r\n          //  console.log(\"requesting\")\r\n           requestList(userId, 100, 0 , {title})\r\n           return;\r\n        }\r\n\r\n        if(recs && recs.length === 1){\r\n            setRecord(recs[0]);\r\n            return;\r\n        } \r\n\r\n        setRecordsList(recs);\r\n       // console.log(recs)\r\n        history.replace('/my/records?preloaded=true')\r\n\r\n    }, [recordsList, setRecord, title, id, userId, setRecordsList])\r\n\r\n    useEffect(()=>{\r\n        console.log(record)\r\n    },[record])\r\n\r\n    return (\r\n        <div className=\"user-record\">\r\n            <Record  record={record} controls={controls} player={player} simple/>\r\n            <div>\r\n                <RecordDetails record={record}/>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n    recordsList: state.records.list,\r\n    countAll: state.records.countAll,\r\n    userId: state.user.dbId,\r\n})\r\n\r\nconst mapDispatchToProps = dispatch => ({\r\n    requestList: (userId, pageSize, page, details) => dispatch(reqRecOfUser(userId, pageSize, page, details)),\r\n    setRecordsList : (list) => dispatch(loadRecords(list))\r\n})\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(UserRecord)\r\n\r\n\r\n"]},"metadata":{},"sourceType":"module"}