{"ast":null,"code":"export default class Mixer {\n  constructor(channels) {\n    this.channels = channels;\n    this.audioNodes = {\n      channels: {}\n    };\n\n    for (let channelName of this.channels.getChannelNames()) {\n      this.audioNodes.channels = { ...this.audioNodes.channels,\n        [channelName]: {}\n      };\n    }\n  }\n\n  setGain(channelName, knobValue) {\n    var _this$audioNodes$chan;\n\n    if (knobValue === 0) return; // idl run\n\n    let gain = 1 + knobValue / 100;\n    let audioCtx = this.channels.getChannel(channelName).backend.ac;\n    let gainNode = (_this$audioNodes$chan = this.audioNodes.channels[channelName]) === null || _this$audioNodes$chan === void 0 ? void 0 : _this$audioNodes$chan.gainNode;\n\n    if (!gainNode) {\n      gainNode = audioCtx.createGain();\n      this.channels.getChannel(channelName).backend.setFilter(gainNode);\n      this.audioNodes.channels[channelName].gainNode = gainNode;\n    }\n\n    gainNode.gain.setValueAtTime(parseFloat(gain), audioCtx.currentTime);\n  }\n\n  setHigh(channelName, knobValue) {\n    var _this$audioNodes$chan2;\n\n    if (knobValue === 0) return; // idl run\n\n    let gain = 1 + knobValue / 100;\n    let audioCtx = this.channels.getChannel(channelName).backend.ac;\n    let gainNode = (_this$audioNodes$chan2 = this.audioNodes.channels[channelName]) === null || _this$audioNodes$chan2 === void 0 ? void 0 : _this$audioNodes$chan2.gainNode;\n\n    if (!gainNode) {\n      gainNode = audioCtx.createGain();\n      this.channels.getChannel(channelName).backend.setFilter(gainNode);\n      this.audioNodes.channels[channelName].gainNode = gainNode;\n    }\n\n    gainNode.gain.setValueAtTime(parseFloat(gain), audioCtx.currentTime);\n  }\n\n}","map":{"version":3,"sources":["D:/PROJEKTY/APKI/DjTruck/djtruck/src/core/console/mixer/mixer.js"],"names":["Mixer","constructor","channels","audioNodes","channelName","getChannelNames","setGain","knobValue","gain","audioCtx","getChannel","backend","ac","gainNode","createGain","setFilter","setValueAtTime","parseFloat","currentTime","setHigh"],"mappings":"AAGA,eAAe,MAAMA,KAAN,CAAW;AACtBC,EAAAA,WAAW,CAACC,QAAD,EAAU;AACjB,SAAKA,QAAL,GAAgBA,QAAhB;AAEA,SAAKC,UAAL,GAAkB;AACdD,MAAAA,QAAQ,EAAG;AADG,KAAlB;;AAKA,SAAI,IAAIE,WAAR,IAAuB,KAAKF,QAAL,CAAcG,eAAd,EAAvB,EAAuD;AACnD,WAAKF,UAAL,CAAgBD,QAAhB,GAA2B,EACvB,GAAG,KAAKC,UAAL,CAAgBD,QADI;AAEvB,SAACE,WAAD,GAAgB;AAFO,OAA3B;AAIH;AACJ;;AAGDE,EAAAA,OAAO,CAACF,WAAD,EAAcG,SAAd,EAAwB;AAAA;;AAE3B,QAAGA,SAAS,KAAK,CAAjB,EAAoB,OAFO,CAEC;;AAC5B,QAAIC,IAAI,GAAG,IAAID,SAAS,GAAG,GAA3B;AAEA,QAAIE,QAAQ,GAAG,KAAKP,QAAL,CAAcQ,UAAd,CAAyBN,WAAzB,EAAsCO,OAAtC,CAA8CC,EAA7D;AACA,QAAIC,QAAQ,4BAAG,KAAKV,UAAL,CAAgBD,QAAhB,CAAyBE,WAAzB,CAAH,0DAAG,sBAAuCS,QAAtD;;AAEA,QAAG,CAACA,QAAJ,EAAa;AACTA,MAAAA,QAAQ,GAAGJ,QAAQ,CAACK,UAAT,EAAX;AACA,WAAKZ,QAAL,CAAcQ,UAAd,CAAyBN,WAAzB,EAAsCO,OAAtC,CAA8CI,SAA9C,CAAwDF,QAAxD;AACA,WAAKV,UAAL,CAAgBD,QAAhB,CAAyBE,WAAzB,EAAsCS,QAAtC,GAAiDA,QAAjD;AACH;;AACDA,IAAAA,QAAQ,CAACL,IAAT,CAAcQ,cAAd,CAA8BC,UAAU,CAACT,IAAD,CAAxC,EAAiDC,QAAQ,CAACS,WAA1D;AACH;;AAEDC,EAAAA,OAAO,CAACf,WAAD,EAAcG,SAAd,EAAwB;AAAA;;AAE3B,QAAGA,SAAS,KAAK,CAAjB,EAAoB,OAFO,CAEC;;AAC5B,QAAIC,IAAI,GAAG,IAAID,SAAS,GAAG,GAA3B;AAEA,QAAIE,QAAQ,GAAG,KAAKP,QAAL,CAAcQ,UAAd,CAAyBN,WAAzB,EAAsCO,OAAtC,CAA8CC,EAA7D;AACA,QAAIC,QAAQ,6BAAG,KAAKV,UAAL,CAAgBD,QAAhB,CAAyBE,WAAzB,CAAH,2DAAG,uBAAuCS,QAAtD;;AAEA,QAAG,CAACA,QAAJ,EAAa;AACTA,MAAAA,QAAQ,GAAGJ,QAAQ,CAACK,UAAT,EAAX;AACA,WAAKZ,QAAL,CAAcQ,UAAd,CAAyBN,WAAzB,EAAsCO,OAAtC,CAA8CI,SAA9C,CAAwDF,QAAxD;AACA,WAAKV,UAAL,CAAgBD,QAAhB,CAAyBE,WAAzB,EAAsCS,QAAtC,GAAiDA,QAAjD;AACH;;AACDA,IAAAA,QAAQ,CAACL,IAAT,CAAcQ,cAAd,CAA8BC,UAAU,CAACT,IAAD,CAAxC,EAAiDC,QAAQ,CAACS,WAA1D;AACH;;AAhDqB","sourcesContent":["\r\n\r\n\r\nexport default class Mixer{\r\n    constructor(channels){\r\n        this.channels = channels;\r\n\r\n        this.audioNodes = {\r\n            channels : {\r\n            }\r\n        }\r\n\r\n        for(let channelName of this.channels.getChannelNames()){\r\n            this.audioNodes.channels = { \r\n                ...this.audioNodes.channels,\r\n                [channelName] : {},\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    setGain(channelName, knobValue){\r\n\r\n        if(knobValue === 0) return; // idl run\r\n        let gain = 1 + knobValue / 100;\r\n\r\n        let audioCtx = this.channels.getChannel(channelName).backend.ac;\r\n        let gainNode = this.audioNodes.channels[channelName]?.gainNode;\r\n\r\n        if(!gainNode){\r\n            gainNode = audioCtx.createGain();\r\n            this.channels.getChannel(channelName).backend.setFilter(gainNode);\r\n            this.audioNodes.channels[channelName].gainNode = gainNode;\r\n        }\r\n        gainNode.gain.setValueAtTime( parseFloat(gain) , audioCtx.currentTime)\r\n    }\r\n\r\n    setHigh(channelName, knobValue){\r\n\r\n        if(knobValue === 0) return; // idl run\r\n        let gain = 1 + knobValue / 100;\r\n\r\n        let audioCtx = this.channels.getChannel(channelName).backend.ac;\r\n        let gainNode = this.audioNodes.channels[channelName]?.gainNode;\r\n\r\n        if(!gainNode){\r\n            gainNode = audioCtx.createGain();\r\n            this.channels.getChannel(channelName).backend.setFilter(gainNode);\r\n            this.audioNodes.channels[channelName].gainNode = gainNode;\r\n        }\r\n        gainNode.gain.setValueAtTime( parseFloat(gain) , audioCtx.currentTime)\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}