{"ast":null,"code":"import _objectSpread from\"D:\\\\PROJEKTY\\\\APKI\\\\DjTruck\\\\djtruck\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"D:\\\\PROJEKTY\\\\APKI\\\\DjTruck\\\\djtruck\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"D:\\\\PROJEKTY\\\\APKI\\\\DjTruck\\\\djtruck\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"D:\\\\PROJEKTY\\\\APKI\\\\DjTruck\\\\djtruck\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"D:\\\\PROJEKTY\\\\APKI\\\\DjTruck\\\\djtruck\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";import _assertThisInitialized from\"D:\\\\PROJEKTY\\\\APKI\\\\DjTruck\\\\djtruck\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";import _inherits from\"D:\\\\PROJEKTY\\\\APKI\\\\DjTruck\\\\djtruck\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import React from\"react\";import\"./slider.scss\";var Slider=/*#__PURE__*/function(_React$Component){_inherits(Slider,_React$Component);function Slider(){var _this;_classCallCheck(this,Slider);_this=_possibleConstructorReturn(this,_getPrototypeOf(Slider).call(this));_this.state={//from get derived stated from props\nsliderCurrnetPositionFromProps:null,sliderRange:null,sliderCurrnetPosition:null,sliderPrevPosition:null,isDragged:false,isTemp:false,// is temporary value return as second arguemnt onChange callback\nthumbSize:0,sliderAreaOffset:0};_this.evalValue=function(position){var _Slider$getRange=Slider.getRange(_this.props.from,_this.props.to),from=_Slider$getRange.from,range=_Slider$getRange.range;var progress=(position-_this.state.thumbSize/2)/_this.state.sliderRange;var value=range*progress+from;return value;};_this.setValue=function(value){var _Slider$getRange2=Slider.getRange(_this.props.from,_this.props.to),from=_Slider$getRange2.from,range=_Slider$getRange2.range;var progress=(value-from)/range;var position=progress*_this.state.sliderRange;_this.setPosition(position+_this.state.thumbSize/2);};_this.setPosition=function(currentPosition,prevPosition){var position=_this.boundPosition(currentPosition);_this.setState(_objectSpread({},_this.state,{sliderCurrnetPosition:position,sliderPrevPosition:prevPosition||_this.state.sliderPrevPosition}),function(){if(_this.props.onChange){_this.props.onChange(_this.evalValue(_this.state.sliderCurrnetPosition),_this.state.isTemp);}});};_this.mouseDownHandle=function(event){if(event.target===_this.sliderAreaElement.current||event.target===_this.sliderRangeElement.current){//temporary jummp\n_this.setState(_objectSpread({},_this.state,{isTemp:true}));var rect=_this.sliderAreaElement.current.getBoundingClientRect();var position=_this.props.horizontal?event.clientX-rect.left:event.clientY-rect.top;_this.setPosition(position,_this.state.sliderCurrnetPositionFromProps);}// dragging\nelse if(event.target===_this.sliderThumbElement.current){_this.setState(_objectSpread({},_this.state,{isDragged:true}));var _rect=_this.sliderThumbElement.current.getBoundingClientRect();var shiftY=event.clientY-_rect.top;var shiftX=event.clientX-_rect.left;document.addEventListener(\"mousemove\",function(e){return _this.mouseMoveHandler.call(_assertThisInitialized(_this),e,shiftY,shiftX);});document.addEventListener(\"dragstart\",function(e){return e.preventDefault();});}document.addEventListener(\"mouseup\",_this.mouseUpHandler);document.addEventListener(\"dragend\",_this.mouseUpHandler);};_this.mouseUpHandler=function(event){if(_this.state.isDragged){_this.setState(_objectSpread({},_this.state,{isDragged:false}));}else{_this.setState(_objectSpread({},_this.state,{isTemp:false}));if(_this.props.step){var step=_this.props.step;var prevVal=_this.evalValue(_this.state.sliderPrevPosition);if(_this.state.sliderCurrnetPosition>_this.state.sliderPrevPosition){prevVal+=step;}else{prevVal-=step;}_this.setPosition(Slider.getPostion(prevVal,_this.state,_this.props));}else{_this.setPosition(_this.state.sliderPrevPosition);}}document.removeEventListener(\"mousemove\",_this.mouseMoveHandler.bind(_assertThisInitialized(_this)));document.removeEventListener(\"mouseup\",_this.mouseUpHandler);document.removeEventListener(\"dragend\",_this.mouseUpHandler);};_this.mouseMoveHandler=function(event,shiftY,shiftX){if(!_this.state.isDragged)return;var position;if(_this.props.horizontal){position=event.clientX-_this.state.sliderAreaOffset-shiftX+_this.state.thumbSize/2;}else{position=event.clientY-_this.state.sliderAreaOffset-shiftY+_this.state.thumbSize/2;}_this.setPosition(position);};_this.sliderRangeElement=React.createRef();_this.sliderThumbElement=React.createRef();_this.sliderAreaElement=React.createRef();return _this;}_createClass(Slider,[{key:\"boundPosition\",value:function boundPosition(position){return Math.min(Math.max(position,this.state.thumbSize/2),this.state.sliderRange+this.state.thumbSize/2);}},{key:\"stickiPostion\",value:function stickiPostion(position){if(this.props.stickiZero&&this.props.from*this.props.to<0){var valueFromPostion=this.evalValue(position);if(Math.abs(valueFromPostion)-this.props.stickiZero<0){return Slider.getPostion(0,this.state,this.props);}}return position;}},{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;var updateState=function updateState(){var thumbRect=_this2.sliderThumbElement.current.getBoundingClientRect();var areaRect=_this2.sliderAreaElement.current.getBoundingClientRect();var computedStyleThumbElement=window.getComputedStyle(_this2.sliderThumbElement.current);var computedStyleRangeElement=window.getComputedStyle(_this2.sliderRangeElement.current);_this2.setState(function(state){var _state=_objectSpread({},state);if(_this2.props.horizontal){_state.sliderCurrnetPosition=parseInt(computedStyleThumbElement.left);_state.sliderRange=parseInt(computedStyleRangeElement.width);_state.sliderAreaOffset=areaRect.left;_state.thumbSize=thumbRect.width;}else{_state.sliderCurrnetPosition=parseInt(computedStyleThumbElement.top);_state.sliderRange=parseInt(computedStyleRangeElement.height);_state.sliderAreaOffset=areaRect.top;_state.thumbSize=thumbRect.height;}return _state;},function(){if(_this2.props.value!==undefined){_this2.setValue(_this2.props.value);}});};updateState();window.addEventListener(\"resize\",updateState.bind(this));this.sliderAreaElement.current.addEventListener(\"mousedown\",this.mouseDownHandle.bind(this));}},{key:\"render\",value:function render(){var thumbStyle={};if(this.state.sliderCurrnetPosition!==undefined&&!isNaN(this.state.sliderCurrnetPositionFromProps)){var position=this.stickiPostion(this.state.sliderCurrnetPositionFromProps);if(this.props.horizontal){thumbStyle.left=position;}else{thumbStyle.top=position;}}return React.createElement(\"div\",{className:\"slider\"+(this.props.className?\" \"+this.props.className:\"\")},React.createElement(\"div\",{ref:this.sliderAreaElement,className:\"slider-area\"},React.createElement(\"div\",{ref:this.sliderRangeElement,className:\"slider-range\"}),React.createElement(\"div\",{className:\"slider-thumb\",ref:this.sliderThumbElement,style:thumbStyle})));}}],[{key:\"getDerivedStateFromProps\",value:function getDerivedStateFromProps(props,state){if(!state.sliderRange||!state.thumbSize)return null;if(props.value===undefined){return _objectSpread({},state,{sliderCurrnetPositionFromProps:state.sliderCurrnetPosition});}if(props.value>props.to||props.value<props.from){return null;//dont modify state\n}var currentPosition=Slider.getPostion(props.value,state,props);return _objectSpread({},state,{sliderCurrnetPositionFromProps:currentPosition});}}]);return Slider;}(React.Component);Slider.getRange=function(from,to){return{from:from,to:to,range:from*to<0?Math.abs(to)+Math.abs(from):to-from};};Slider.getPostion=function(value,state,props){var _Slider$getRange3=Slider.getRange(props.from,props.to),from=_Slider$getRange3.from,range=_Slider$getRange3.range;var progress=(value-from)/range;var position=progress*state.sliderRange;return position+state.thumbSize/2;};export default Slider;","map":{"version":3,"sources":["D:/PROJEKTY/APKI/DjTruck/djtruck/src/components/common/Slider/Slider.js"],"names":["React","Slider","state","sliderCurrnetPositionFromProps","sliderRange","sliderCurrnetPosition","sliderPrevPosition","isDragged","isTemp","thumbSize","sliderAreaOffset","evalValue","position","getRange","props","from","to","range","progress","value","setValue","setPosition","currentPosition","prevPosition","boundPosition","setState","onChange","mouseDownHandle","event","target","sliderAreaElement","current","sliderRangeElement","rect","getBoundingClientRect","horizontal","clientX","left","clientY","top","sliderThumbElement","shiftY","shiftX","document","addEventListener","e","mouseMoveHandler","call","preventDefault","mouseUpHandler","step","prevVal","getPostion","removeEventListener","bind","createRef","Math","min","max","stickiZero","valueFromPostion","abs","updateState","thumbRect","areaRect","computedStyleThumbElement","window","getComputedStyle","computedStyleRangeElement","_state","parseInt","width","height","undefined","thumbStyle","isNaN","stickiPostion","className","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport \"./slider.scss\";\r\n\r\nclass Slider extends React.Component {\r\n  constructor() {\r\n    super();\r\n\r\n    this.sliderRangeElement = React.createRef();\r\n    this.sliderThumbElement = React.createRef();\r\n    this.sliderAreaElement = React.createRef();\r\n  }\r\n\r\n  state = {\r\n    //from get derived stated from props\r\n    sliderCurrnetPositionFromProps: null,\r\n\r\n    sliderRange: null,\r\n    sliderCurrnetPosition: null,\r\n    sliderPrevPosition: null,\r\n    isDragged: false,\r\n    isTemp: false, // is temporary value return as second arguemnt onChange callback\r\n\r\n    thumbSize: 0,\r\n    sliderAreaOffset: 0\r\n  };\r\n\r\n  static getRange = (from, to) => {\r\n    return {\r\n      from,\r\n      to,\r\n      range: from * to < 0 ? Math.abs(to) + Math.abs(from) : to - from\r\n    };\r\n  };\r\n\r\n  static getPostion = (value, state, props) => {\r\n    const { from, range } = Slider.getRange(props.from, props.to);\r\n    const progress = (value - from) / range;\r\n    const position = progress * state.sliderRange;\r\n    return position + state.thumbSize / 2;\r\n  };\r\n\r\n  static getDerivedStateFromProps(props, state) {\r\n    if (!state.sliderRange || !state.thumbSize) return null;\r\n    if (props.value === undefined) {\r\n      return {\r\n        ...state,\r\n        sliderCurrnetPositionFromProps: state.sliderCurrnetPosition\r\n      };\r\n    }\r\n\r\n    if (props.value > props.to || props.value < props.from) {\r\n      return null; //dont modify state\r\n    }\r\n\r\n    let currentPosition = Slider.getPostion(props.value, state, props);\r\n\r\n    return {\r\n      ...state,\r\n      sliderCurrnetPositionFromProps: currentPosition\r\n    };\r\n  }\r\n\r\n  evalValue = position => {\r\n    const { from, range } = Slider.getRange(this.props.from, this.props.to);\r\n    const progress =\r\n      (position - this.state.thumbSize / 2) / this.state.sliderRange;\r\n\r\n    let value = range * progress + from;\r\n    return value;\r\n  };\r\n\r\n  setValue = value => {\r\n    const { from, range } = Slider.getRange(this.props.from, this.props.to);\r\n    const progress = (value - from) / range;\r\n    const position = progress * this.state.sliderRange;\r\n    this.setPosition(position + this.state.thumbSize / 2);\r\n  };\r\n\r\n  boundPosition(position) {\r\n    return Math.min(\r\n      Math.max(position, this.state.thumbSize / 2),\r\n      this.state.sliderRange + this.state.thumbSize / 2\r\n    );\r\n  }\r\n\r\n  stickiPostion(position) {\r\n    if (this.props.stickiZero && this.props.from * this.props.to < 0) {\r\n      let valueFromPostion = this.evalValue(position);\r\n      if (Math.abs(valueFromPostion) - this.props.stickiZero < 0) {\r\n        return Slider.getPostion(0, this.state, this.props);\r\n      }\r\n    }\r\n    return position;\r\n  }\r\n\r\n  setPosition = (currentPosition, prevPosition) => {\r\n    let position = this.boundPosition(currentPosition);\r\n\r\n    this.setState(\r\n      {\r\n        ...this.state,\r\n        sliderCurrnetPosition: position,\r\n        sliderPrevPosition: prevPosition || this.state.sliderPrevPosition\r\n      },\r\n      () => {\r\n        if (this.props.onChange) {\r\n          this.props.onChange(\r\n            this.evalValue(this.state.sliderCurrnetPosition),\r\n            this.state.isTemp\r\n          );\r\n        }\r\n      }\r\n    );\r\n  };\r\n\r\n  mouseDownHandle = event => {\r\n    if (\r\n      event.target === this.sliderAreaElement.current ||\r\n      event.target === this.sliderRangeElement.current\r\n    ) {\r\n      //temporary jummp\r\n      this.setState({ ...this.state, isTemp: true });\r\n      const rect = this.sliderAreaElement.current.getBoundingClientRect();\r\n      const position = this.props.horizontal\r\n        ? event.clientX - rect.left\r\n        : event.clientY - rect.top;\r\n      this.setPosition(position, this.state.sliderCurrnetPositionFromProps);\r\n    } // dragging\r\n    else if (event.target === this.sliderThumbElement.current) {\r\n      this.setState({ ...this.state, isDragged: true });\r\n      const rect = this.sliderThumbElement.current.getBoundingClientRect();\r\n      const shiftY = event.clientY - rect.top;\r\n      const shiftX = event.clientX - rect.left;\r\n      document.addEventListener(\"mousemove\", e =>\r\n        this.mouseMoveHandler.call(this, e, shiftY, shiftX)\r\n      );\r\n      document.addEventListener(\"dragstart\", e => e.preventDefault());\r\n    }\r\n\r\n    document.addEventListener(\"mouseup\", this.mouseUpHandler);\r\n    document.addEventListener(\"dragend\", this.mouseUpHandler);\r\n  };\r\n\r\n  mouseUpHandler = event => {\r\n    if (this.state.isDragged) {\r\n      this.setState({ ...this.state, isDragged: false });\r\n    } else {\r\n      this.setState({ ...this.state, isTemp: false });\r\n      if (this.props.step) {\r\n        const step = this.props.step;\r\n        let prevVal = this.evalValue(this.state.sliderPrevPosition);\r\n        if (this.state.sliderCurrnetPosition > this.state.sliderPrevPosition) {\r\n          prevVal += step;\r\n        } else {\r\n          prevVal -= step;\r\n        }\r\n        this.setPosition(Slider.getPostion(prevVal, this.state, this.props));\r\n      } else {\r\n        this.setPosition(this.state.sliderPrevPosition);\r\n      }\r\n    }\r\n\r\n    document.removeEventListener(\"mousemove\", this.mouseMoveHandler.bind(this));\r\n    document.removeEventListener(\"mouseup\", this.mouseUpHandler);\r\n    document.removeEventListener(\"dragend\", this.mouseUpHandler);\r\n  };\r\n\r\n  mouseMoveHandler = (event, shiftY, shiftX) => {\r\n    if (!this.state.isDragged) return;\r\n    let position;\r\n    if (this.props.horizontal) {\r\n      position =\r\n        event.clientX -\r\n        this.state.sliderAreaOffset -\r\n        shiftX +\r\n        this.state.thumbSize / 2;\r\n    } else {\r\n      position =\r\n        event.clientY -\r\n        this.state.sliderAreaOffset -\r\n        shiftY +\r\n        this.state.thumbSize / 2;\r\n    }\r\n    this.setPosition(position);\r\n  };\r\n\r\n  componentDidMount() {\r\n    const updateState = () => {\r\n      const thumbRect = this.sliderThumbElement.current.getBoundingClientRect();\r\n      const areaRect = this.sliderAreaElement.current.getBoundingClientRect();\r\n      const computedStyleThumbElement = window.getComputedStyle(\r\n        this.sliderThumbElement.current\r\n      );\r\n      const computedStyleRangeElement = window.getComputedStyle(\r\n        this.sliderRangeElement.current\r\n      );\r\n\r\n      this.setState(\r\n        state => {\r\n          const _state = { ...state };\r\n          if (this.props.horizontal) {\r\n            _state.sliderCurrnetPosition = parseInt(\r\n              computedStyleThumbElement.left\r\n            );\r\n            _state.sliderRange = parseInt(computedStyleRangeElement.width);\r\n            _state.sliderAreaOffset = areaRect.left;\r\n            _state.thumbSize = thumbRect.width;\r\n          } else {\r\n            _state.sliderCurrnetPosition = parseInt(\r\n              computedStyleThumbElement.top\r\n            );\r\n            _state.sliderRange = parseInt(computedStyleRangeElement.height);\r\n            _state.sliderAreaOffset = areaRect.top;\r\n            _state.thumbSize = thumbRect.height;\r\n          }\r\n          return _state;\r\n        },\r\n        () => {\r\n          if (this.props.value !== undefined) {\r\n            this.setValue(this.props.value);\r\n          }\r\n        }\r\n      );\r\n    };\r\n    updateState();\r\n    window.addEventListener(\"resize\", updateState.bind(this));\r\n\r\n    this.sliderAreaElement.current.addEventListener(\r\n      \"mousedown\",\r\n      this.mouseDownHandle.bind(this)\r\n    );\r\n  }\r\n\r\n  render() {\r\n    const thumbStyle = {};\r\n    if (\r\n      this.state.sliderCurrnetPosition !== undefined &&\r\n      !isNaN(this.state.sliderCurrnetPositionFromProps)\r\n    ) {\r\n      let position = this.stickiPostion(\r\n        this.state.sliderCurrnetPositionFromProps\r\n      );\r\n      if (this.props.horizontal) {\r\n        thumbStyle.left = position;\r\n      } else {\r\n        thumbStyle.top = position;\r\n      }\r\n    }\r\n\r\n    return (\r\n      <div\r\n        className={\r\n          \"slider\" + (this.props.className ? \" \" + this.props.className : \"\")\r\n        }\r\n      >\r\n        <div ref={this.sliderAreaElement} className=\"slider-area\">\r\n          <div ref={this.sliderRangeElement} className=\"slider-range\" />\r\n          <div\r\n            className=\"slider-thumb\"\r\n            ref={this.sliderThumbElement}\r\n            style={thumbStyle}\r\n          />\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Slider;\r\n"]},"metadata":{},"sourceType":"module"}