{"ast":null,"code":"var _jsxFileName = \"D:\\\\PROJEKTY\\\\APKI\\\\DjTruck\\\\djtruck\\\\src\\\\components\\\\Deck\\\\Player\\\\Player.js\";\nimport React from \"react\";\nimport WaveSurfer from \"wavesurfer\";\nimport config from \"./configuration\";\nimport \"./player.scss\";\n\nclass Player extends React.Component {\n  constructor() {\n    super();\n    this.masterContainer = React.createRef();\n    this.slaveContainer = React.createRef();\n    this.state = {\n      loadingProgress: 0\n    };\n  }\n\n  componentDidMount() {\n    this.master = WaveSurfer.create(config.master(this.masterContainer.current, this.props.name));\n    this.slave = WaveSurfer.create(config.slave(this.slaveContainer.current, this.props.name));\n    this.master.on('ready', () => {\n      this.currentDuration = this.master.getDuration();\n      this.slave.load(null, this.master.backend.getPeaks(430, 0, 430)); //startSync()\n    });\n    this.slave.on('seek', progress => {\n      this.master.backend.seekTo(progress * this.currentDuration);\n      this.master.drawer.progress(progress);\n      this.slave.drawer.progress(progress);\n    });\n    this.master.on('loading', args => {\n      console.log(args);\n    });\n\n    const startSync = () => {\n      this.syncHandle = setInterval(() => {\n        this.slave.drawer.progress(this.master.getCurrentTime() / this.currentDuration);\n      }, 100);\n    };\n  }\n\n  shouldComponentUpdate(nextProps, nextState) {\n    //console.log('should componet update', this.props, nextProps);\n    if (this.props.url !== nextProps.url) {\n      this.slave.load(null, []);\n      this.master.load(nextProps.url);\n      return false;\n    }\n\n    return true;\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"player\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"master\",\n      ref: this.masterContainer,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61\n      },\n      __self: this\n    }, this.state.loadingProgress), React.createElement(\"div\", {\n      className: \"slave\",\n      ref: this.slaveContainer,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64\n      },\n      __self: this\n    }));\n  }\n\n}\n\nexport default Player;","map":{"version":3,"sources":["D:/PROJEKTY/APKI/DjTruck/djtruck/src/components/Deck/Player/Player.js"],"names":["React","WaveSurfer","config","Player","Component","constructor","masterContainer","createRef","slaveContainer","state","loadingProgress","componentDidMount","master","create","current","props","name","slave","on","currentDuration","getDuration","load","backend","getPeaks","progress","seekTo","drawer","args","console","log","startSync","syncHandle","setInterval","getCurrentTime","shouldComponentUpdate","nextProps","nextState","url","render"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport WaveSurfer from \"wavesurfer\";\r\nimport config from \"./configuration\";\r\nimport \"./player.scss\"\r\n\r\nclass Player extends React.Component {\r\n    constructor(){\r\n        super();\r\n        this.masterContainer = React.createRef();\r\n        this.slaveContainer = React.createRef();\r\n\r\n        this.state = {\r\n            loadingProgress : 0,\r\n        }\r\n    }\r\n\r\n    \r\n\r\n    componentDidMount(){\r\n        this.master = WaveSurfer.create(config.master(this.masterContainer.current, this.props.name));\r\n        this.slave = WaveSurfer.create(config.slave(this.slaveContainer.current, this.props.name));\r\n\r\n\r\n        this.master.on('ready', ()=>{\r\n            this.currentDuration = this.master.getDuration();\r\n            this.slave.load(null, this.master.backend.getPeaks(430, 0, 430))\r\n            //startSync()\r\n        })\r\n\r\n        this.slave.on('seek', (progress)=>{\r\n            this.master.backend.seekTo(progress * this.currentDuration);\r\n            this.master.drawer.progress(progress);\r\n            this.slave.drawer.progress(progress);\r\n        })\r\n\r\n        this.master.on('loading', (args)=>{\r\n            console.log(args);\r\n        })\r\n\r\n        const startSync = () => {\r\n            this.syncHandle = setInterval(() => {\r\n                this.slave.drawer.progress(this.master.getCurrentTime() / this.currentDuration);\r\n            }, 100)\r\n        }\r\n    }\r\n\r\n    shouldComponentUpdate(nextProps, nextState){\r\n        //console.log('should componet update', this.props, nextProps);\r\n    \r\n        if(this.props.url !== nextProps.url){\r\n            this.slave.load(null, []);\r\n            this.master.load(nextProps.url);\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n\r\n    render(){\r\n        return (\r\n            <div className=\"player\">\r\n                <div className=\"master\" ref={ this.masterContainer } >\r\n                    { this.state.loadingProgress }\r\n                </div>\r\n                <div className=\"slave\" ref={ this.slaveContainer } /> \r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Player;"]},"metadata":{},"sourceType":"module"}