{"ast":null,"code":"import _slicedToArray from\"D:\\\\PROJEKTY\\\\APKI\\\\dj-truck\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useCallback,useEffect,useMemo,useState}from'react';import{Dropdown,DropdownButton,FormControl}from\"react-bootstrap\";import{connect}from\"react-redux\";import{clearSearch as _clearSearch,searchInput,searchStart as _searchStart}from\"../../../../actions\";import{API_TYPES,getApisName}from\"./../../../../apis/apiProvider\";import\"./search.scss\";import SearchResults from'./SerachList/SearchList.js';var Search=function Search(_ref){var clearSearch=_ref.clearSearch,searchStart=_ref.searchStart,setQuery=_ref.setQuery,queryString=_ref.queryString;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),resultOpen=_useState2[0],setResultOpen=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),source=_useState4[0],setSource=_useState4[1];var _useState5=useState(10),_useState6=_slicedToArray(_useState5,2),limit=_useState6[0],setLimit=_useState6[1];var openList=function openList(){return setResultOpen(true);};useEffect(function(){var defaultSource=getApisName(API_TYPES.MIUSIC_SOURCE,{default:true});setSource(defaultSource);},[API_TYPES,getApisName,setSource]);var selectedHandel=function selectedHandel(){clearSearch();setResultOpen(false);};var apiList=useMemo(function(){return getApisName(API_TYPES.MIUSIC_SOURCE).map(function(api){return React.createElement(Dropdown.Item,{key:api,onClick:setSource.bind(null,api)},\"  \",api,\" \");});},[API_TYPES.MIUSIC_SOURCE,getApisName]);var controlKeyPress=useCallback(function(event){if(event.key!==\"Enter\")return;console.log(\"soruce in coimponet\",source);searchStart(queryString,source,limit);},[queryString,source,limit]);return React.createElement(\"div\",{className:\"search\"},React.createElement(\"div\",{className:\"search-controls\"},React.createElement(DropdownButton,{className:\"btn-api-select\",title:source||\"\"},apiList),React.createElement(FormControl,{className:\"search-control\",type:\"text\",placeholder:\"Tap in to serach on youtube\",onChange:function onChange(event){return setQuery(event.target.value);},onKeyPress:controlKeyPress,onFocus:openList,value:queryString}),React.createElement(DropdownButton,{className:\"btn-max-result-select\",title:limit},React.createElement(Dropdown.Item,{onClick:function onClick(){return setLimit(10);}},\" 10 \"),React.createElement(Dropdown.Item,{onClick:function onClick(){return setLimit(25);}},\" 25 \"),React.createElement(Dropdown.Item,{onClick:function onClick(){return setLimit(50);}},\" 50 \"))),React.createElement(SearchResults,{open:resultOpen,selectedHandle:selectedHandel}));};var mapStateToProps=function mapStateToProps(state){return{queryString:state.searchReducer.searchString};};var mapDispachToProps=function mapDispachToProps(dispatch){return{setQuery:function setQuery(text){return dispatch(searchInput(text));},searchStart:function searchStart(text,source,limit){return dispatch(_searchStart(text,source,limit));},clearSearch:function clearSearch(){return dispatch(_clearSearch());}};};export default connect(mapStateToProps,mapDispachToProps)(Search);","map":{"version":3,"sources":["D:/PROJEKTY/APKI/dj-truck/src/pages/common/components/ExternalSearch/Search.js"],"names":["React","useCallback","useEffect","useMemo","useState","Dropdown","DropdownButton","FormControl","connect","clearSearch","searchInput","searchStart","API_TYPES","getApisName","SearchResults","Search","setQuery","queryString","resultOpen","setResultOpen","source","setSource","limit","setLimit","openList","defaultSource","MIUSIC_SOURCE","default","selectedHandel","apiList","map","api","bind","controlKeyPress","event","key","console","log","target","value","mapStateToProps","state","searchReducer","searchString","mapDispachToProps","dispatch","text"],"mappings":"kHAAA,MAAOA,CAAAA,KAAP,EAAgBC,WAAhB,CAA6BC,SAA7B,CAAwCC,OAAxC,CAAiDC,QAAjD,KAAiE,OAAjE,CACA,OAASC,QAAT,CAAmBC,cAAnB,CAAmCC,WAAnC,KAAsD,iBAAtD,CACA,OAASC,OAAT,KAAwB,aAAxB,CACA,OAASC,WAAW,GAAXA,CAAAA,YAAT,CAAsBC,WAAtB,CAAmCC,WAAW,GAAXA,CAAAA,YAAnC,KAAsD,qBAAtD,CACA,OAASC,SAAT,CAAoBC,WAApB,KAAuC,gCAAvC,CACA,MAAO,eAAP,CACA,MAAOC,CAAAA,aAAP,KAA0B,4BAA1B,CAMA,GAAMC,CAAAA,MAAM,CAAG,QAATA,CAAAA,MAAS,MAKT,IAJFN,CAAAA,WAIE,MAJFA,WAIE,CAHFE,WAGE,MAHFA,WAGE,CAFFK,QAEE,MAFFA,QAEE,CADFC,WACE,MADFA,WACE,eACkCb,QAAQ,CAAC,KAAD,CAD1C,wCACKc,UADL,eACiBC,aADjB,8BAE0Bf,QAAQ,CAAC,IAAD,CAFlC,yCAEKgB,MAFL,eAEaC,SAFb,8BAGwBjB,QAAQ,CAAC,EAAD,CAHhC,yCAGKkB,KAHL,eAGYC,QAHZ,eAKF,GAAMC,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,SAAML,CAAAA,aAAa,CAAC,IAAD,CAAnB,EAAjB,CAEAjB,SAAS,CAAC,UAAI,CACV,GAAMuB,CAAAA,aAAa,CAAGZ,WAAW,CAACD,SAAS,CAACc,aAAX,CAA0B,CAAEC,OAAO,CAAE,IAAX,CAA1B,CAAjC,CACAN,SAAS,CAACI,aAAD,CAAT,CACH,CAHQ,CAGN,CAACb,SAAD,CAAYC,WAAZ,CAAyBQ,SAAzB,CAHM,CAAT,CAKA,GAAMO,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,EAAM,CACzBnB,WAAW,GACXU,aAAa,CAAC,KAAD,CAAb,CACH,CAHD,CAKA,GAAMU,CAAAA,OAAO,CAAG1B,OAAO,CAAC,UAAI,CACxB,MAAOU,CAAAA,WAAW,CAACD,SAAS,CAACc,aAAX,CAAX,CAAqCI,GAArC,CAAyC,SAAAC,GAAG,CAAI,CACnD,MAAQ,qBAAC,QAAD,CAAU,IAAV,EAAe,GAAG,CAAEA,GAApB,CAAyB,OAAO,CAAEV,SAAS,CAACW,IAAV,CAAe,IAAf,CAAqBD,GAArB,CAAlC,OAAgEA,GAAhE,KAAR,CACH,CAFM,CAAP,CAGH,CAJsB,CAIpB,CAACnB,SAAS,CAACc,aAAX,CAA0Bb,WAA1B,CAJoB,CAAvB,CAMA,GAAMoB,CAAAA,eAAe,CAAGhC,WAAW,CAAC,SAACiC,KAAD,CAAW,CAC3C,GAAIA,KAAK,CAACC,GAAN,GAAc,OAAlB,CAA2B,OAC3BC,OAAO,CAACC,GAAR,CAAY,qBAAZ,CAAmCjB,MAAnC,EACAT,WAAW,CAACM,WAAD,CAAcG,MAAd,CAAsBE,KAAtB,CAAX,CACH,CAJkC,CAIhC,CAACL,WAAD,CAAcG,MAAd,CAAsBE,KAAtB,CAJgC,CAAnC,CAMA,MACI,4BAAK,SAAS,CAAC,QAAf,EACI,2BAAK,SAAS,CAAC,iBAAf,EACI,oBAAC,cAAD,EACI,SAAS,CAAC,gBADd,CAEI,KAAK,CAAEF,MAAM,EAAI,EAFrB,EAGKS,OAHL,CADJ,CAMI,oBAAC,WAAD,EACI,SAAS,CAAC,gBADd,CAEI,IAAI,CAAC,MAFT,CAGI,WAAW,CAAC,6BAHhB,CAII,QAAQ,CAAE,kBAAAK,KAAK,QAAIlB,CAAAA,QAAQ,CAACkB,KAAK,CAACI,MAAN,CAAaC,KAAd,CAAZ,EAJnB,CAKI,UAAU,CAAEN,eALhB,CAMI,OAAO,CAAET,QANb,CAOI,KAAK,CAAEP,WAPX,EANJ,CAcI,oBAAC,cAAD,EACI,SAAS,CAAC,uBADd,CAEI,KAAK,CAAEK,KAFX,EAGI,oBAAC,QAAD,CAAU,IAAV,EAAe,OAAO,CAAE,yBAAMC,CAAAA,QAAQ,CAAC,EAAD,CAAd,EAAxB,SAHJ,CAII,oBAAC,QAAD,CAAU,IAAV,EAAe,OAAO,CAAE,yBAAMA,CAAAA,QAAQ,CAAC,EAAD,CAAd,EAAxB,SAJJ,CAKI,oBAAC,QAAD,CAAU,IAAV,EAAe,OAAO,CAAE,yBAAMA,CAAAA,QAAQ,CAAC,EAAD,CAAd,EAAxB,SALJ,CAdJ,CADJ,CA0BI,oBAAC,aAAD,EACI,IAAI,CAAEL,UADV,CAEI,cAAc,CAAEU,cAFpB,EA1BJ,CADJ,CAgCH,CAlED,CAoEA,GAAMY,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,CAAAC,KAAK,QAAK,CAC9BxB,WAAW,CAAEwB,KAAK,CAACC,aAAN,CAAoBC,YADH,CAAL,EAA7B,CAIA,GAAMC,CAAAA,iBAAiB,CAAG,QAApBA,CAAAA,iBAAoB,CAAAC,QAAQ,QAAK,CACnC7B,QAAQ,CAAE,kBAAC8B,IAAD,QAAUD,CAAAA,QAAQ,CAACnC,WAAW,CAACoC,IAAD,CAAZ,CAAlB,EADyB,CAEnCnC,WAAW,CAAE,qBAACmC,IAAD,CAAO1B,MAAP,CAAeE,KAAf,QAAyBuB,CAAAA,QAAQ,CAAClC,YAAW,CAACmC,IAAD,CAAO1B,MAAP,CAAeE,KAAf,CAAZ,CAAjC,EAFsB,CAGnCb,WAAW,CAAE,6BAAMoC,CAAAA,QAAQ,CAACpC,YAAW,EAAZ,CAAd,EAHsB,CAAL,EAAlC,CAMA,cAAeD,CAAAA,OAAO,CAACgC,eAAD,CAAkBI,iBAAlB,CAAP,CAA4C7B,MAA5C,CAAf","sourcesContent":["import React, { useCallback, useEffect, useMemo, useState } from 'react';\r\nimport { Dropdown, DropdownButton, FormControl } from \"react-bootstrap\";\r\nimport { connect } from \"react-redux\";\r\nimport { clearSearch, searchInput, searchStart } from \"../../../../actions\";\r\nimport { API_TYPES, getApisName } from \"./../../../../apis/apiProvider\";\r\nimport \"./search.scss\";\r\nimport SearchResults from './SerachList/SearchList.js';\r\n\r\n\r\n\r\n\r\n\r\nconst Search = ({\r\n    clearSearch,\r\n    searchStart,\r\n    setQuery,\r\n    queryString,\r\n}) => {\r\n    const [resultOpen, setResultOpen] = useState(false);\r\n    const [source, setSource] = useState(null);\r\n    const [limit, setLimit] = useState(10);\r\n\r\n    const openList = () => setResultOpen(true);\r\n\r\n    useEffect(()=>{\r\n        const defaultSource = getApisName(API_TYPES.MIUSIC_SOURCE, { default: true })\r\n        setSource(defaultSource)\r\n    }, [API_TYPES, getApisName, setSource])\r\n\r\n    const selectedHandel = () => {\r\n        clearSearch();\r\n        setResultOpen(false);\r\n    }\r\n\r\n    const apiList = useMemo(()=>{\r\n        return getApisName(API_TYPES.MIUSIC_SOURCE).map(api => {\r\n            return (<Dropdown.Item key={api} onClick={setSource.bind(null, api)}>  {api} </Dropdown.Item>)\r\n        })\r\n    }, [API_TYPES.MIUSIC_SOURCE, getApisName])\r\n\r\n    const controlKeyPress = useCallback((event) => {\r\n        if (event.key !== \"Enter\") return\r\n        console.log(\"soruce in coimponet\", source)\r\n        searchStart(queryString, source, limit)\r\n    }, [queryString, source, limit])\r\n\r\n    return (\r\n        <div className=\"search\">\r\n            <div className=\"search-controls\">\r\n                <DropdownButton\r\n                    className=\"btn-api-select\"\r\n                    title={source || \"\"}>\r\n                    {apiList}\r\n                </DropdownButton>\r\n                <FormControl\r\n                    className=\"search-control\"\r\n                    type=\"text\"\r\n                    placeholder=\"Tap in to serach on youtube\"\r\n                    onChange={event => setQuery(event.target.value)}\r\n                    onKeyPress={controlKeyPress}\r\n                    onFocus={openList}\r\n                    value={queryString} />\r\n                <DropdownButton\r\n                    className=\"btn-max-result-select\"\r\n                    title={limit}>\r\n                    <Dropdown.Item onClick={() => setLimit(10)}> 10 </Dropdown.Item>\r\n                    <Dropdown.Item onClick={() => setLimit(25)}> 25 </Dropdown.Item>\r\n                    <Dropdown.Item onClick={() => setLimit(50)}> 50 </Dropdown.Item>\r\n                </DropdownButton>\r\n\r\n\r\n            </div>\r\n\r\n            <SearchResults\r\n                open={resultOpen}\r\n                selectedHandle={selectedHandel} />\r\n        </div>\r\n    );\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n    queryString: state.searchReducer.searchString\r\n})\r\n\r\nconst mapDispachToProps = dispatch => ({\r\n    setQuery: (text) => dispatch(searchInput(text)),\r\n    searchStart: (text, source, limit) => dispatch(searchStart(text, source, limit)),\r\n    clearSearch: () => dispatch(clearSearch()),\r\n})\r\n\r\nexport default connect(mapStateToProps, mapDispachToProps)(Search);"]},"metadata":{},"sourceType":"module"}