{"ast":null,"code":"import _objectSpread from\"D:\\\\PROJEKTY\\\\APKI\\\\DjTruck\\\\djtruck\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"D:\\\\PROJEKTY\\\\APKI\\\\DjTruck\\\\djtruck\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"D:\\\\PROJEKTY\\\\APKI\\\\DjTruck\\\\djtruck\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"D:\\\\PROJEKTY\\\\APKI\\\\DjTruck\\\\djtruck\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"D:\\\\PROJEKTY\\\\APKI\\\\DjTruck\\\\djtruck\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";import _assertThisInitialized from\"D:\\\\PROJEKTY\\\\APKI\\\\DjTruck\\\\djtruck\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";import _inherits from\"D:\\\\PROJEKTY\\\\APKI\\\\DjTruck\\\\djtruck\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import React from\"react\";import\"./slider.scss\";var Slider=/*#__PURE__*/function(_React$Component){_inherits(Slider,_React$Component);function Slider(){var _this;_classCallCheck(this,Slider);_this=_possibleConstructorReturn(this,_getPrototypeOf(Slider).call(this));_this.state={//from get derived stated from props\nsliderCurrnetPositionFromProps:null,sliderRange:null,sliderCurrnetPosition:null,sliderPrevPosition:null,isDragged:false,isTemp:false,// is temporary value return as second arguemnt onChange callback\nthumbSize:0,sliderAreaOffset:0};_this.evalValue=function(position){var _Slider$getRange=Slider.getRange(_this.props.from,_this.props.to),from=_Slider$getRange.from,range=_Slider$getRange.range;var progress=(position-_this.state.thumbSize/2)/_this.state.sliderRange;var value=range*progress+from;return value;};_this.setValue=function(value){var _Slider$getRange2=Slider.getRange(_this.props.from,_this.props.to),from=_Slider$getRange2.from,range=_Slider$getRange2.range;var progress=(value-from)/range;var position=progress*_this.state.sliderRange;_this.setPosition(position+_this.state.thumbSize/2);};_this.setPosition=function(currentPosition,prevPosition){var position=_this.boundPosition(currentPosition);_this.setState(_objectSpread({},_this.state,{sliderCurrnetPosition:position,sliderPrevPosition:prevPosition||_this.state.sliderPrevPosition}),function(){if(_this.props.onChange){_this.props.onChange(_this.evalValue(_this.state.sliderCurrnetPosition),_this.state.isTemp);}});};_this.mouseDownHandle=function(event){if(event.target===_this.sliderAreaElement.current||event.target===_this.sliderRangeElement.current){//temporary jummp\n_this.setState(_objectSpread({},_this.state,{isTemp:true}));var rect=_this.sliderAreaElement.current.getBoundingClientRect();var position=_this.props.horizontal?event.clientX-rect.left:event.clientY-rect.top;_this.setPosition(position,_this.state.sliderCurrnetPositionFromProps);}else// dragging \nif(event.target===_this.sliderThumbElement.current){_this.setState(_objectSpread({},_this.state,{isDragged:true}));var _rect=_this.sliderThumbElement.current.getBoundingClientRect();var shiftY=event.clientY-_rect.top;var shiftX=event.clientX-_rect.left;document.addEventListener('mousemove',function(e){return _this.mouseMoveHandler.call(_assertThisInitialized(_this),e,shiftY,shiftX);});document.addEventListener('dragstart',function(e){return e.preventDefault();});}document.addEventListener('mouseup',_this.mouseUpHandler);document.addEventListener('dragend',_this.mouseUpHandler);};_this.mouseUpHandler=function(event){if(_this.state.isDragged){_this.setState(_objectSpread({},_this.state,{isDragged:false}));}else{_this.setState(_objectSpread({},_this.state,{isTemp:false}));if(_this.props.step){var step=_this.props.step;var prevVal=_this.evalValue(_this.state.sliderPrevPosition);if(_this.state.sliderCurrnetPosition>_this.state.sliderPrevPosition){prevVal+=step;}else{prevVal-=step;}_this.setPosition(Slider.getPostion(prevVal,_this.state,_this.props));}else{_this.setPosition(_this.state.sliderPrevPosition);}}document.removeEventListener('mousemove',_this.mouseMoveHandler.bind(_assertThisInitialized(_this)));document.removeEventListener('mouseup',_this.mouseUpHandler);document.removeEventListener('dragend',_this.mouseUpHandler);};_this.mouseMoveHandler=function(event,shiftY,shiftX){if(!_this.state.isDragged)return;var position;if(_this.props.horizontal){position=event.clientX-_this.state.sliderAreaOffset-shiftX+_this.state.thumbSize/2;}else{position=event.clientY-_this.state.sliderAreaOffset-shiftY+_this.state.thumbSize/2;}_this.setPosition(position);};_this.sliderRangeElement=React.createRef();_this.sliderThumbElement=React.createRef();_this.sliderAreaElement=React.createRef();return _this;}_createClass(Slider,[{key:\"boundPosition\",value:function boundPosition(position){return Math.min(Math.max(position,this.state.thumbSize/2),this.state.sliderRange+this.state.thumbSize/2);}},{key:\"stickiPostion\",value:function stickiPostion(position){if(this.props.stickiZero&&this.props.from*this.props.to<0){var valueFromPostion=this.evalValue(position);if(Math.abs(valueFromPostion)-this.props.stickiZero<0){return Slider.getPostion(0,this.state,this.props);}}return position;}},{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;var updateState=function updateState(){var thumbRect=_this2.sliderThumbElement.current.getBoundingClientRect();var areaRect=_this2.sliderAreaElement.current.getBoundingClientRect();var computedStyleThumbElement=window.getComputedStyle(_this2.sliderThumbElement.current);var computedStyleRangeElement=window.getComputedStyle(_this2.sliderRangeElement.current);_this2.setState(function(state){var _state=_objectSpread({},state);if(_this2.props.horizontal){_state.sliderCurrnetPosition=parseInt(computedStyleThumbElement.left);_state.sliderRange=parseInt(computedStyleRangeElement.width);_state.sliderAreaOffset=areaRect.left;_state.thumbSize=thumbRect.width;}else{_state.sliderCurrnetPosition=parseInt(computedStyleThumbElement.top);_state.sliderRange=parseInt(computedStyleRangeElement.height);_state.sliderAreaOffset=areaRect.top;_state.thumbSize=thumbRect.height;}return _state;},function(){if(_this2.props.value!==undefined){_this2.setValue(_this2.props.value);}});};updateState();window.addEventListener('resize',updateState.bind(this));this.sliderAreaElement.current.addEventListener('mousedown',this.mouseDownHandle.bind(this));}},{key:\"render\",value:function render(){var thumbStyle={};if(this.state.sliderCurrnetPosition!==undefined&&!isNaN(this.state.sliderCurrnetPositionFromProps)){var position=this.stickiPostion(this.state.sliderCurrnetPositionFromProps);if(this.props.horizontal){thumbStyle.left=position;}else{thumbStyle.top=position;}}return React.createElement(\"div\",{className:\"slider\"+(this.props.className?\" \"+this.props.className:\"\")},React.createElement(\"div\",{ref:this.sliderAreaElement,className:\"slider-area\"},React.createElement(\"div\",{ref:this.sliderRangeElement,className:\"slider-range\"}),React.createElement(\"div\",{className:\"slider-thumb\",ref:this.sliderThumbElement,style:thumbStyle})));}}],[{key:\"getDerivedStateFromProps\",value:function getDerivedStateFromProps(props,state){if(!state.sliderRange||!state.thumbSize)return null;if(props.value===undefined){return _objectSpread({},state,{sliderCurrnetPositionFromProps:state.sliderCurrnetPosition});}if(props.value>props.to||props.value<props.from){return null;//dont modify state\n}var currentPosition=Slider.getPostion(props.value,state,props);return _objectSpread({},state,{sliderCurrnetPositionFromProps:currentPosition});}}]);return Slider;}(React.Component);Slider.getRange=function(from,to){return{from:from,to:to,range:from*to<0?Math.abs(to)+Math.abs(from):to-from};};Slider.getPostion=function(value,state,props){var _Slider$getRange3=Slider.getRange(props.from,props.to),from=_Slider$getRange3.from,range=_Slider$getRange3.range;var progress=(value-from)/range;var position=progress*state.sliderRange;return position+state.thumbSize/2;};export default Slider;","map":{"version":3,"sources":["D:/PROJEKTY/APKI/DjTruck/djtruck/src/components/common/Slider/Slider.js"],"names":["React","Slider","state","sliderCurrnetPositionFromProps","sliderRange","sliderCurrnetPosition","sliderPrevPosition","isDragged","isTemp","thumbSize","sliderAreaOffset","evalValue","position","getRange","props","from","to","range","progress","value","setValue","setPosition","currentPosition","prevPosition","boundPosition","setState","onChange","mouseDownHandle","event","target","sliderAreaElement","current","sliderRangeElement","rect","getBoundingClientRect","horizontal","clientX","left","clientY","top","sliderThumbElement","shiftY","shiftX","document","addEventListener","e","mouseMoveHandler","call","preventDefault","mouseUpHandler","step","prevVal","getPostion","removeEventListener","bind","createRef","Math","min","max","stickiZero","valueFromPostion","abs","updateState","thumbRect","areaRect","computedStyleThumbElement","window","getComputedStyle","computedStyleRangeElement","_state","parseInt","width","height","undefined","thumbStyle","isNaN","stickiPostion","className","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport \"./slider.scss\";\r\n\r\nclass Slider extends React.Component{\r\n    constructor() {\r\n        super();\r\n\r\n        this.sliderRangeElement = React.createRef();\r\n        this.sliderThumbElement = React.createRef();\r\n        this.sliderAreaElement = React.createRef();\r\n    }\r\n\r\n    state = {\r\n        //from get derived stated from props\r\n        sliderCurrnetPositionFromProps: null,\r\n\r\n        sliderRange: null,\r\n        sliderCurrnetPosition: null,\r\n        sliderPrevPosition: null,\r\n        isDragged : false,\r\n        isTemp : false, // is temporary value return as second arguemnt onChange callback\r\n\r\n        thumbSize: 0,\r\n        sliderAreaOffset : 0,\r\n    }\r\n\r\n    static getRange = (from , to) => {\r\n        return{\r\n            from,\r\n            to,\r\n            range : (from * to < 0) ?  Math.abs(to) + Math.abs(from) : to - from,\r\n        }\r\n    }\r\n\r\n    static getPostion = (value, state, props) => {\r\n        const { from , range } = Slider.getRange(props.from, props.to);\r\n        const progress = (value - from)/ range;  \r\n        const position = progress * (state.sliderRange);\r\n        return (position + state.thumbSize / 2 )\r\n    }\r\n\r\n    static getDerivedStateFromProps(props, state) {\r\n        if(!state.sliderRange || !state.thumbSize) return null;\r\n        if(props.value === undefined){\r\n            return {\r\n                ...state,\r\n                sliderCurrnetPositionFromProps: state.sliderCurrnetPosition,\r\n            }\r\n        }\r\n        \r\n        if(props.value > props.to || props.value < props.from){\r\n            return null; //dont modify state\r\n        }\r\n    \r\n        let currentPosition = Slider.getPostion(props.value, state, props);\r\n\r\n        return {\r\n            ...state,\r\n            sliderCurrnetPositionFromProps: currentPosition,\r\n        }\r\n    }\r\n\r\n\r\n\r\n    evalValue = (position) => {\r\n        const {from , range} = Slider.getRange(this.props.from, this.props.to);\r\n        const progress = (position - this.state.thumbSize / 2)\r\n                         / this.state.sliderRange;\r\n\r\n        let value =  range * progress + from;\r\n        return value;\r\n    }\r\n\r\n    setValue = (value) => {\r\n        const { from , range } = Slider.getRange(this.props.from, this.props.to);\r\n        const progress = (value - from)/ range;  \r\n        const position = progress * (this.state.sliderRange);\r\n        this.setPosition(position + this.state.thumbSize / 2 )\r\n    }\r\n\r\n    boundPosition(position){\r\n        return  Math.min( Math.max(position, this.state.thumbSize / 2), \r\n                        this.state.sliderRange + this.state.thumbSize / 2 );\r\n    }\r\n\r\n    stickiPostion(position){\r\n        if(this.props.stickiZero && (this.props.from * this.props.to < 0) ){\r\n            let valueFromPostion = this.evalValue(position)\r\n            if(Math.abs(valueFromPostion) - this.props.stickiZero < 0 ){\r\n                return Slider.getPostion(0, this.state, this.props);\r\n            }\r\n        }\r\n        return position\r\n    }\r\n    \r\n\r\n    setPosition = (currentPosition, prevPosition) => {\r\n        let position = this.boundPosition(currentPosition);\r\n\r\n        this.setState({...this.state, \r\n            sliderCurrnetPosition : position,\r\n            sliderPrevPosition : prevPosition || this.state.sliderPrevPosition,\r\n        }, ()=>{\r\n            if(this.props.onChange){\r\n                this.props.onChange(this.evalValue(this.state.sliderCurrnetPosition), this.state.isTemp);\r\n            }\r\n        });\r\n    }\r\n\r\n\r\n\r\n\r\n    mouseDownHandle = (event) =>{\r\n       \r\n        if(event.target === this.sliderAreaElement.current || event.target === this.sliderRangeElement.current){ //temporary jummp\r\n            this.setState({...this.state, isTemp : true})\r\n            const rect = this.sliderAreaElement.current.getBoundingClientRect();\r\n            const position = (this.props.horizontal) ? event.clientX  - rect.left : event.clientY - rect.top;\r\n            this.setPosition(position, this.state.sliderCurrnetPositionFromProps);\r\n        } else // dragging \r\n            if(event.target === this.sliderThumbElement.current){ \r\n            this.setState({...this.state, isDragged: true});\r\n            const rect = this.sliderThumbElement.current.getBoundingClientRect();\r\n            const shiftY = event.clientY - rect.top;\r\n            const shiftX = event.clientX - rect.left;\r\n            document.addEventListener('mousemove', e =>  this.mouseMoveHandler.call(this, e, shiftY, shiftX))\r\n            document.addEventListener('dragstart', e => e.preventDefault())\r\n        }\r\n\r\n        document.addEventListener('mouseup', this.mouseUpHandler);\r\n        document.addEventListener('dragend', this.mouseUpHandler);\r\n    }\r\n\r\n    mouseUpHandler = event => {\r\n        if(this.state.isDragged){\r\n            this.setState({...this.state, isDragged: false});\r\n        } else {\r\n            this.setState({...this.state, isTemp:false})\r\n            if(this.props.step){\r\n                const step = this.props.step;\r\n                let prevVal = this.evalValue(this.state.sliderPrevPosition);\r\n                if(this.state.sliderCurrnetPosition > this.state.sliderPrevPosition) {\r\n                    prevVal += step;\r\n                } else {\r\n                    prevVal -= step;\r\n                }\r\n                this.setPosition(Slider.getPostion(prevVal, this.state, this.props));\r\n            } else{\r\n                this.setPosition(this.state.sliderPrevPosition);\r\n            }\r\n        }\r\n\r\n        document.removeEventListener('mousemove', this.mouseMoveHandler.bind(this));\r\n        document.removeEventListener('mouseup', this.mouseUpHandler);\r\n        document.removeEventListener('dragend', this.mouseUpHandler);\r\n    }\r\n\r\n    mouseMoveHandler = (event, shiftY, shiftX) =>{\r\n        if(!this.state.isDragged) return;\r\n        let position;\r\n        if(this.props.horizontal){\r\n            position = event.clientX \r\n                     - this.state.sliderAreaOffset\r\n                     - shiftX\r\n                     + (this.state.thumbSize/2);\r\n        }else {\r\n            position = event.clientY \r\n                     - this.state.sliderAreaOffset \r\n                     - shiftY \r\n                     + (this.state.thumbSize/2);\r\n        }\r\n        this.setPosition(position);\r\n    }\r\n\r\n    componentDidMount(){\r\n        const updateState = () => {\r\n            const thumbRect = this.sliderThumbElement.current.getBoundingClientRect();\r\n            const areaRect = this.sliderAreaElement.current.getBoundingClientRect();\r\n            const computedStyleThumbElement = window.getComputedStyle(this.sliderThumbElement.current);\r\n            const computedStyleRangeElement = window.getComputedStyle(this.sliderRangeElement.current);\r\n    \r\n            this.setState( state => {\r\n                const _state = {...state};\r\n                if(this.props.horizontal){\r\n                    _state.sliderCurrnetPosition = parseInt(computedStyleThumbElement.left);\r\n                    _state.sliderRange = parseInt(computedStyleRangeElement.width);\r\n                    _state.sliderAreaOffset = areaRect.left;\r\n                    _state.thumbSize = thumbRect.width;\r\n                } else{\r\n                    _state.sliderCurrnetPosition = parseInt(computedStyleThumbElement.top);\r\n                    _state.sliderRange = parseInt(computedStyleRangeElement.height);\r\n                    _state.sliderAreaOffset = areaRect.top;\r\n                    _state.thumbSize = thumbRect.height;\r\n                }\r\n                return _state;\r\n            }, () => {\r\n                if(this.props.value !== undefined){\r\n                    this.setValue(this.props.value);\r\n                }\r\n            })\r\n        }\r\n        updateState();\r\n        window.addEventListener('resize', updateState.bind(this));\r\n\r\n\r\n        this.sliderAreaElement.current.addEventListener('mousedown',  this.mouseDownHandle.bind(this));\r\n    }\r\n\r\n\r\n\r\n\r\n    render() {\r\n            const thumbStyle = {}\r\n            if(this.state.sliderCurrnetPosition !== undefined && !isNaN(this.state.sliderCurrnetPositionFromProps)){\r\n                let position = this.stickiPostion(this.state.sliderCurrnetPositionFromProps)\r\n                if(this.props.horizontal){\r\n                    thumbStyle.left = position;\r\n                } else {\r\n                    thumbStyle.top = position;\r\n                }\r\n            }\r\n\r\n            return (\r\n                <div  className={\"slider\" + ((this.props.className) ? \" \" + this.props.className  : \"\") } >\r\n                    <div ref={this.sliderAreaElement} className=\"slider-area\">\r\n                        <div ref={this.sliderRangeElement} className=\"slider-range\"/>\r\n                        <div className=\"slider-thumb\" \r\n                             ref={this.sliderThumbElement} \r\n                             style={ thumbStyle } />\r\n                    </div>\r\n                </div>\r\n            )\r\n        }\r\n}\r\n\r\nexport default Slider;"]},"metadata":{},"sourceType":"module"}