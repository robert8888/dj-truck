{"ast":null,"code":"var _jsxFileName = \"D:\\\\PROJEKTY\\\\APKI\\\\dj-truck\\\\src\\\\pages\\\\common\\\\components\\\\HOC\\\\withRefSize.js\";\nimport React from \"react\";\nimport { produce } from \"imer\";\n\nconst withRefSize = WrappedComponent => {\n  var _temp;\n\n  return _temp = class extends React.Component {\n    constructor(...args) {\n      super(...args);\n\n      this.importRef = (name, ref) => {\n        this.references[name] = ref;\n      };\n\n      this.state = {\n        size: {}\n      };\n      this.references = {};\n    }\n\n    componentDidMount() {\n      const updateSize = () => {\n        let size = {};\n\n        for (let [name, element] of Object.entries(this.references)) {\n          const {\n            width,\n            height\n          } = element.getBoundingClientRect();\n          size[name] = {\n            width,\n            height\n          };\n        }\n\n        this.setState(produce(this.state, draft => draft.size = size));\n      };\n\n      if (window.requestAnimationFrame) {\n        window.requestAnimationFrame(updateSize);\n      } else {\n        updateSize();\n      }\n    }\n\n    render() {\n      return React.createElement(WrappedComponent, Object.assign({}, this.props, {\n        size: this.state.size,\n        exportRef: this.importRef,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 42\n        },\n        __self: this\n      }));\n    }\n\n  }, _temp;\n};\n\nexport default withRefSize;","map":{"version":3,"sources":["D:/PROJEKTY/APKI/dj-truck/src/pages/common/components/HOC/withRefSize.js"],"names":["React","produce","withRefSize","WrappedComponent","Component","constructor","args","importRef","name","ref","references","state","size","componentDidMount","updateSize","element","Object","entries","width","height","getBoundingClientRect","setState","draft","window","requestAnimationFrame","render","props"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,OAAT,QAAwB,MAAxB;;AAGA,MAAMC,WAAW,GAAIC,gBAAD,IAAsB;AAAA;;AAEtC,iBAAO,cAAcH,KAAK,CAACI,SAApB,CAA6B;AAEhCC,IAAAA,WAAW,CAAC,GAAGC,IAAJ,EAAS;AAChB,YAAM,GAAGA,IAAT;;AADgB,WA4BpBC,SA5BoB,GA4BR,CAAEC,IAAF,EAAQC,GAAR,KAAgB;AACxB,aAAKC,UAAL,CAAgBF,IAAhB,IAAwBC,GAAxB;AACH,OA9BmB;;AAEhB,WAAKE,KAAL,GAAW;AACPC,QAAAA,IAAI,EAAE;AADC,OAAX;AAGA,WAAKF,UAAL,GAAgB,EAAhB;AAEH;;AAEDG,IAAAA,iBAAiB,GAAG;AAChB,YAAMC,UAAU,GAAG,MAAM;AACrB,YAAIF,IAAI,GAAG,EAAX;;AACA,aAAI,IAAI,CAACJ,IAAD,EAAOO,OAAP,CAAR,IAA2BC,MAAM,CAACC,OAAP,CAAe,KAAKP,UAApB,CAA3B,EAA2D;AACvD,gBAAM;AAACQ,YAAAA,KAAD;AAAQC,YAAAA;AAAR,cAAkBJ,OAAO,CAACK,qBAAR,EAAxB;AACAR,UAAAA,IAAI,CAACJ,IAAD,CAAJ,GAAa;AACTU,YAAAA,KADS;AAETC,YAAAA;AAFS,WAAb;AAIH;;AACD,aAAKE,QAAL,CAAcpB,OAAO,CAAC,KAAKU,KAAN,EAAaW,KAAK,IAAIA,KAAK,CAACV,IAAN,GAAaA,IAAnC,CAArB;AACH,OAVD;;AAWA,UAAGW,MAAM,CAACC,qBAAV,EAAgC;AAC5BD,QAAAA,MAAM,CAACC,qBAAP,CAA6BV,UAA7B;AACH,OAFD,MAEO;AACHA,QAAAA,UAAU;AACb;AACJ;;AAMDW,IAAAA,MAAM,GAAE;AACJ,aAAO,oBAAC,gBAAD,oBAAsB,KAAKC,KAA3B;AAAkC,QAAA,IAAI,EAAE,KAAKf,KAAL,CAAWC,IAAnD;AAA0D,QAAA,SAAS,EAAE,KAAKL,SAA1E;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAP;AACH;;AApC+B,GAApC;AAuCH,CAzCD;;AA2CA,eAAeL,WAAf","sourcesContent":["import React from \"react\";\r\nimport { produce } from \"imer\"\r\n\r\n\r\nconst withRefSize = (WrappedComponent) => {\r\n\r\n    return class extends React.Component{\r\n\r\n        constructor(...args){\r\n            super(...args);\r\n            this.state={ \r\n                size: {}\r\n            }    \r\n            this.references={};\r\n\r\n        }\r\n\r\n        componentDidMount() {\r\n            const updateSize = () => {\r\n                let size = {};\r\n                for(let [name, element] of Object.entries(this.references)){\r\n                    const {width, height} = element.getBoundingClientRect();\r\n                    size[name] = {\r\n                        width,\r\n                        height\r\n                    }\r\n                }\r\n                this.setState(produce(this.state, draft => draft.size = size))\r\n            }\r\n            if(window.requestAnimationFrame){\r\n                window.requestAnimationFrame(updateSize)\r\n            } else {\r\n                updateSize();\r\n            }\r\n        }\r\n\r\n        importRef = ( name, ref) => {\r\n            this.references[name] = ref;\r\n        }\r\n\r\n        render(){\r\n            return <WrappedComponent {...this.props} size={this.state.size}  exportRef={this.importRef}/>\r\n        }\r\n    } \r\n\r\n}\r\n\r\nexport default withRefSize;"]},"metadata":{},"sourceType":"module"}