{"ast":null,"code":"import { ACTIONS } from \"./../../../actions\";\nimport STATES from \"./stateDef\";\nconst initState = {\n  recName: \"\",\n  recId: null,\n  recordingState: STATES.IDLE,\n  startTime: null,\n  tracklist: []\n};\nexport default function headerState(state = initState, action) {\n  switch (action.type) {\n    case ACTIONS.R_START_RECORDING:\n      {\n        return { ...state,\n          recordingState: STATES.INIT,\n          recName: action.recName,\n          recId: action.id,\n          startTime: new Date().getTime(),\n          tracklist: action.initTracklist\n        };\n      }\n\n    case ACTIONS.R_END_RECORDING:\n      {\n        return { ...state,\n          recordingState: STATES.IDLE,\n          recName: \"\",\n          tracklist: []\n        };\n      }\n\n    case ACTIONS.R_RECORDING:\n      {\n        return { ...state,\n          recordingState: STATES.RECORDING\n        };\n      }\n\n    case ACTIONS.R_RECORDING_FAIL:\n      {\n        return { ...state,\n          recordingState: STATES.FAIL,\n          recName: \"\",\n          tracklist: []\n        };\n      }\n    //------------\n    // case ACTIONS.R_ADD_INIT_TRACK:{\n    //     const nextState = {\n    //         ...state,\n    //         tracklist : actions.recordInitTracks,\n    //     }\n    //     return nextState\n    // }\n\n    case ACTIONS.LOAD_TRACK:\n      {\n        if (state.recordingState !== STATES.RECORDING) {\n          return state;\n        }\n\n        const nextTracklist = state.tracklist;\n        nextTracklist.push({\n          id: action.track.id,\n          channel: action.destination,\n          start: null\n        });\n        return { ...state,\n          tracklist: nextTracklist\n        };\n      }\n\n    case ACTIONS.CANCEL_CUE_AND_PLAY:\n    case ACTIONS.TOGGLE_PLAY:\n      {\n        if (state.recordingState !== STATES.RECORDING) {\n          return state;\n        }\n\n        let found = false;\n        const nextTracklist = state.tracklist.slice().reverse().map(track => {\n          if (track.destination === action.destination && !track.time && !found) {\n            track.time = new Date().getTime() - state.startTime;\n            found = true;\n          }\n\n          return track;\n        });\n        return { ...state,\n          tracklist: nextTracklist\n        };\n      }\n\n    default:\n      return state;\n  }\n}","map":{"version":3,"sources":["D:/PROJEKTY/APKI/dj-truck/src/reducers/console/recorder/recorderReducer.js"],"names":["ACTIONS","STATES","initState","recName","recId","recordingState","IDLE","startTime","tracklist","headerState","state","action","type","R_START_RECORDING","INIT","id","Date","getTime","initTracklist","R_END_RECORDING","R_RECORDING","RECORDING","R_RECORDING_FAIL","FAIL","LOAD_TRACK","nextTracklist","push","track","channel","destination","start","CANCEL_CUE_AND_PLAY","TOGGLE_PLAY","found","slice","reverse","map","time"],"mappings":"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","sourcesContent":["import { ACTIONS } from \"./../../../actions\";\r\nimport STATES from \"./stateDef\";\r\n\r\nconst initState = {\r\n    recName: \"\",\r\n    recId: null,\r\n    recordingState: STATES.IDLE,\r\n    startTime: null,\r\n    tracklist: [],\r\n}\r\n\r\nexport default function headerState(state = initState, action) {\r\n    switch (action.type) {\r\n        case ACTIONS.R_START_RECORDING: {\r\n            return {\r\n                ...state,\r\n                recordingState: STATES.INIT,\r\n                recName: action.recName,\r\n                recId: action.id,\r\n                startTime: new Date().getTime(),\r\n                tracklist : action.initTracklist\r\n            }\r\n        }\r\n\r\n        case ACTIONS.R_END_RECORDING: {\r\n            return {\r\n                ...state,\r\n                recordingState: STATES.IDLE,\r\n                recName: \"\",\r\n                tracklist: []\r\n            }\r\n        }\r\n\r\n        case ACTIONS.R_RECORDING: {\r\n            return {\r\n                ...state,\r\n                recordingState: STATES.RECORDING,\r\n            }\r\n        }\r\n\r\n        case ACTIONS.R_RECORDING_FAIL: {\r\n            return {\r\n                ...state,\r\n                recordingState: STATES.FAIL,\r\n                recName: \"\",\r\n                tracklist: []\r\n            }\r\n        }\r\n\r\n        //------------\r\n\r\n        // case ACTIONS.R_ADD_INIT_TRACK:{\r\n        //     const nextState = {\r\n        //         ...state,\r\n        //         tracklist : actions.recordInitTracks,\r\n        //     }\r\n\r\n        //     return nextState\r\n        // }\r\n\r\n        case ACTIONS.LOAD_TRACK: {\r\n            if(state.recordingState !== STATES.RECORDING){\r\n                return state;\r\n            }\r\n\r\n            const nextTracklist = state.tracklist;\r\n            nextTracklist.push({\r\n                id: action.track.id,\r\n                channel: action.destination,\r\n                start: null\r\n            })\r\n            return {\r\n                ...state,\r\n                tracklist: nextTracklist\r\n            }\r\n        }\r\n\r\n        case ACTIONS.CANCEL_CUE_AND_PLAY:\r\n        case ACTIONS.TOGGLE_PLAY:{\r\n            if(state.recordingState !== STATES.RECORDING){\r\n                return state;\r\n            }\r\n            let found = false;\r\n            const nextTracklist = state.tracklist.slice().reverse().map( track => {\r\n                if(track.destination === action.destination && !track.time && !found){\r\n                    track.time = new Date().getTime() - state.startTime;\r\n                    found = true;\r\n                }\r\n                return track;\r\n            });\r\n            return {\r\n                ...state,\r\n                tracklist: nextTracklist\r\n            }\r\n        }\r\n\r\n\r\n        default: return state;\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}