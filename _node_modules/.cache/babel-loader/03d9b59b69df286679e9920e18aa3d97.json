{"ast":null,"code":"var _jsxFileName = \"D:\\\\PROJEKTY\\\\APKI\\\\dj-truck\\\\src\\\\pages\\\\introduction\\\\Menu\\\\Menu.js\";\nimport React, { useCallback, useEffect, useMemo, useState, Fragment } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { useHistory } from \"react-router-dom\";\nimport { set } from \"lodash/object\";\nimport UUID from \"uuidjs\";\nimport \"./menu.scss\";\nimport usePath from \"../Hooks/usePath\";\nimport { forEach } from \"react-bootstrap/cjs/ElementChildren\";\n\nconst getMarkups = () => require.context('./../markups', true, /\\.*.md$/).keys();\n\nconst Menu = () => {\n  const [markups, setMarkups] = useState();\n  const [structure, setStructure] = useState();\n  const [path] = usePath();\n  const escapeNumberRegex = useMemo(() => /^\\d?\\./, []);\n  useEffect(() => {\n    setMarkups(getMarkups());\n  }, [setMarkups]);\n  useEffect(() => {\n    if (!markups) return;\n    let _structure = {};\n    markups.forEach(item => {\n      let path = item.substr(2, item.length).split(\"/\").map(part => part.replace(\".md\", \"\"));\n      set(_structure, path, item);\n    });\n    setStructure(_structure);\n  }, [markups, setStructure]);\n  const target = useCallback(path => \"/introduction/\" + path.map(slug => slug.replace(escapeNumberRegex, \"\")).join(\"/\"), []);\n  const name = useCallback(path => path.map(slug => slug.replace(escapeNumberRegex, \"\")).join('-').replace(\" \", \"-\"), []);\n  const renderList = useCallback((list, path = []) => {\n    const items = Object.entries(list).map(([key, value]) => {\n      if (typeof value === \"string\") {\n        return React.createElement(\"li\", {\n          key: UUID.genV1(),\n          className: \"menu__item menu__\" + name([...path, key]),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 46\n          },\n          __self: this\n        }, React.createElement(Link, {\n          to: target([...path, key]),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 48\n          },\n          __self: this\n        }, key.replace(escapeNumberRegex, \"\")));\n      } else if (typeof value === \"object\") {\n        return React.createElement(Fragment, {\n          key: UUID.genV1(),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 55\n          },\n          __self: this\n        }, React.createElement(\"li\", {\n          className: \"menu__item menu__item--catalog menu__\" + name([...path, key]),\n          onClick: e => {\n            e.stopPropagation();\n            e.target.closest(\"li\").classList.toggle(\"menu__item--open\");\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 56\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 61\n          },\n          __self: this\n        }, React.createElement(\"h6\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 62\n          },\n          __self: this\n        }, key.replace(escapeNumberRegex, \"\")), React.createElement(\"i\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 65\n          },\n          __self: this\n        })), renderList(value, [...path, key])));\n      }\n    });\n    return React.createElement(\"ul\", {\n      key: UUID.genV1(),\n      className: \"menu__list menu__list--depth-\" + path.length,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75\n      },\n      __self: this\n    }, items);\n  }, []);\n  const content = useMemo(() => {\n    if (!structure) return null;\n    return renderList(structure, []);\n  }, [structure]);\n  useEffect(() => {\n    let current = [];\n\n    for (let i = 0; i < path.length; i++) {\n      const selector = \"menu__\" + path.slice(0, i + 1).join(\"-\").replace(\" \", \"-\");\n      console.log(\"selector\", selector);\n      console.log(\"elelement\", document.querySelectorAll(selector));\n      current = current.concat(document.querySelectorAll(selector) || []);\n    }\n\n    console.log(current); // current.forEach( element => element.classList.add(\"menu__item--current\"));\n\n    return () => {//      current.forEach( element => element.classList.remove(\"menu__item--current\"))\n    };\n  }, [path]);\n  return React.createElement(\"aside\", {\n    className: \"introduction__menu\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104\n    },\n    __self: this\n  }, React.createElement(\"nav\", {\n    className: \"menu\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105\n    },\n    __self: this\n  }, content));\n};\n\nexport default Menu;","map":{"version":3,"sources":["D:/PROJEKTY/APKI/dj-truck/src/pages/introduction/Menu/Menu.js"],"names":["React","useCallback","useEffect","useMemo","useState","Fragment","Link","useHistory","set","UUID","usePath","forEach","getMarkups","require","context","keys","Menu","markups","setMarkups","structure","setStructure","path","escapeNumberRegex","_structure","item","substr","length","split","map","part","replace","target","slug","join","name","renderList","list","items","Object","entries","key","value","genV1","e","stopPropagation","closest","classList","toggle","content","current","i","selector","slice","console","log","document","querySelectorAll","concat"],"mappings":"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","sourcesContent":["import React, {useCallback, useEffect, useMemo, useState, Fragment} from \"react\";\r\nimport {Link} from \"react-router-dom\";\r\nimport {useHistory} from \"react-router-dom\";\r\nimport {set} from \"lodash/object\";\r\nimport UUID from \"uuidjs\";\r\nimport \"./menu.scss\"\r\nimport usePath from \"../Hooks/usePath\";\r\nimport {forEach} from \"react-bootstrap/cjs/ElementChildren\";\r\n\r\nconst getMarkups = () => require.context('./../markups', true, /\\.*.md$/).keys();\r\n\r\nconst Menu = () => {\r\n    const [markups, setMarkups] = useState();\r\n    const [structure, setStructure] = useState();\r\n    const [path] = usePath();\r\n\r\n    const escapeNumberRegex = useMemo(() => /^\\d?\\./, [])\r\n\r\n    useEffect(() => {\r\n        setMarkups(getMarkups())\r\n    }, [setMarkups])\r\n\r\n    useEffect(() => {\r\n        if (!markups) return;\r\n        let _structure = {};\r\n        markups.forEach(item => {\r\n            let path = item.substr(2, item.length).split(\"/\")\r\n                .map(part => part.replace(\".md\", \"\"))\r\n            set(_structure, path, item)\r\n        });\r\n        setStructure(_structure);\r\n    }, [markups, setStructure])\r\n\r\n    const target = useCallback(path =>\r\n        \"/introduction/\" + path.map( slug => slug.replace(escapeNumberRegex, \"\")).join(\"/\")\r\n        , [])\r\n\r\n    const name = useCallback( path =>\r\n        path.map( slug => slug.replace(escapeNumberRegex, \"\")).join('-').replace(\" \", \"-\")\r\n    , [])\r\n\r\n    const renderList = useCallback((list, path = []) => {\r\n        const items = Object.entries(list).map(([key, value]) => {\r\n            if (typeof value === \"string\") {\r\n                return (\r\n                    <li key={UUID.genV1()}\r\n                        className={\"menu__item menu__\" + name([...path, key])}>\r\n                            <Link to={target([...path, key])}>\r\n                                {key.replace(escapeNumberRegex, \"\")}\r\n                            </Link>\r\n                    </li>\r\n                )\r\n            } else if (typeof value === \"object\") {\r\n                return (\r\n                        <Fragment key={UUID.genV1()}>\r\n                            <li className={\"menu__item menu__item--catalog menu__\" + name([...path, key])}\r\n                                onClick={ e =>{\r\n                                        e.stopPropagation();\r\n                                        e.target.closest(\"li\").classList.toggle(\"menu__item--open\");\r\n                                    }}>\r\n                                <div>\r\n                                    <h6>\r\n                                        {key.replace(escapeNumberRegex, \"\")}\r\n                                    </h6>\r\n                                    <i/>\r\n                                </div>\r\n\r\n                                {renderList(value, [...path, key])}\r\n                            </li>\r\n                        </Fragment>\r\n                )\r\n            }\r\n        });\r\n        return (\r\n         <ul key={UUID.genV1()} className={\"menu__list menu__list--depth-\" + path.length}>\r\n                {items}\r\n         </ul>\r\n        )\r\n    }, [])\r\n\r\n    const content = useMemo(()=>{\r\n        if(!structure) return null;\r\n        return renderList(structure, [])\r\n    }, [structure])\r\n\r\n\r\n    useEffect(()=>{\r\n        let current = [];\r\n        for(let i= 0; i < path.length; i++){\r\n            const selector = \"menu__\" + path.slice(0, i + 1 ).join(\"-\").replace(\" \", \"-\")\r\n            console.log(\"selector\", selector);\r\n            console.log(\"elelement\", document.querySelectorAll(selector))\r\n            current = current.concat(document.querySelectorAll(selector)||[]);\r\n\r\n        }\r\n        console.log(current)\r\n       // current.forEach( element => element.classList.add(\"menu__item--current\"));\r\n        return () => {\r\n      //      current.forEach( element => element.classList.remove(\"menu__item--current\"))\r\n        }\r\n    }, [path])\r\n\r\n    return (\r\n        <aside className=\"introduction__menu\">\r\n            <nav className=\"menu\">\r\n                {content}\r\n            </nav>\r\n        </aside>\r\n    )\r\n}\r\n\r\nexport default Menu;"]},"metadata":{},"sourceType":"module"}