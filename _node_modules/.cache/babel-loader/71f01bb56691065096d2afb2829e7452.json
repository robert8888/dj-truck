{"ast":null,"code":"export function addAnimationFrame(waveSurfer){waveSurfer.drawer.progress=function(progress){var minPxDelta=1/this.params.pixelRatio;var pos=Math.round(progress*this.width)*minPxDelta;if(pos<this.lastPos||pos-this.lastPos>=minPxDelta){this.lastPos=pos;if(this.params.scrollParent&&this.params.autoCenter){var newPos=~~(this.wrapper._scrollWidth*progress);this.recenterOnPosition(newPos);}this.updateProgress(pos);}};waveSurfer.drawer._measureDimensions=function(){console.log(\"dimension measured\");this.wrapper._clientWidth=this.wrapper.clientWidth;this.wrapper._scrollWidth=this.wrapper.scrollWidth;};waveSurfer.drawer.recenterOnPosition=function(position,immediate){var scrollLeft=this.wrapper._scrollLeft;var half=~~(this.wrapper._clientWidth/2);var target=position-half;var offset=target-scrollLeft;var maxScroll=this.wrapper._scrollWidth-this.wrapper._clientWidth;if(maxScroll===0){// no need to continue if scrollbar is not there\nreturn;}// if the cursor is currently visible...\nif(!immediate&&-half<=offset&&offset<half){// we'll limit the \"re-center\" rate.\nvar rate=5;offset=Math.max(-rate,Math.min(rate,offset));target=scrollLeft+offset;}// limit target to valid range (0 to maxScroll)\ntarget=Math.max(0,Math.min(maxScroll,target));// no use attempting to scroll if we're not moving\nif(target!==scrollLeft){this.wrapper.scrollLeft=target;//this.wrapper.style.left = -target+\"px\";\nthis.wrapper._scrollLeft=target;}};}","map":{"version":3,"sources":["D:/PROJEKTY/APKI/dj-truck/src/pages/console/core/console/channels/channelBuilder/wsAnimationFrame.js"],"names":["addAnimationFrame","waveSurfer","drawer","progress","minPxDelta","params","pixelRatio","pos","Math","round","width","lastPos","scrollParent","autoCenter","newPos","wrapper","_scrollWidth","recenterOnPosition","updateProgress","_measureDimensions","console","log","_clientWidth","clientWidth","scrollWidth","position","immediate","scrollLeft","_scrollLeft","half","target","offset","maxScroll","rate","max","min"],"mappings":"AAAA,MAAO,SAASA,CAAAA,iBAAT,CAA2BC,UAA3B,CAAsC,CAMzCA,UAAU,CAACC,MAAX,CAAkBC,QAAlB,CAA6B,SAAUA,QAAV,CAAmB,CAC5C,GAAIC,CAAAA,UAAU,CAAG,EAAI,KAAKC,MAAL,CAAYC,UAAjC,CACA,GAAIC,CAAAA,GAAG,CAAGC,IAAI,CAACC,KAAL,CAAWN,QAAQ,CAAG,KAAKO,KAA3B,EAAoCN,UAA9C,CAEA,GAAIG,GAAG,CAAG,KAAKI,OAAX,EAAsBJ,GAAG,CAAG,KAAKI,OAAX,EAAsBP,UAAhD,CAA4D,CACxD,KAAKO,OAAL,CAAeJ,GAAf,CAEA,GAAI,KAAKF,MAAL,CAAYO,YAAZ,EAA4B,KAAKP,MAAL,CAAYQ,UAA5C,CAAwD,CACpD,GAAIC,CAAAA,MAAM,CAAG,CAAC,EAAE,KAAKC,OAAL,CAAaC,YAAb,CAA4Bb,QAA9B,CAAd,CACA,KAAKc,kBAAL,CAAwBH,MAAxB,EACH,CAED,KAAKI,cAAL,CAAoBX,GAApB,EACH,CACJ,CAdD,CAiBAN,UAAU,CAACC,MAAX,CAAkBiB,kBAAlB,CAAuC,UAAU,CAC7CC,OAAO,CAACC,GAAR,CAAY,oBAAZ,EACA,KAAKN,OAAL,CAAaO,YAAb,CAA4B,KAAKP,OAAL,CAAaQ,WAAzC,CACA,KAAKR,OAAL,CAAaC,YAAb,CAA4B,KAAKD,OAAL,CAAaS,WAAzC,CACH,CAJD,CAMAvB,UAAU,CAACC,MAAX,CAAkBe,kBAAlB,CAAsC,SAASQ,QAAT,CAAmBC,SAAnB,CAA8B,CAChE,GAAIC,CAAAA,UAAU,CAAG,KAAKZ,OAAL,CAAaa,WAA9B,CACA,GAAIC,CAAAA,IAAI,CAAG,CAAC,EAAE,KAAKd,OAAL,CAAaO,YAAb,CAA4B,CAA9B,CAAZ,CACA,GAAIQ,CAAAA,MAAM,CAAGL,QAAQ,CAAGI,IAAxB,CACA,GAAIE,CAAAA,MAAM,CAAGD,MAAM,CAAGH,UAAtB,CACA,GAAIK,CAAAA,SAAS,CAAG,KAAKjB,OAAL,CAAaC,YAAb,CAA4B,KAAKD,OAAL,CAAaO,YAAzD,CAEA,GAAIU,SAAS,GAAK,CAAlB,CAAqB,CACjB;AACA,OACH,CAED;AACA,GAAI,CAACN,SAAD,EAAc,CAACG,IAAD,EAASE,MAAvB,EAAiCA,MAAM,CAAGF,IAA9C,CAAoD,CAChD;AACA,GAAII,CAAAA,IAAI,CAAG,CAAX,CACAF,MAAM,CAAGvB,IAAI,CAAC0B,GAAL,CAAS,CAACD,IAAV,CAAgBzB,IAAI,CAAC2B,GAAL,CAASF,IAAT,CAAeF,MAAf,CAAhB,CAAT,CACAD,MAAM,CAAGH,UAAU,CAAGI,MAAtB,CACH,CAED;AACAD,MAAM,CAAGtB,IAAI,CAAC0B,GAAL,CAAS,CAAT,CAAY1B,IAAI,CAAC2B,GAAL,CAASH,SAAT,CAAoBF,MAApB,CAAZ,CAAT,CACA;AACA,GAAIA,MAAM,GAAKH,UAAf,CAA2B,CACvB,KAAKZ,OAAL,CAAaY,UAAb,CAA0BG,MAA1B,CACF;AACE,KAAKf,OAAL,CAAaa,WAAb,CAA2BE,MAA3B,CACH,CAEJ,CA7BD,CA8BH","sourcesContent":["export function addAnimationFrame(waveSurfer){\r\n\r\n\r\n\r\n    \r\n\r\n    waveSurfer.drawer.progress = function (progress){\r\n        var minPxDelta = 1 / this.params.pixelRatio;\r\n        var pos = Math.round(progress * this.width) * minPxDelta;\r\n\r\n        if (pos < this.lastPos || pos - this.lastPos >= minPxDelta) {\r\n            this.lastPos = pos;\r\n\r\n            if (this.params.scrollParent && this.params.autoCenter) {\r\n                var newPos = ~~(this.wrapper._scrollWidth * progress);\r\n                this.recenterOnPosition(newPos);\r\n            }\r\n\r\n            this.updateProgress(pos);\r\n        }\r\n    }\r\n\r\n\r\n    waveSurfer.drawer._measureDimensions = function(){\r\n        console.log(\"dimension measured\")\r\n        this.wrapper._clientWidth = this.wrapper.clientWidth;\r\n        this.wrapper._scrollWidth = this.wrapper.scrollWidth;\r\n    }\r\n\r\n    waveSurfer.drawer.recenterOnPosition= function(position, immediate) {\r\n        var scrollLeft = this.wrapper._scrollLeft;\r\n        var half = ~~(this.wrapper._clientWidth / 2);\r\n        var target = position - half;\r\n        var offset = target - scrollLeft;\r\n        var maxScroll = this.wrapper._scrollWidth - this.wrapper._clientWidth;\r\n\r\n        if (maxScroll === 0) {\r\n            // no need to continue if scrollbar is not there\r\n            return;\r\n        }\r\n\r\n        // if the cursor is currently visible...\r\n        if (!immediate && -half <= offset && offset < half) {\r\n            // we'll limit the \"re-center\" rate.\r\n            var rate = 5;\r\n            offset = Math.max(-rate, Math.min(rate, offset));\r\n            target = scrollLeft + offset;\r\n        }\r\n\r\n        // limit target to valid range (0 to maxScroll)\r\n        target = Math.max(0, Math.min(maxScroll, target));\r\n        // no use attempting to scroll if we're not moving\r\n        if (target !== scrollLeft) {\r\n            this.wrapper.scrollLeft = target;\r\n          //this.wrapper.style.left = -target+\"px\";\r\n            this.wrapper._scrollLeft = target;\r\n        }\r\n\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}