{"ast":null,"code":"import { deleteTrack, ACTIONS } from \"../../actions\";\nimport { takeEvery, select, put } from \"redux-saga/effects\";\nimport { getApi } from \"./../../apis/apiProvider\";\nimport { showLoading, hideLoading } from 'react-redux-loading-bar';\nexport default function* deleteTrackRequestSaga() {\n  yield takeEvery(ACTIONS.PL_DELETE_TRACK_REQUEST, handel);\n}\n\nconst getToken = state => state.user.token;\n\nfunction* handel(action) {\n  const token = yield select(getToken);\n\n  if (!token) {\n    return yield put(deleteTrack(action.index));\n  }\n\n  try {\n    yield put(showLoading());\n    const {\n      callQuery,\n      queries\n    } = getApi(\"UserAssets\");\n    let res = yield callQuery(queries.deleteQl.deleteTrack(action.id), token);\n\n    if (!res.errors && res.data.deleteTrack) {\n      yield put(deleteTrack(action.index));\n    } else {\n      throw new Error(JSON.stringify(res.errors));\n    }\n  } catch (err) {\n    console.log(\"can't delete track in database, problem with api call\");\n    console.log(err.message);\n  } finally {\n    yield put(hideLoading());\n  }\n}","map":{"version":3,"sources":["D:/PROJEKTY/APKI/dj-truck/src/sagas/playlists/reqDeleteTrackSaga.js"],"names":["deleteTrack","ACTIONS","takeEvery","select","put","getApi","showLoading","hideLoading","deleteTrackRequestSaga","PL_DELETE_TRACK_REQUEST","handel","getToken","state","user","token","action","index","callQuery","queries","res","deleteQl","id","errors","data","Error","JSON","stringify","err","console","log","message"],"mappings":"AAAA,SAASA,WAAT,EAAsBC,OAAtB,QAAqC,eAArC;AACA,SAASC,SAAT,EAAoBC,MAApB,EAA4BC,GAA5B,QAAuC,oBAAvC;AACA,SAASC,MAAT,QAAuB,0BAAvB;AACA,SAASC,WAAT,EAAsBC,WAAtB,QAAyC,yBAAzC;AAGA,eAAe,UAAUC,sBAAV,GAAmC;AAC9C,QAAMN,SAAS,CAACD,OAAO,CAACQ,uBAAT,EAAkCC,MAAlC,CAAf;AACH;;AAED,MAAMC,QAAQ,GAAGC,KAAK,IAAIA,KAAK,CAACC,IAAN,CAAWC,KAArC;;AAEA,UAAUJ,MAAV,CAAiBK,MAAjB,EAAyB;AACrB,QAAMD,KAAK,GAAG,MAAMX,MAAM,CAACQ,QAAD,CAA1B;;AACA,MAAI,CAACG,KAAL,EAAY;AACR,WAAO,MAAMV,GAAG,CAACJ,WAAW,CAACe,MAAM,CAACC,KAAR,CAAZ,CAAhB;AACH;;AACD,MAAI;AACA,UAAMZ,GAAG,CAACE,WAAW,EAAZ,CAAT;AACA,UAAM;AAAEW,MAAAA,SAAF;AAAaC,MAAAA;AAAb,QAAyBb,MAAM,CAAC,YAAD,CAArC;AACA,QAAIc,GAAG,GAAG,MAAMF,SAAS,CAACC,OAAO,CAACE,QAAR,CAAiBpB,WAAjB,CAA6Be,MAAM,CAACM,EAApC,CAAD,EAA0CP,KAA1C,CAAzB;;AACA,QAAI,CAACK,GAAG,CAACG,MAAL,IAAeH,GAAG,CAACI,IAAJ,CAASvB,WAA5B,EAAyC;AACrC,YAAMI,GAAG,CAACJ,WAAW,CAACe,MAAM,CAACC,KAAR,CAAZ,CAAT;AACH,KAFD,MAEO;AACH,YAAM,IAAIQ,KAAJ,CAAUC,IAAI,CAACC,SAAL,CAAeP,GAAG,CAACG,MAAnB,CAAV,CAAN;AACH;AAEJ,GAVD,CAUE,OAAOK,GAAP,EAAY;AACVC,IAAAA,OAAO,CAACC,GAAR,CAAY,uDAAZ;AACAD,IAAAA,OAAO,CAACC,GAAR,CAAYF,GAAG,CAACG,OAAhB;AACH,GAbD,SAaU;AACN,UAAM1B,GAAG,CAACG,WAAW,EAAZ,CAAT;AACH;AACJ","sourcesContent":["import { deleteTrack, ACTIONS } from \"../../actions\";\r\nimport { takeEvery, select, put } from \"redux-saga/effects\"\r\nimport { getApi } from \"./../../apis/apiProvider\";\r\nimport { showLoading, hideLoading } from 'react-redux-loading-bar'\r\n\r\n\r\nexport default function* deleteTrackRequestSaga() {\r\n    yield takeEvery(ACTIONS.PL_DELETE_TRACK_REQUEST, handel)\r\n}\r\n\r\nconst getToken = state => state.user.token;\r\n\r\nfunction* handel(action) {\r\n    const token = yield select(getToken);\r\n    if (!token) {\r\n        return yield put(deleteTrack(action.index));\r\n    }\r\n    try {\r\n        yield put(showLoading());\r\n        const { callQuery, queries } = getApi(\"UserAssets\");\r\n        let res = yield callQuery(queries.deleteQl.deleteTrack(action.id), token);\r\n        if (!res.errors && res.data.deleteTrack) {\r\n            yield put(deleteTrack(action.index));\r\n        } else {\r\n            throw new Error(JSON.stringify(res.errors))\r\n        }\r\n\r\n    } catch (err) {\r\n        console.log(\"can't delete track in database, problem with api call\");\r\n        console.log(err.message);\r\n    } finally {\r\n        yield put(hideLoading())\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}