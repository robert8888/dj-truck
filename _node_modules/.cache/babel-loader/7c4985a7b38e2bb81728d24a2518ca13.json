{"ast":null,"code":"import _defineProperty from\"D:\\\\PROJEKTY\\\\APKI\\\\dj-truck\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _objectSpread from\"D:\\\\PROJEKTY\\\\APKI\\\\dj-truck\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import{ACTIONS}from\"./../../actions\";import{produce}from\"imer\";var channelNumber=2;var initState=function initState(){var channel={dryWet:0,currentEffect:null,effects:{/*reverb: {\r\n                decay: 5\r\n            },\r\n            echo: {\r\n                time: 4\r\n            }*/}};var state={lastChange:{},effects:{},channels:{}};for(var i=1;i<=channelNumber;i++){state.channels[i]=channel;}return state;};var nextParameterState=function nextParameterState(state,channel,effect,param){return produce(state,function(nextState){var _state$channels$chann;nextState.lastChange={sygnature:\"#EffectParam/\"+channel+\"/\"+effect+\"/\"+Object.keys(param).join(\"/\"),channel:channel,effect:effect,param:param};var effectParam=(state===null||state===void 0?void 0:(_state$channels$chann=state.channels[channel])===null||_state$channels$chann===void 0?void 0:_state$channels$chann.effects[effect])||{};nextState.channels[channel].effects[effect]=_objectSpread({},effectParam,{},param);});};export default function effectorReducer(){var state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:initState();var action=arguments.length>1?arguments[1]:undefined;switch(action.type){case ACTIONS.SET_AVAILABLE_EFFECTS:{return produce(state,function(nextState){return nextState.effects=action.effects;});}case ACTIONS.SET_EFFECT_PARAMETER:{return nextParameterState(state,action.channel,action.effect,_defineProperty({},action.name,action.value));}case ACTIONS.SET_CURRENT_EFFECT:{return produce(state,function(nextState){nextState.channels[action.channel].currentEffect=action.effect;nextState.lastChange={sygnature:\"#EffectChange/\"+action.channel,channel:action.channel,effect:action.effect};});}case ACTIONS.SET_DRY_WET:{return produce(state,function(nextState){nextState.channels[action.channel].dryWet=action.value;nextState.lastChange={sygnature:\"#DryWetChange/\"+action.channel,channel:action.channel,value:action.value};});}default:return state;}}","map":{"version":3,"sources":["D:/PROJEKTY/APKI/dj-truck/src/reducers/console/effectorReducer.js"],"names":["ACTIONS","produce","channelNumber","initState","channel","dryWet","currentEffect","effects","state","lastChange","channels","i","nextParameterState","effect","param","nextState","sygnature","Object","keys","join","effectParam","effectorReducer","action","type","SET_AVAILABLE_EFFECTS","SET_EFFECT_PARAMETER","name","value","SET_CURRENT_EFFECT","SET_DRY_WET"],"mappings":"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","sourcesContent":["import { ACTIONS } from \"./../../actions\";\r\nimport { produce } from \"imer\";\r\n\r\n\r\n\r\nconst channelNumber = 2;\r\nconst initState = () => {\r\n    const channel = {\r\n        dryWet: 0,\r\n        currentEffect: null,\r\n        effects: {\r\n            /*reverb: {\r\n                decay: 5\r\n            },\r\n            echo: {\r\n                time: 4\r\n            }*/\r\n        }\r\n    };\r\n\r\n    const state = {\r\n        lastChange: {},\r\n        effects: {},\r\n        channels: {},\r\n    }\r\n\r\n    for(let i = 1; i <= channelNumber; i++){\r\n        state.channels[i] = channel;\r\n    }\r\n\r\n    return state;\r\n}\r\n\r\nconst nextParameterState = (state, channel, effect, param) => {\r\n    return produce(state, nextState => {\r\n        nextState.lastChange = {\r\n            sygnature : \"#EffectParam/\" + channel + \"/\" + effect + \"/\" + Object.keys(param).join(\"/\"),\r\n            channel,\r\n            effect, \r\n            param : param,\r\n        }\r\n\r\n        const effectParam = state?.channels[channel]?.effects[effect] || {};\r\n        nextState.channels[channel].effects[effect] = { ...effectParam, ...param };\r\n    })\r\n}\r\n\r\nexport default function effectorReducer(state = initState(), action) {\r\n    switch (action.type) {\r\n        case ACTIONS.SET_AVAILABLE_EFFECTS: {\r\n            return produce(state, nextState => nextState.effects = action.effects)\r\n        }\r\n\r\n        case ACTIONS.SET_EFFECT_PARAMETER: {\r\n            return nextParameterState(state, action.channel, action.effect, { [action.name]: action.value })\r\n        }\r\n\r\n        case ACTIONS.SET_CURRENT_EFFECT : {\r\n            return produce(state, nextState =>{\r\n                nextState.channels[action.channel].currentEffect = action.effect;\r\n\r\n                nextState.lastChange = {\r\n                    sygnature : \"#EffectChange/\"+action.channel,\r\n                    channel : action.channel,\r\n                    effect : action.effect,\r\n                }\r\n            })\r\n        }\r\n        \r\n        case ACTIONS.SET_DRY_WET : {\r\n            return produce(state, nextState =>{\r\n                nextState.channels[action.channel].dryWet= action.value;\r\n\r\n                nextState.lastChange = {\r\n                    sygnature : \"#DryWetChange/\"+action.channel,\r\n                    channel : action.channel,\r\n                    value : action.value,\r\n                }\r\n            })\r\n        }\r\n\r\n        default: return state;\r\n    }\r\n}\r\n\r\n"]},"metadata":{},"sourceType":"module"}