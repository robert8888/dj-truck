{"ast":null,"code":"import store from \"./../../../../store\";\nimport Channels from \"./channels/channels\";\nimport Effector from \"./effector/effector\";\nimport Mixer from \"./mixer/mixer\";\nimport Observer from \"./observer/observer\";\nimport STATUS from \"./observer/STATUS\";\nexport default class Console {\n  constructor() {\n    store.subscribe(this.handleChange.bind(this));\n    this.dispatch = store.dispatch;\n    this.observer = new Observer(store);\n    this.channels = new Channels();\n    this.mixer = new Mixer(this.channels);\n    this.effector = new Effector(this.mixer.mainAudioContext);\n    this.mixer.connect(this.effector);\n  }\n\n  static Get() {\n    if (!Console.instance) {\n      let consol = new Console();\n      Console.instance = consol;\n      return Console.instance;\n    } else {\n      return Console.instance;\n    }\n  }\n\n  getMixerChannelInterface(channelName) {\n    return this.mixer.getChannelInterface(channelName);\n  }\n\n  getMixerMasterInterface() {\n    return this.mixer.getMasteringInterface();\n  }\n\n  getChannelInterface(channelName) {\n    return this.channels.getChannelInterface(channelName);\n  }\n\n  createChannel(channelName, ...args) {\n    const buildChannel = () => {\n      args.push(this.mixer.mainAudioContext);\n      this.channels.createChannel(channelName, ...args);\n      this.mixer.setUpChannelsAudioNodes(channelName);\n    };\n\n    setTimeout(buildChannel.bind(this), 0);\n  }\n\n  handleChange() {\n    const storeChanges = this.observer.check();\n\n    for (let diff of storeChanges) {\n      this.callAction(diff);\n    }\n  }\n\n  callAction(diff) {\n    switch (diff.status) {\n      //-- PLAY BACK\n      case STATUS.TRACK_LOADED:\n        {\n          this.channels.loadTrack(diff.channel, diff.currentValue);\n          break;\n        }\n\n      case STATUS.TOGGLE_PLAY:\n        {\n          this.channels.togglePlay(diff.channel, diff.currentValue);\n          break;\n        }\n\n      case STATUS.TOGGLE_CUE:\n        {\n          this.channels.toggleCue(diff.channel, diff.currentValue);\n          break;\n        }\n      //----BPM AND SYNC\n\n      case STATUS.BPM_AND_OFFSET_READY:\n        {\n          this.channels.createBars(diff.channel, diff.currentValue);\n          break;\n        }\n\n      case STATUS.PITCH_CHANGE:\n        {\n          this.channels.adjustPitch(diff.channel, diff.currentValue);\n          break;\n        }\n\n      case STATUS.SYNC_ACTIVATE:\n        {\n          this.channels.sync(diff.channel);\n          break;\n        }\n      //---- MIXER \n\n      case STATUS.GAIN_CHANGE:\n        {\n          this.mixer.setGain(diff.channel, diff.currentValue);\n          break;\n        }\n\n      case STATUS.EQ_LOW_CHANGE:\n        {\n          this.mixer.setEqLow(diff.channel, diff.currentValue);\n          break;\n        }\n\n      case STATUS.EQ_MID_CHANGE:\n        {\n          this.mixer.setEqMid(diff.channel, diff.currentValue);\n          break;\n        }\n\n      case STATUS.EQ_HI_CHANGE:\n        {\n          this.mixer.setEqHigh(diff.channel, diff.currentValue);\n          break;\n        }\n\n      case STATUS.FILTER_CHANGE:\n        {\n          this.mixer.setFilterFreq(diff.channel, diff.currentValue);\n          break;\n        }\n\n      case STATUS.FILTER_RES_CHANGE:\n        {\n          this.mixer.setFiterResonas(diff.channel, diff.currentValue);\n          break;\n        }\n\n      case STATUS.SEND_CHANGE:\n        {\n          this.mixer.setSend(diff.channel, diff.send, diff.currentValue);\n          break;\n        }\n\n      case STATUS.FADER_CHANGE:\n        {\n          this.mixer.setFader(diff.currentValue);\n          break;\n        }\n\n      case STATUS.CUE_CHANGE:\n        {\n          this.mixer.setCue(diff.channel, diff.currentValue);\n          break;\n        }\n      // -- LOOPER\n\n      case STATUS.LOOP_CHANGE:\n        {\n          if (diff.currentValue.state) {\n            this.channels.makeLoop(diff.channel, diff.currentValue);\n          } else {\n            this.channels.endLoop(diff.channel);\n          }\n\n          break;\n        }\n\n      case STATUS.LOOP_LENGTH_CHANGE:\n        {\n          this.channels.updateLoop(diff.channel, diff.currentValue);\n          break;\n        }\n      // -- EFFECTOR \n\n      case STATUS.DRY_WET_CHANGED:\n        {\n          this.effector.setDryWet(diff.channel, diff.currentValue);\n          break;\n        }\n\n      case STATUS.CURRENT_EFFECT_CHANGED:\n        {\n          this.effector.connectEffect(diff.channel, diff.currentValue);\n          break;\n        }\n\n      case STATUS.EFFECT_PARAM_CHANGED:\n        {\n          this.effector.setParam(diff.channel, diff.effect, diff.param);\n          break;\n        }\n      //------ MASTERING\n\n      case STATUS.MASTERING:\n        {\n          this.mixer.mastering.setMasterParam(diff.subStatus, diff.value);\n          break;\n        }\n      //----- Recorder \n\n      case STATUS.RECORDER:\n        {\n          this.mixer.recorder.action(diff.subStatus, diff.recParam);\n          break;\n        }\n\n      default:\n        return;\n    }\n  }\n\n}","map":{"version":3,"sources":["D:/PROJEKTY/APKI/dj-truck/src/pages/console/core/console/console.js"],"names":["store","Channels","Effector","Mixer","Observer","STATUS","Console","constructor","subscribe","handleChange","bind","dispatch","observer","channels","mixer","effector","mainAudioContext","connect","Get","instance","consol","getMixerChannelInterface","channelName","getChannelInterface","getMixerMasterInterface","getMasteringInterface","createChannel","args","buildChannel","push","setUpChannelsAudioNodes","setTimeout","storeChanges","check","diff","callAction","status","TRACK_LOADED","loadTrack","channel","currentValue","TOGGLE_PLAY","togglePlay","TOGGLE_CUE","toggleCue","BPM_AND_OFFSET_READY","createBars","PITCH_CHANGE","adjustPitch","SYNC_ACTIVATE","sync","GAIN_CHANGE","setGain","EQ_LOW_CHANGE","setEqLow","EQ_MID_CHANGE","setEqMid","EQ_HI_CHANGE","setEqHigh","FILTER_CHANGE","setFilterFreq","FILTER_RES_CHANGE","setFiterResonas","SEND_CHANGE","setSend","send","FADER_CHANGE","setFader","CUE_CHANGE","setCue","LOOP_CHANGE","state","makeLoop","endLoop","LOOP_LENGTH_CHANGE","updateLoop","DRY_WET_CHANGED","setDryWet","CURRENT_EFFECT_CHANGED","connectEffect","EFFECT_PARAM_CHANGED","setParam","effect","param","MASTERING","mastering","setMasterParam","subStatus","value","RECORDER","recorder","action","recParam"],"mappings":"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","sourcesContent":["import store from \"./../../../../store\";\r\nimport Channels from \"./channels/channels\";\r\nimport Effector from \"./effector/effector\";\r\nimport Mixer from \"./mixer/mixer\";\r\nimport Observer from \"./observer/observer\";\r\nimport STATUS from \"./observer/STATUS\";\r\n\r\n\r\n\r\nexport default class Console{\r\n\r\n    constructor(){\r\n        store.subscribe(this.handleChange.bind(this));\r\n        this.dispatch = store.dispatch;\r\n        this.observer = new Observer(store);\r\n\r\n        this.channels = new Channels();\r\n        this.mixer = new Mixer(this.channels);\r\n        this.effector = new Effector(this.mixer.mainAudioContext);\r\n        this.mixer.connect(this.effector);\r\n\r\n    }\r\n\r\n\r\n    static Get(){\r\n        if(!Console.instance){\r\n            let consol = new Console();\r\n            Console.instance = consol;\r\n            return Console.instance;\r\n        } else {\r\n            return Console.instance;\r\n        }\r\n    }\r\n\r\n    getMixerChannelInterface(channelName){\r\n        return this.mixer.getChannelInterface(channelName);\r\n    }\r\n\r\n    getMixerMasterInterface(){\r\n        return this.mixer.getMasteringInterface()\r\n    }\r\n\r\n    getChannelInterface(channelName){\r\n        return this.channels.getChannelInterface(channelName);\r\n    }\r\n\r\n \r\n\r\n    createChannel(channelName, ...args){\r\n        const buildChannel = () => {\r\n            args.push(this.mixer.mainAudioContext);\r\n            this.channels.createChannel(channelName, ...args);\r\n            this.mixer.setUpChannelsAudioNodes(channelName);\r\n        }\r\n    \r\n        setTimeout(buildChannel.bind(this), 0);\r\n\r\n    }\r\n\r\n    handleChange(){\r\n        const storeChanges = this.observer.check();\r\n        for(let diff of storeChanges){\r\n            this.callAction(diff);\r\n        }\r\n    }\r\n\r\n    callAction(diff){\r\n\r\n        switch(diff.status){\r\n            //-- PLAY BACK\r\n\r\n            case STATUS.TRACK_LOADED : {\r\n                this.channels.loadTrack(diff.channel, diff.currentValue);\r\n                break;\r\n            }\r\n\r\n            case STATUS.TOGGLE_PLAY : {\r\n                this.channels.togglePlay(diff.channel, diff.currentValue);\r\n                break;\r\n            }\r\n            case STATUS.TOGGLE_CUE : {\r\n                this.channels.toggleCue(diff.channel, diff.currentValue)\r\n                break;\r\n            }\r\n\r\n            //----BPM AND SYNC\r\n            case STATUS.BPM_AND_OFFSET_READY : {\r\n                this.channels.createBars(diff.channel, diff.currentValue);\r\n                break;\r\n            }\r\n            \r\n            case STATUS.PITCH_CHANGE : {\r\n                this.channels.adjustPitch(diff.channel, diff.currentValue)\r\n                break;\r\n            }\r\n\r\n            case STATUS.SYNC_ACTIVATE : {\r\n                this.channels.sync(diff.channel);\r\n                break;\r\n            }\r\n\r\n            //---- MIXER \r\n            case STATUS.GAIN_CHANGE : {\r\n                this.mixer.setGain(diff.channel, diff.currentValue);\r\n                break;\r\n            }\r\n            case STATUS.EQ_LOW_CHANGE : {\r\n                this.mixer.setEqLow(diff.channel, diff.currentValue);\r\n                break;\r\n            }\r\n            case STATUS.EQ_MID_CHANGE : {\r\n                this.mixer.setEqMid(diff.channel, diff.currentValue);\r\n                break;\r\n            }\r\n            case STATUS.EQ_HI_CHANGE : {\r\n                this.mixer.setEqHigh(diff.channel, diff.currentValue);\r\n                break;\r\n            }\r\n\r\n            case STATUS.FILTER_CHANGE : {\r\n                this.mixer.setFilterFreq(diff.channel, diff.currentValue);\r\n                break;\r\n            }\r\n\r\n            case STATUS.FILTER_RES_CHANGE : {\r\n                this.mixer.setFiterResonas(diff.channel, diff.currentValue);\r\n                break;\r\n            }\r\n\r\n            case STATUS.SEND_CHANGE : {\r\n                this.mixer.setSend(diff.channel, diff.send, diff.currentValue)\r\n                break;\r\n            }\r\n\r\n            case STATUS.FADER_CHANGE : {\r\n                this.mixer.setFader(diff.currentValue);\r\n                break;\r\n            }\r\n\r\n            case STATUS.CUE_CHANGE : {\r\n                this.mixer.setCue(diff.channel, diff.currentValue)\r\n                break;\r\n            }\r\n\r\n\r\n            // -- LOOPER\r\n            case STATUS.LOOP_CHANGE : {\r\n                if(diff.currentValue.state){\r\n                    this.channels.makeLoop(diff.channel, diff.currentValue);\r\n                } else {\r\n                    this.channels.endLoop(diff.channel);\r\n                }\r\n                break;\r\n            }\r\n\r\n            case STATUS.LOOP_LENGTH_CHANGE : {\r\n                this.channels.updateLoop(diff.channel, diff.currentValue);\r\n                break;\r\n            }\r\n\r\n\r\n            // -- EFFECTOR \r\n            case STATUS.DRY_WET_CHANGED : {\r\n                this.effector.setDryWet(diff.channel, diff.currentValue);\r\n                break;\r\n            }\r\n\r\n            case STATUS.CURRENT_EFFECT_CHANGED: {\r\n                this.effector.connectEffect(diff.channel, diff.currentValue)\r\n                break;\r\n            }\r\n\r\n            case STATUS.EFFECT_PARAM_CHANGED : {\r\n                this.effector.setParam(diff.channel, diff.effect, diff.param)\r\n                break;\r\n            }\r\n\r\n            //------ MASTERING\r\n\r\n            case STATUS.MASTERING : {\r\n                this.mixer.mastering.setMasterParam(diff.subStatus, diff.value);\r\n                break;\r\n            }\r\n\r\n            //----- Recorder \r\n            case STATUS.RECORDER : {\r\n                this.mixer.recorder.action(diff.subStatus, diff.recParam);\r\n                break;\r\n            }\r\n\r\n            default : return; \r\n        }\r\n    }\r\n\r\n}"]},"metadata":{},"sourceType":"module"}