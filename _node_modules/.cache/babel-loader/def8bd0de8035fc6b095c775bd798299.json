{"ast":null,"code":"import { togglePlay, setTimeLeft, setCuePoint } from \"./../../actions/actions\";\nexport default class Channels {\n  constructor(dispatch) {\n    this.dispatch = dispatch;\n    this.channels = {\n      A: null,\n      B: null\n    };\n  }\n\n  setChannel(channelName, player) {\n    this.channels[channelName] = player;\n  }\n\n  getChannel(channelName) {\n    return this.channels[channelName];\n  } //--------------------------------------------\n\n\n  togglePlay(channelName, currentValue) {\n    if (currentValue) {\n      this.channels[channelName].pause();\n    } else {\n      this.channels[channelName].play();\n    }\n  }\n\n  toggleCue(channelName, currentValue) {\n    const player = this.channels[channelName];\n    const isPaused = store.getState().console.channel[channelName].playBackState.paused;\n\n    if (!currentValue && isPaused) {\n      // back to cue point and pause\n      let cuePoint = store.getState().console.channel[channelName].playBackState.cuePoint; //in seconds\n      //seek to\n\n      player.pause();\n      player.backend.seekTo(cuePoint);\n      player.drawer.progress(cuePoint / player.getDuration());\n      player.drawer.recenter(cuePoint / player.getDuration());\n    } else if (!currentValue) {\n      //Cancel cue and play\n      if (!player.isPlaying()) {\n        player.play();\n      }\n    } else {\n      const cuePoint = this.channels[channelName].getCurrentTime();\n      this.channels[channelName].play();\n      this.dispatch(setCuePoint(channelName, cuePoint)); // in float seconds\n    }\n  }\n\n  adjustPitch(channelName, currentValue) {\n    this.channels[channelName].setPlaybackRate(1 + currentValue / 100);\n  }\n\n}","map":{"version":3,"sources":["D:/PROJEKTY/APKI/DjTruck/djtruck/src/core/console/channels/channels.js"],"names":["togglePlay","setTimeLeft","setCuePoint","Channels","constructor","dispatch","channels","A","B","setChannel","channelName","player","getChannel","currentValue","pause","play","toggleCue","isPaused","store","getState","console","channel","playBackState","paused","cuePoint","backend","seekTo","drawer","progress","getDuration","recenter","isPlaying","getCurrentTime","adjustPitch","setPlaybackRate"],"mappings":"AAAA,SAASA,UAAT,EACIC,WADJ,EAEIC,WAFJ,QAGS,yBAHT;AAKA,eAAe,MAAMC,QAAN,CAAc;AACzBC,EAAAA,WAAW,CAACC,QAAD,EAAU;AACjB,SAAKA,QAAL,GAAgBA,QAAhB;AACA,SAAKC,QAAL,GAAgB;AACZC,MAAAA,CAAC,EAAE,IADS;AAEZC,MAAAA,CAAC,EAAE;AAFS,KAAhB;AAIH;;AAEDC,EAAAA,UAAU,CAACC,WAAD,EAAcC,MAAd,EAAqB;AAC3B,SAAKL,QAAL,CAAcI,WAAd,IAA6BC,MAA7B;AACH;;AAEDC,EAAAA,UAAU,CAACF,WAAD,EAAa;AACnB,WAAO,KAAKJ,QAAL,CAAcI,WAAd,CAAP;AACH,GAfwB,CAiBzB;;;AACAV,EAAAA,UAAU,CAACU,WAAD,EAAcG,YAAd,EAA2B;AACjC,QAAGA,YAAH,EAAgB;AACZ,WAAKP,QAAL,CAAcI,WAAd,EAA2BI,KAA3B;AACH,KAFD,MAEO;AACH,WAAKR,QAAL,CAAcI,WAAd,EAA2BK,IAA3B;AACH;AACJ;;AAEDC,EAAAA,SAAS,CAACN,WAAD,EAAcG,YAAd,EAA2B;AAChC,UAAMF,MAAM,GAAG,KAAKL,QAAL,CAAcI,WAAd,CAAf;AACA,UAAMO,QAAQ,GAAGC,KAAK,CAACC,QAAN,GAAiBC,OAAjB,CAAyBC,OAAzB,CAAiCX,WAAjC,EAA8CY,aAA9C,CAA4DC,MAA7E;;AACA,QAAG,CAACV,YAAD,IAAiBI,QAApB,EAA6B;AAAE;AAC3B,UAAIO,QAAQ,GAAIN,KAAK,CAACC,QAAN,GAAiBC,OAAjB,CAAyBC,OAAzB,CAAiCX,WAAjC,EAA8CY,aAA9C,CAA4DE,QAA5E,CADyB,CAC6D;AACtF;;AACAb,MAAAA,MAAM,CAACG,KAAP;AACAH,MAAAA,MAAM,CAACc,OAAP,CAAeC,MAAf,CAAsBF,QAAtB;AACAb,MAAAA,MAAM,CAACgB,MAAP,CAAcC,QAAd,CAAuBJ,QAAQ,GAAGb,MAAM,CAACkB,WAAP,EAAlC;AACAlB,MAAAA,MAAM,CAACgB,MAAP,CAAcG,QAAd,CAAuBN,QAAQ,GAAGb,MAAM,CAACkB,WAAP,EAAlC;AACH,KAPD,MAOO,IAAG,CAAChB,YAAJ,EAAkB;AAAE;AACvB,UAAG,CAACF,MAAM,CAACoB,SAAP,EAAJ,EAAuB;AACnBpB,QAAAA,MAAM,CAACI,IAAP;AACH;AACJ,KAJM,MAKF;AACD,YAAMS,QAAQ,GAAG,KAAKlB,QAAL,CAAcI,WAAd,EAA2BsB,cAA3B,EAAjB;AACA,WAAK1B,QAAL,CAAcI,WAAd,EAA2BK,IAA3B;AACA,WAAKV,QAAL,CAAcH,WAAW,CAACQ,WAAD,EAAcc,QAAd,CAAzB,EAHC,CAGiD;AACrD;AACJ;;AAEDS,EAAAA,WAAW,CAACvB,WAAD,EAAcG,YAAd,EAA2B;AAClC,SAAKP,QAAL,CAAcI,WAAd,EAA2BwB,eAA3B,CAA4C,IAAIrB,YAAY,GAAC,GAA7D;AACH;;AAlDwB","sourcesContent":["import { togglePlay,\r\n    setTimeLeft,\r\n    setCuePoint, }\r\n    from \"./../../actions/actions\";\r\n\r\nexport default class Channels{\r\n    constructor(dispatch){\r\n        this.dispatch = dispatch;\r\n        this.channels = {\r\n            A: null, \r\n            B: null\r\n        }\r\n    }\r\n\r\n    setChannel(channelName, player){\r\n        this.channels[channelName] = player;\r\n    }\r\n\r\n    getChannel(channelName){\r\n        return this.channels[channelName];\r\n    }\r\n    \r\n    //--------------------------------------------\r\n    togglePlay(channelName, currentValue){\r\n        if(currentValue){\r\n            this.channels[channelName].pause();\r\n        } else {\r\n            this.channels[channelName].play();\r\n        }\r\n    }\r\n\r\n    toggleCue(channelName, currentValue){\r\n        const player = this.channels[channelName]\r\n        const isPaused = store.getState().console.channel[channelName].playBackState.paused;\r\n        if(!currentValue && isPaused){ // back to cue point and pause\r\n            let cuePoint =  store.getState().console.channel[channelName].playBackState.cuePoint; //in seconds\r\n            //seek to\r\n            player.pause();\r\n            player.backend.seekTo(cuePoint);\r\n            player.drawer.progress(cuePoint / player.getDuration());\r\n            player.drawer.recenter(cuePoint / player.getDuration());\r\n        } else if(!currentValue) { //Cancel cue and play\r\n            if(!player.isPlaying()){\r\n                player.play();\r\n            }\r\n        }\r\n        else {\r\n            const cuePoint = this.channels[channelName].getCurrentTime();\r\n            this.channels[channelName].play();\r\n            this.dispatch(setCuePoint(channelName, cuePoint)) // in float seconds\r\n        }\r\n    }\r\n\r\n    adjustPitch(channelName, currentValue){\r\n        this.channels[channelName].setPlaybackRate( 1 + currentValue/100 )\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}