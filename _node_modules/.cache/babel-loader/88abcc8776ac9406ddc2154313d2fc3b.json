{"ast":null,"code":"var _jsxFileName = \"D:\\\\PROJEKTY\\\\APKI\\\\dj-truck\\\\src\\\\pages\\\\common\\\\components\\\\Carousel-slider\\\\Slider.js\";\nimport React, { useCallback, useEffect, useRef, useState } from \"react\";\nimport UUID from \"uuidjs\";\nimport style from \"./slider.scss\";\n\nconst Slider = ({\n  slides: initSlides,\n  next: nextHandle,\n  prev: prevHandle,\n  minSlideWidth = style.minSlideWidth\n}) => {\n  const slider = useRef();\n  const [_containerWidth, setContainerWidth] = useState(null);\n  const [slideWidth, setSlideWidth] = useState(null);\n  const [slides, setSlides] = useState([...initSlides, ...initSlides, ...initSlides]);\n  const isTransitionActive = useRef();\n  const shift = useRef();\n  const containerWidth = useCallback(() => {\n    if (!slider.current) return 0;\n    let width = _containerWidth;\n\n    if (!width) {\n      var _slider$current$paren;\n\n      width = (_slider$current$paren = slider.current.parentElement.getBoundingClientRect()) === null || _slider$current$paren === void 0 ? void 0 : _slider$current$paren.width;\n      setContainerWidth(width);\n    }\n\n    return width;\n  }, [_containerWidth, setContainerWidth]);\n  const setTransition = useCallback(value => {\n    if (!slider.current) return;\n\n    if (value) {\n      slider.current.classList.add(\"slider-transition--active\");\n      return;\n    }\n\n    slider.current.classList.remove(\"slider-transition--active\");\n  }, [slider]);\n  useEffect(() => {\n    const transitionEnd = () => isTransitionActive.current = false;\n\n    window.addEventListener(\"transitionend\", transitionEnd);\n    window.addEventListener(\"mozTransitionEnd\");\n  }, [isTransitionActive]);\n  const setPosition = useCallback(position => {\n    if (!slider.current) return;\n    slider.current.style.transform = `translateX(${position * slideWidth}px)`;\n    isTransitionActive.current = true;\n  }, [slider, slideWidth, isTransitionActive]);\n  useEffect(() => {\n    shift.current = -initSlides.length;\n    setPosition(shift.current);\n  }, [slideWidth, setPosition, shift, initSlides]);\n  useEffect(() => {\n    const resetSize = () => setContainerWidth(null);\n\n    window.addEventListener(\"resize\", resetSize);\n    return () => window.removeEventListener(\"resize\", resetSize);\n  }, [setContainerWidth]);\n  useEffect(() => {\n    if (!containerWidth() || !minSlideWidth || !slider.current) return;\n    const visibleSlides = ~~(containerWidth() / parseInt(minSlideWidth));\n    const slideWidth = containerWidth() / visibleSlides;\n    setSlideWidth(slideWidth);\n    slider.current.style.width = slideWidth * slider.current.children.length + \"px\";\n  }, [containerWidth, minSlideWidth, setSlideWidth]);\n  const appendSlides = useCallback(amount => {\n    const items = [...slider.current.children].slice(0, amount);\n    items.forEach(item => {\n      slider.current.removeChild(item);\n      slider.current.append(item);\n    });\n    console.log(items);\n  }, [slider]);\n  const prependSlides = useCallback(amount => {\n    const items = [...slider.current.children].slice(-amount);\n    items.forEach(item => {\n      slider.current.removeChild(item);\n      slider.current.prepend(item);\n    });\n  }, [slider]);\n  const next = useCallback(() => {\n    if (!slider.current) return;\n    appendSlides(1);\n    setTransition(false);\n    setPosition(shift.current + 1);\n    setTimeout(() => {\n      setTransition(true);\n      setPosition(shift.current);\n    }, 0);\n  }, [setTransition, setPosition]);\n  useEffect(() => nextHandle && nextHandle(next), [next, nextHandle]);\n  const prev = useCallback(() => {\n    if (!slider.current) return;\n    prependSlides(1);\n    setTransition(false);\n    setPosition(shift.current - 1);\n    setTimeout(() => {\n      setTransition(true);\n      setPosition(shift.current);\n    }, 0);\n  }, [slider, setTransition, setPosition]);\n  useEffect(() => prevHandle && prevHandle(prev), [prev, prevHandle]); // console.log(containerWidth(), slideWidth, parseInt(minSlideWidth))\n\n  return React.createElement(\"ul\", {\n    className: \"carousel-slider\",\n    ref: slider,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109\n    },\n    __self: this\n  }, slides && slides instanceof Array && slides.map(slide => React.createElement(\"li\", {\n    key: UUID.genV1(),\n    className: \"slide\",\n    style: {\n      width: minSlideWidth || \"initial\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111\n    },\n    __self: this\n  }, slide)));\n};\n\nexport default Slider;","map":{"version":3,"sources":["D:/PROJEKTY/APKI/dj-truck/src/pages/common/components/Carousel-slider/Slider.js"],"names":["React","useCallback","useEffect","useRef","useState","UUID","style","Slider","slides","initSlides","next","nextHandle","prev","prevHandle","minSlideWidth","slider","_containerWidth","setContainerWidth","slideWidth","setSlideWidth","setSlides","isTransitionActive","shift","containerWidth","current","width","parentElement","getBoundingClientRect","setTransition","value","classList","add","remove","transitionEnd","window","addEventListener","setPosition","position","transform","length","resetSize","removeEventListener","visibleSlides","parseInt","children","appendSlides","amount","items","slice","forEach","item","removeChild","append","console","log","prependSlides","prepend","setTimeout","Array","map","slide","genV1"],"mappings":"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","sourcesContent":["import React, {useCallback, useEffect, useRef, useState} from \"react\";\r\nimport UUID from \"uuidjs\";\r\nimport style from \"./slider.scss\"\r\n\r\nconst Slider = ({slides: initSlides, next:nextHandle, prev: prevHandle, minSlideWidth = style.minSlideWidth}) => {\r\n    const slider = useRef();\r\n    const [_containerWidth, setContainerWidth] = useState(null);\r\n    const [slideWidth, setSlideWidth] = useState(null);\r\n    const [slides, setSlides] = useState([...initSlides, ...initSlides, ...initSlides]);\r\n    const isTransitionActive = useRef();\r\n    const shift = useRef();\r\n\r\n    const containerWidth = useCallback(() => {\r\n        if (!slider.current) return 0;\r\n        let width = _containerWidth\r\n        if (!width) {\r\n            width = slider.current.parentElement.getBoundingClientRect()?.width\r\n            setContainerWidth(width);\r\n        }\r\n        return width;\r\n    }, [_containerWidth, setContainerWidth])\r\n\r\n    const setTransition = useCallback( value =>{\r\n         if(!slider.current) return;\r\n         if(value){\r\n            slider.current.classList.add(\"slider-transition--active\")\r\n            return\r\n         }\r\n         slider.current.classList.remove(\"slider-transition--active\")\r\n    }, [slider])\r\n\r\n    useEffect(()=>{\r\n        const transitionEnd = () => isTransitionActive.current = false;\r\n        window.addEventListener(\"transitionend\", transitionEnd);\r\n        window.addEventListener(\"mozTransitionEnd\")\r\n    }, [isTransitionActive])\r\n\r\n    const setPosition = useCallback( position =>{\r\n        if(!slider.current) return;\r\n        slider.current.style.transform = `translateX(${position * slideWidth }px)`\r\n        isTransitionActive.current = true;\r\n    }, [ slider, slideWidth, isTransitionActive])\r\n\r\n    useEffect(()=>{\r\n        shift.current = -initSlides.length;\r\n        setPosition(shift.current);\r\n    }, [slideWidth, setPosition, shift, initSlides])\r\n\r\n    useEffect(() => {\r\n        const resetSize = () => setContainerWidth(null);\r\n        window.addEventListener(\"resize\", resetSize);\r\n        return () => window.removeEventListener(\"resize\", resetSize);\r\n    }, [setContainerWidth])\r\n\r\n    useEffect(() => {\r\n        if (!containerWidth() || !minSlideWidth || !slider.current) return;\r\n        const visibleSlides = ~~(containerWidth() / parseInt(minSlideWidth));\r\n        const slideWidth = containerWidth() / visibleSlides\r\n        setSlideWidth(slideWidth);\r\n        slider.current.style.width = slideWidth * slider.current.children.length + \"px\";\r\n    }, [containerWidth, minSlideWidth,  setSlideWidth]);\r\n\r\n    const appendSlides = useCallback(amount => {\r\n        const items = [...slider.current.children].slice(0 , amount);\r\n        items.forEach( item => {\r\n            slider.current.removeChild(item);\r\n            slider.current.append(item);\r\n        });\r\n        console.log(items)\r\n    }, [slider])\r\n\r\n    const prependSlides = useCallback(amount => {\r\n        const items = [...slider.current.children].slice(-amount);\r\n        items.forEach( item => {\r\n            slider.current.removeChild(item);\r\n            slider.current.prepend(item);\r\n        });\r\n    }, [slider])\r\n\r\n    const next = useCallback(()=>{\r\n        if(!slider.current) return;\r\n        appendSlides(1);\r\n        setTransition(false)\r\n        setPosition(shift.current + 1)\r\n        setTimeout( ()=> {\r\n            setTransition(true)\r\n            setPosition(shift.current);\r\n        }, 0);\r\n    }, [ setTransition, setPosition])\r\n\r\n    useEffect(()=> nextHandle && nextHandle(next), [next, nextHandle])\r\n\r\n    const prev = useCallback(()=>{\r\n        if(!slider.current) return;\r\n        prependSlides(1);\r\n        setTransition(false)\r\n        setPosition(shift.current - 1)\r\n        setTimeout( ()=> {\r\n            setTransition(true)\r\n            setPosition(shift.current);\r\n        }, 0);\r\n\r\n    }, [slider, setTransition, setPosition])\r\n\r\n    useEffect(()=> prevHandle && prevHandle(prev), [prev, prevHandle])\r\n\r\n   // console.log(containerWidth(), slideWidth, parseInt(minSlideWidth))\r\n    return (\r\n        <ul className=\"carousel-slider\" ref={slider}>\r\n            {slides && slides instanceof Array && slides.map(slide => (\r\n                <li key={UUID.genV1()} className={\"slide\"} style={{width: minSlideWidth || \"initial\"}}>{slide}</li>\r\n            ))}\r\n        </ul>\r\n    )\r\n}\r\nexport default Slider;"]},"metadata":{},"sourceType":"module"}