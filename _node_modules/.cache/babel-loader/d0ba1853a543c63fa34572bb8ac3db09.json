{"ast":null,"code":"export function improveWaveSurfer(waveSurfer) {\n  const applyStyle = waveSurfer.Drawer.style;\n  waveSurfer.drawer._mainWraper = waveSurfer.drawer.container.firstChild;\n  const progressLayer = document.createElement('div');\n  const style = {\n    position: \"absolute\",\n    top: \"0\",\n    left: \"0\",\n    zIndex: \"10\",\n    width: \"2px\",\n    height: \"100%\",\n    mixBlendMode: \"hue\",\n    background: \"black\"\n  };\n  applyStyle(progressLayer, style);\n  progressLayer.id = \"wsProgressLayer\";\n  waveSurfer.drawer.wrapper.appendChild(progressLayer);\n  waveSurfer.drawer._progressLayer = progressLayer;\n\n  waveSurfer.drawer.progress = function (progress) {\n    var minPxDelta = 1 / this.params.pixelRatio;\n    var pos = Math.round(progress * this.width) * minPxDelta;\n\n    if (pos < this.lastPos || pos - this.lastPos >= minPxDelta) {\n      this.lastPos = pos;\n\n      if (this.params.scrollParent && this.params.autoCenter) {\n        var newPos = ~~(this.wrapper.scrollWidth * progress);\n        this.recenterOnPosition(newPos);\n      }\n\n      this.updateProgress(pos);\n    }\n  };\n\n  waveSurfer.drawer._updateProgress = function (pos) {\n    console.log(\"udpate progress \", pos);\n    this._progressLayer.style.transform = \"scaleX(\" + pos + \")\";\n  };\n\n  waveSurfer.drawerhandleEvent = function (e, noPrevent) {\n    !noPrevent && e.preventDefault();\n    var clientX = e.targetTouches ? e.targetTouches[0].clientX : e.clientX;\n    var bbox = this.wrapper.getBoundingClientRect();\n    var nominalWidth = this.width;\n    var parentWidth = this.getWidth();\n    var progress;\n\n    if (!this.params.fillParent && nominalWidth < parentWidth) {\n      progress = (clientX - bbox.left) * this.params.pixelRatio / nominalWidth || 0;\n\n      if (progress > 1) {\n        progress = 1;\n      }\n    } else {\n      progress = (clientX - bbox.left + this.wrapper.scrollLeft) / this.wrapper.scrollWidth || 0;\n    }\n\n    return progress;\n  };\n}","map":{"version":3,"sources":["D:/PROJEKTY/APKI/DjTruck/djtruck/src/pages/app/core/console/channels/channelBuilder/WaveSurrferTransitions.js"],"names":["improveWaveSurfer","waveSurfer","applyStyle","Drawer","style","drawer","_mainWraper","container","firstChild","progressLayer","document","createElement","position","top","left","zIndex","width","height","mixBlendMode","background","id","wrapper","appendChild","_progressLayer","progress","minPxDelta","params","pixelRatio","pos","Math","round","lastPos","scrollParent","autoCenter","newPos","scrollWidth","recenterOnPosition","updateProgress","_updateProgress","console","log","transform","drawerhandleEvent","e","noPrevent","preventDefault","clientX","targetTouches","bbox","getBoundingClientRect","nominalWidth","parentWidth","getWidth","fillParent","scrollLeft"],"mappings":"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","sourcesContent":["export function improveWaveSurfer(waveSurfer) {\r\n    const applyStyle = waveSurfer.Drawer.style;\r\n    waveSurfer.drawer._mainWraper = waveSurfer.drawer.container.firstChild;\r\n\r\n    const progressLayer = document.createElement('div');\r\n    const style = {\r\n        position : \"absolute\",\r\n        top : \"0\",\r\n        left : \"0\",\r\n        zIndex : \"10\", \r\n        width : \"2px\",\r\n        height: \"100%\",\r\n        mixBlendMode: \"hue\",\r\n        background : \"black\"\r\n    }\r\n    applyStyle(progressLayer, style);\r\n    progressLayer.id = \"wsProgressLayer\"\r\n    waveSurfer.drawer.wrapper.appendChild(progressLayer);\r\n    waveSurfer.drawer._progressLayer = progressLayer;\r\n\r\n    waveSurfer.drawer.progress = function (progress) {\r\n        var minPxDelta = 1 / this.params.pixelRatio;\r\n        var pos = Math.round(progress * this.width) * minPxDelta;\r\n\r\n        if (pos < this.lastPos || pos - this.lastPos >= minPxDelta) {\r\n            this.lastPos = pos;\r\n\r\n            if (this.params.scrollParent && this.params.autoCenter) {\r\n                var newPos = ~~(this.wrapper.scrollWidth * progress);\r\n                this.recenterOnPosition(newPos);\r\n            }\r\n\r\n\r\n            this.updateProgress(pos);\r\n        }\r\n    }\r\n\r\n    waveSurfer.drawer._updateProgress = function(pos){\r\n        console.log(\"udpate progress \" , pos)\r\n        this._progressLayer.style.transform = \"scaleX(\"+ pos +\")\"\r\n    }\r\n\r\n\r\n\r\n    waveSurfer.drawerhandleEvent= function (e, noPrevent) {\r\n        !noPrevent && e.preventDefault();\r\n\r\n        var clientX = e.targetTouches ? e.targetTouches[0].clientX : e.clientX;\r\n        var bbox = this.wrapper.getBoundingClientRect();\r\n\r\n        var nominalWidth = this.width;\r\n        var parentWidth = this.getWidth();\r\n\r\n        var progress;\r\n\r\n        if (!this.params.fillParent && nominalWidth < parentWidth) {\r\n            progress = ((clientX - bbox.left) * this.params.pixelRatio / nominalWidth) || 0;\r\n\r\n            if (progress > 1) {\r\n                progress = 1;\r\n            }\r\n        } else {\r\n            progress = ((clientX - bbox.left + this.wrapper.scrollLeft) / this.wrapper.scrollWidth) || 0;\r\n        }\r\n\r\n        return progress;\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}