{"ast":null,"code":"import { ACTIONS, pushToTracklist, updateEndTime, recording } from \"../../../actions\";\nimport RECORD_STATE from \"./../../../reducers/console/recorder/stateDef\";\nimport { takeEvery, select, put, call } from \"redux-saga/effects\";\nexport default function* interceptLoadtrack() {\n  yield takeEvery(ACTIONS.LOAD_TRACK, handel);\n}\n\nconst getTracklist = state => state.recorder.tracklist;\n\nconst isRecording = state => state.recorder.recordingState === RECORD_STATE.RECORDING;\n\nfunction* finishInfinite(tracklist, channel) {\n  const unfinished = tracklist.find(track => track.channel === channel && track.start && !track.end);\n  if (!unfinished) return;\n  yield put(updateEndTime(unfinished.id));\n}\n\nfunction* handel(action) {\n  const channel = action.destination;\n  const track = action.track;\n  const reocrding = yield select(isRecording);\n  if (!recording) return;\n  const tracklist = yield select(getTracklist);\n  yield call(finishInfinite, tracklist, channel);\n  yield put(pushToTracklist({\n    id: track.id,\n    channel,\n    start: null,\n    end: null\n  }));\n  console.log('intercept load track');\n}","map":{"version":3,"sources":["D:/PROJEKTY/APKI/dj-truck/src/sagas/recorder/tracklist/loadtrack.js"],"names":["ACTIONS","pushToTracklist","updateEndTime","recording","RECORD_STATE","takeEvery","select","put","call","interceptLoadtrack","LOAD_TRACK","handel","getTracklist","state","recorder","tracklist","isRecording","recordingState","RECORDING","finishInfinite","channel","unfinished","find","track","start","end","id","action","destination","reocrding","console","log"],"mappings":"AAAA,SAAUA,OAAV,EAAmBC,eAAnB,EAAoCC,aAApC,EAAmDC,SAAnD,QAAoE,kBAApE;AACA,OAAOC,YAAP,MAAyB,+CAAzB;AACA,SAASC,SAAT,EAAoBC,MAApB,EAA4BC,GAA5B,EAAiCC,IAAjC,QAA4C,oBAA5C;AAGA,eAAe,UAAUC,kBAAV,GAA+B;AAC1C,QAAMJ,SAAS,CAACL,OAAO,CAACU,UAAT,EAAqBC,MAArB,CAAf;AACH;;AAED,MAAMC,YAAY,GAAGC,KAAK,IAAIA,KAAK,CAACC,QAAN,CAAeC,SAA7C;;AAEA,MAAMC,WAAW,GAAGH,KAAK,IAAIA,KAAK,CAACC,QAAN,CAAeG,cAAf,KAAkCb,YAAY,CAACc,SAA5E;;AAEA,UAAWC,cAAX,CAA0BJ,SAA1B,EAAsCK,OAAtC,EAA8C;AAC1C,QAAMC,UAAU,GAAGN,SAAS,CAACO,IAAV,CAAeC,KAAK,IAClCA,KAAK,CAACH,OAAN,KAAkBA,OAAlB,IAA6BG,KAAK,CAACC,KAAnC,IAA4C,CAACD,KAAK,CAACE,GADrC,CAAnB;AAGA,MAAG,CAACJ,UAAJ,EAAgB;AAEhB,QAAMd,GAAG,CAACL,aAAa,CAACmB,UAAU,CAACK,EAAZ,CAAd,CAAT;AACH;;AAED,UAAUf,MAAV,CAAiBgB,MAAjB,EAAwB;AACpB,QAAMP,OAAO,GAAGO,MAAM,CAACC,WAAvB;AACA,QAAML,KAAK,GAAGI,MAAM,CAACJ,KAArB;AAEA,QAAMM,SAAS,GAAG,MAAMvB,MAAM,CAACU,WAAD,CAA9B;AACA,MAAG,CAACb,SAAJ,EAAe;AAEf,QAAMY,SAAS,GAAG,MAAMT,MAAM,CAACM,YAAD,CAA9B;AACA,QAAMJ,IAAI,CAACW,cAAD,EAAiBJ,SAAjB,EAA4BK,OAA5B,CAAV;AAEA,QAAMb,GAAG,CAACN,eAAe,CAAC;AACtByB,IAAAA,EAAE,EAAEH,KAAK,CAACG,EADY;AAEtBN,IAAAA,OAFsB;AAGtBI,IAAAA,KAAK,EAAE,IAHe;AAItBC,IAAAA,GAAG,EAAE;AAJiB,GAAD,CAAhB,CAAT;AAMAK,EAAAA,OAAO,CAACC,GAAR,CAAY,sBAAZ;AACH","sourcesContent":["import {  ACTIONS, pushToTracklist, updateEndTime, recording } from \"../../../actions\";\r\nimport RECORD_STATE from \"./../../../reducers/console/recorder/stateDef\";\r\nimport { takeEvery, select, put, call} from \"redux-saga/effects\";\r\n\r\n\r\nexport default function* interceptLoadtrack() {\r\n    yield takeEvery(ACTIONS.LOAD_TRACK, handel)\r\n}\r\n\r\nconst getTracklist = state => state.recorder.tracklist;\r\n\r\nconst isRecording = state => state.recorder.recordingState === RECORD_STATE.RECORDING; \r\n\r\nfunction * finishInfinite(tracklist , channel){\r\n    const unfinished = tracklist.find(track => \r\n        (track.channel === channel && track.start && !track.end)\r\n    )\r\n    if(!unfinished) return; \r\n\r\n    yield put(updateEndTime(unfinished.id))\r\n}\r\n\r\nfunction* handel(action){\r\n    const channel = action.destination;\r\n    const track = action.track;\r\n    \r\n    const reocrding = yield select(isRecording);\r\n    if(!recording) return;\r\n\r\n    const tracklist = yield select(getTracklist);\r\n    yield call(finishInfinite, tracklist, channel);\r\n\r\n    yield put(pushToTracklist({\r\n        id: track.id,\r\n        channel,\r\n        start: null,\r\n        end: null,\r\n    }))\r\n    console.log('intercept load track')\r\n}"]},"metadata":{},"sourceType":"module"}