{"ast":null,"code":"import { ACTIONS } from \"./../actions/actions.js\";\nimport { produce } from \"imer\";\nimport { connect } from \"react-redux\";\nconst deck = {\n  track: {\n    title: \"\",\n    bpm: 0,\n    quality: \"\",\n    duration: \"\",\n    source: \"\",\n    id: \"\",\n    thumbnail: {}\n  },\n  // \n  playBackState: {\n    ready: false,\n    paused: true,\n    cuePoint: 0,\n    cueActive: false,\n    pitch: 0,\n    timeLeft: null\n  }\n};\nconst channel = {\n  volume: 100,\n  low: 100,\n  mid: 100,\n  high: 100,\n  gain: 100\n};\nconst initState = {\n  channel: {\n    A: { ...deck\n    },\n    B: { ...deck\n    }\n  },\n  mikser: {\n    channelA: { ...channel\n    },\n    channelB: { ...channel\n    },\n    fader: {\n      position: 50 //A: 0 <-> B:100\n\n    }\n  }\n};\n\nfunction nextState(part) {\n  return (state, destination, haveToBeReady, variables) => {\n    if (!state.channel[destination]) return state;\n    if (haveToBeReady && !state.channel[destination].playBackState.ready) return state;\n    const nextState = produce(state, draftState => {\n      for (let [variable, value] of Object.entries(variables)) {\n        if (part === \"playBackState\") {\n          draftState.channel[destination].playBackState[variable] = value;\n        } else if (part === \"track\") {\n          draftState.channel[destination].track[variable] = value;\n        }\n      }\n    });\n    return nextState;\n  };\n}\n\nconst nextPlayBackState = nextState('playBackState');\nconst nextTrackState = nextState('track');\n\nfunction consoleReducer(state = initState, action) {\n  switch (action.type) {\n    case ACTIONS.LOAD_TRACK:\n      {\n        const nextTrack = action.track;\n        return produce(state, draftState => {\n          draftState.channel[action.destination].track = {\n            title: nextTrack.title,\n            bpm: nextTrack.bpm || 0,\n            quality: nextTrack.quality,\n            duration: nextTrack.duration,\n            source: nextTrack.source,\n            id: nextTrack.id,\n            thumbnail: nextTrack.thumbnail\n          };\n        });\n      }\n\n    case ACTIONS.SET_READY:\n      {\n        return nextPlayBackState(state, action.destination, false, {\n          ready: action.value\n        });\n      }\n\n    case ACTIONS.SET_PITCH:\n      {\n        return nextPlayBackState(state, action.destination, false, {\n          pitch: action.pitch\n        });\n      }\n\n    case ACTIONS.INCREASE_BPM:\n      {\n        var _state$channel$action, _state$channel$action2;\n\n        console.log('action increase');\n        let prevPitch = (_state$channel$action = state.channel[action.destination]) === null || _state$channel$action === void 0 ? void 0 : (_state$channel$action2 = _state$channel$action.playBackState) === null || _state$channel$action2 === void 0 ? void 0 : _state$channel$action2.pitch;\n        console.log(prevPitch);\n        if (prevPitch !== undefined) return state;\n        console.log(action.amount);\n        return nextPlayBackState(state, action.destination, false, {\n          pitch: prevPitch + action.amount\n        });\n      }\n\n    case ACTIONS.DECREASE_BPM:\n      {\n        var _state$channel$action3, _state$channel$action4;\n\n        let prevPitch = (_state$channel$action3 = state.channel[action.destination]) === null || _state$channel$action3 === void 0 ? void 0 : (_state$channel$action4 = _state$channel$action3.playBackState) === null || _state$channel$action4 === void 0 ? void 0 : _state$channel$action4.pitch;\n        if (prevPitch !== undefined) return state;\n        return nextPlayBackState(state, action.destination, false, {\n          pitch: prevPitch - action.amount\n        });\n      }\n\n    case ACTIONS.TOGGLE_PLAY:\n      {\n        var _state$channel$action5, _state$channel$action6;\n\n        let prevPause = (_state$channel$action5 = state.channel[action.destination]) === null || _state$channel$action5 === void 0 ? void 0 : (_state$channel$action6 = _state$channel$action5.playBackState) === null || _state$channel$action6 === void 0 ? void 0 : _state$channel$action6.paused;\n        prevPause = prevPause === undefined ? true : prevPause;\n        return nextPlayBackState(state, action.destination, true, {\n          paused: !prevPause\n        });\n      }\n\n    case ACTIONS.SET_TIME_LEFT:\n      {\n        return nextPlayBackState(state, action.destination, true, {\n          timeLeft: action.timeLeft\n        });\n      }\n\n    case ACTIONS.TOGGLE_CUE:\n      {\n        var _state$channel$action7, _state$channel$action8;\n\n        let prevCue = (_state$channel$action7 = state.channel[action.destination]) === null || _state$channel$action7 === void 0 ? void 0 : (_state$channel$action8 = _state$channel$action7.playBackState) === null || _state$channel$action8 === void 0 ? void 0 : _state$channel$action8.cueActive;\n        prevCue = prevCue === undefined ? false : prevCue;\n        return nextPlayBackState(state, action.destination, true, {\n          cueActive: !prevCue\n        });\n      }\n\n    case ACTIONS.CANCEL_CUE_AND_PLAY:\n      {\n        return nextPlayBackState(state, action.destination, true, {\n          cueActive: false,\n          paused: false\n        });\n      }\n\n    case ACTIONS.SET_CUE_POINT:\n      {\n        return nextPlayBackState(state, action.destination, true, {\n          cuePoint: action.position\n        });\n      }\n\n    case ACTIONS.SET_BPM:\n      {\n        const bpm = action.bpm;\n        const source = action.source;\n        const id = action.id;\n        let channels = [];\n\n        for (let channelName of Object.keys(state.channel)) {\n          if (state.channel[channelName].track.id === id && state.channel[channelName].track.source === source) {\n            channels.push(channelName);\n          }\n        }\n\n        if (channels.length === 0) return state;\n        return channels.reduce((prevState, channelName) => {\n          return nextTrackState(prevState, channelName, false, {\n            bpm: bpm\n          });\n        }, state);\n      }\n\n    default:\n      return state;\n  }\n}\n\nexport default consoleReducer;\n/*\r\nfunction nextPlayBackState(state, destination, haveToBeReady, variables){\r\n    if(!state.channel[destination]) return state;\r\n    if(haveToBeReady && !state.channel[destination].playBackState.ready) return state;\r\n\r\n    const nextState = produce(state, (draftState) => {\r\n        for(let [variable, value] of Object.entries(variables)){\r\n            draftState.channel[destination].playBackState[variable] = value;\r\n        }\r\n    })\r\n    return nextState;\r\n}\r\n\r\nfunction nextTrackState(state, destination, haveToBeReady, variables){\r\n    if(!state.channel[destination]) return state;\r\n    if(haveToBeReady && !state.channel[destination].playBackState.ready) return state;\r\n\r\n    const nextState = produce(state, (draftState) => {\r\n        for(let [variable, value] of Object.entries(variables)){\r\n            draftState.channel[destination].track[variable] = value;\r\n        }\r\n    })\r\n    return nextState;\r\n}*/","map":{"version":3,"sources":["D:/PROJEKTY/APKI/DjTruck/djtruck/src/reducers/consoleReducer.js"],"names":["ACTIONS","produce","connect","deck","track","title","bpm","quality","duration","source","id","thumbnail","playBackState","ready","paused","cuePoint","cueActive","pitch","timeLeft","channel","volume","low","mid","high","gain","initState","A","B","mikser","channelA","channelB","fader","position","nextState","part","state","destination","haveToBeReady","variables","draftState","variable","value","Object","entries","nextPlayBackState","nextTrackState","consoleReducer","action","type","LOAD_TRACK","nextTrack","SET_READY","SET_PITCH","INCREASE_BPM","console","log","prevPitch","undefined","amount","DECREASE_BPM","TOGGLE_PLAY","prevPause","SET_TIME_LEFT","TOGGLE_CUE","prevCue","CANCEL_CUE_AND_PLAY","SET_CUE_POINT","SET_BPM","channels","channelName","keys","push","length","reduce","prevState"],"mappings":"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","sourcesContent":["import {  ACTIONS } from \"./../actions/actions.js\";\r\nimport { produce } from \"imer\";\r\nimport { connect } from \"react-redux\";\r\n\r\nconst deck = {\r\n    track : {\r\n        title : \"\",\r\n        bpm : 0,\r\n        quality : \"\",\r\n        duration : \"\",\r\n        source : \"\",\r\n        id: \"\",\r\n        thumbnail : {}\r\n    }, // \r\n    playBackState : {\r\n        ready: false,\r\n        paused: true,\r\n        cuePoint: 0,\r\n        cueActive: false,\r\n        pitch: 0,\r\n        timeLeft : null\r\n    }\r\n}\r\n\r\nconst channel = {\r\n    volume: 100,\r\n    low: 100,\r\n    mid : 100,\r\n    high : 100,\r\n    gain: 100\r\n}\r\n\r\nconst initState = {\r\n    channel: {\r\n        A:{\r\n            ...deck\r\n        },\r\n        B:{\r\n            ...deck\r\n        }\r\n    },\r\n   \r\n    mikser : {\r\n        channelA : {\r\n            ...channel,\r\n        },\r\n        channelB : {\r\n            ...channel,\r\n        },\r\n        fader : {\r\n            position : 50 //A: 0 <-> B:100\r\n        }\r\n    }\r\n}\r\n\r\nfunction nextState(part){\r\n    return (state, destination, haveToBeReady, variables)=>{\r\n        if(!state.channel[destination]) return state;\r\n        if(haveToBeReady && !state.channel[destination].playBackState.ready) return state;\r\n    \r\n        const nextState = produce(state, (draftState) => {\r\n            for(let [variable, value] of Object.entries(variables)){\r\n                if(part === \"playBackState\"){\r\n                    draftState.channel[destination].playBackState[variable] = value;\r\n                } else if(part ===\"track\"){\r\n                    draftState.channel[destination].track[variable] = value;\r\n                }\r\n            }\r\n        })\r\n        return nextState;\r\n    }\r\n}\r\n\r\nconst nextPlayBackState = nextState('playBackState');\r\nconst nextTrackState = nextState('track');\r\n\r\n\r\n\r\nfunction consoleReducer(state = initState, action){\r\n    switch(action.type){\r\n        case ACTIONS.LOAD_TRACK : {\r\n            const nextTrack = action.track;\r\n            return produce(state, draftState => {\r\n                draftState.channel[action.destination].track = {\r\n                    title : nextTrack.title,\r\n                    bpm : nextTrack.bpm || 0,\r\n                    quality : nextTrack.quality,\r\n                    duration : nextTrack.duration,\r\n                    source : nextTrack.source,\r\n                    id : nextTrack.id,\r\n                    thumbnail : nextTrack.thumbnail,\r\n                }\r\n            })\r\n        }\r\n\r\n        case ACTIONS.SET_READY : {\r\n            return nextPlayBackState(state, action.destination, false, { ready : action.value })\r\n        }\r\n\r\n        case ACTIONS.SET_PITCH : {\r\n            return nextPlayBackState(state, action.destination, false, { pitch : action.pitch })\r\n        }\r\n\r\n        case ACTIONS.INCREASE_BPM : {\r\n            console.log('action increase')\r\n            let prevPitch = state.channel[action.destination]?.playBackState?.pitch;\r\n            console.log(prevPitch);\r\n            if(prevPitch !== undefined ) return state;\r\n            console.log(action.amount)\r\n            return nextPlayBackState(state, action.destination, false, { pitch : prevPitch + action.amount })\r\n        }\r\n\r\n        case ACTIONS.DECREASE_BPM : {\r\n            let prevPitch = state.channel[action.destination]?.playBackState?.pitch;\r\n            if(prevPitch !== undefined ) return state;\r\n            return nextPlayBackState(state, action.destination, false, { pitch : prevPitch - action.amount })\r\n        }\r\n\r\n\r\n        case ACTIONS.TOGGLE_PLAY : {\r\n            let prevPause = state.channel[action.destination]?.playBackState?.paused;\r\n            prevPause = (prevPause === undefined) ? true : prevPause;\r\n            return nextPlayBackState(state, action.destination, true, { paused : !prevPause })\r\n        }\r\n\r\n        case ACTIONS.SET_TIME_LEFT : {\r\n            return nextPlayBackState(state, action.destination, true, {timeLeft: action.timeLeft})\r\n        }\r\n\r\n        case ACTIONS.TOGGLE_CUE : {\r\n            let prevCue = state.channel[action.destination]?.playBackState?.cueActive;\r\n            prevCue = (prevCue === undefined) ? false: prevCue;\r\n            return nextPlayBackState(state, action.destination, true, { cueActive : !prevCue })\r\n        }\r\n\r\n        case ACTIONS.CANCEL_CUE_AND_PLAY : {\r\n            return nextPlayBackState(state, action.destination, true, {\r\n                cueActive: false,\r\n                paused: false,\r\n            })\r\n        }\r\n\r\n        case ACTIONS.SET_CUE_POINT : {\r\n            return nextPlayBackState(state, action.destination, true, { cuePoint : action.position })\r\n        }\r\n\r\n        case ACTIONS.SET_BPM : {\r\n            const bpm = action.bpm;\r\n            const source = action.source;\r\n            const id = action.id;\r\n            let channels = [];\r\n            for(let channelName of Object.keys(state.channel)){\r\n                if(state.channel[channelName].track.id === id \r\n                    && state.channel[channelName].track.source === source)\r\n                    {\r\n                        channels.push(channelName);\r\n                    }\r\n\r\n            }\r\n            if(channels.length === 0) return state;\r\n\r\n            return channels.reduce((prevState, channelName) => {\r\n                return nextTrackState(prevState, channelName, false, {bpm : bpm})\r\n            }, state);\r\n        }\r\n\r\n        default : return state;\r\n    }\r\n}\r\n\r\nexport default consoleReducer;\r\n\r\n\r\n\r\n\r\n/*\r\nfunction nextPlayBackState(state, destination, haveToBeReady, variables){\r\n    if(!state.channel[destination]) return state;\r\n    if(haveToBeReady && !state.channel[destination].playBackState.ready) return state;\r\n\r\n    const nextState = produce(state, (draftState) => {\r\n        for(let [variable, value] of Object.entries(variables)){\r\n            draftState.channel[destination].playBackState[variable] = value;\r\n        }\r\n    })\r\n    return nextState;\r\n}\r\n\r\nfunction nextTrackState(state, destination, haveToBeReady, variables){\r\n    if(!state.channel[destination]) return state;\r\n    if(haveToBeReady && !state.channel[destination].playBackState.ready) return state;\r\n\r\n    const nextState = produce(state, (draftState) => {\r\n        for(let [variable, value] of Object.entries(variables)){\r\n            draftState.channel[destination].track[variable] = value;\r\n        }\r\n    })\r\n    return nextState;\r\n}*/\r\n\r\n"]},"metadata":{},"sourceType":"module"}