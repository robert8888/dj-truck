{"ast":null,"code":"var _jsxFileName = \"D:\\\\PROJEKTY\\\\APKI\\\\dj-truck\\\\src\\\\pages\\\\console\\\\components\\\\Console\\\\Deck\\\\TrackInfo\\\\TimeLeft\\\\TimeLeft.js\";\nimport React, { useRef, useEffect, useState } from \"react\";\nimport { formater } from \"./../../../../../../../utils/time/timeFromater\";\nimport { connect } from \"react-redux\";\nimport Console from \"./../../../../../core/console/console\";\n\nconst TimeLeft = ({\n  duration,\n  playback,\n  name\n}) => {\n  const container = useRef(null);\n  const intervalHandler = useRef(null);\n  const [channelInterface, setChannelInterface] = useState(null);\n  useEffect(() => {\n    setChannelInterface(Console.Get().getChannelInterface(name));\n  }, [setChannelInterface, name]);\n  useEffect(() => {\n    console.log(\"effect\");\n    if (!channelInterface) return;\n    console.log(\"have channel interface\");\n    console.log(\"playbakc is\", playback);\n\n    if (playback) {\n      intervalHandler.current = setInterval(() => {\n        let left = channelInterface.getCurrnetTime().left;\n        left = formater.secondsToStr(left);\n        container.textContent = left;\n      }, 500);\n    } else {\n      clearInterval(intervalHandler.current);\n    }\n  }, [channelInterface, playback, container, intervalHandler]); // useEffect(()=>{\n  //     let timeLeft;\n  //     if(props.timeLeft){\n  //         timeLeft = formater.secondsToStr(props.timeLeft);\n  //     } else {\n  //         if(typeof props.trackDuration === \"string\"){\n  //             timeLeft = formater.ptToStr(props.trackDuration);\n  //         } else {\n  //             timeLeft = formater.secondsToStr(props.trackDuration);\n  //         }\n  //     }\n  //     container.current.textContent = timeLeft;\n  // }, [props.timeLeft, container, props.trackDuration])\n\n  return React.createElement(\"span\", {\n    className: \"time-left\",\n    ref: container,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47\n    },\n    __self: this\n  });\n};\n\nconst mapsStateToProps = (state, ownProps) => ({\n  duration: state.console.channel[ownProps.name].track.duration,\n  //  timeLeft :  state.console.channel[ownProps.name].playBackState.timeLeft,\n  plyaback: state.console.channel[ownProps.name].playBackState.paused\n});\n\nexport default connect(mapsStateToProps)(TimeLeft);","map":{"version":3,"sources":["D:/PROJEKTY/APKI/dj-truck/src/pages/console/components/Console/Deck/TrackInfo/TimeLeft/TimeLeft.js"],"names":["React","useRef","useEffect","useState","formater","connect","Console","TimeLeft","duration","playback","name","container","intervalHandler","channelInterface","setChannelInterface","Get","getChannelInterface","console","log","current","setInterval","left","getCurrnetTime","secondsToStr","textContent","clearInterval","mapsStateToProps","state","ownProps","channel","track","plyaback","playBackState","paused"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,MAAhB,EAAwBC,SAAxB,EAAmCC,QAAnC,QAAkD,OAAlD;AACA,SAASC,QAAT,QAAyB,gDAAzB;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,OAAOC,OAAP,MAAoB,uCAApB;;AAEA,MAAMC,QAAQ,GAAG,CAAC;AAACC,EAAAA,QAAD;AAAWC,EAAAA,QAAX;AAAqBC,EAAAA;AAArB,CAAD,KAAgC;AAC7C,QAAMC,SAAS,GAAGV,MAAM,CAAC,IAAD,CAAxB;AACA,QAAMW,eAAe,GAAGX,MAAM,CAAC,IAAD,CAA9B;AAEA,QAAM,CAACY,gBAAD,EAAmBC,mBAAnB,IAA2CX,QAAQ,CAAC,IAAD,CAAzD;AAEAD,EAAAA,SAAS,CAAC,MAAI;AACVY,IAAAA,mBAAmB,CAACR,OAAO,CAACS,GAAR,GAAcC,mBAAd,CAAkCN,IAAlC,CAAD,CAAnB;AACH,GAFQ,EAEN,CAACI,mBAAD,EAAsBJ,IAAtB,CAFM,CAAT;AAIAR,EAAAA,SAAS,CAAC,MAAI;AACVe,IAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ;AACA,QAAG,CAACL,gBAAJ,EAAsB;AACtBI,IAAAA,OAAO,CAACC,GAAR,CAAY,wBAAZ;AACAD,IAAAA,OAAO,CAACC,GAAR,CAAY,aAAZ,EAA2BT,QAA3B;;AACA,QAAGA,QAAH,EAAY;AACRG,MAAAA,eAAe,CAACO,OAAhB,GAA0BC,WAAW,CAAC,MAAI;AACtC,YAAIC,IAAI,GAAGR,gBAAgB,CAACS,cAAjB,GAAkCD,IAA7C;AACAA,QAAAA,IAAI,GAAGjB,QAAQ,CAACmB,YAAT,CAAsBF,IAAtB,CAAP;AACAV,QAAAA,SAAS,CAACa,WAAV,GAAwBH,IAAxB;AACH,OAJoC,EAIlC,GAJkC,CAArC;AAKH,KAND,MAMO;AACHI,MAAAA,aAAa,CAACb,eAAe,CAACO,OAAjB,CAAb;AACH;AACJ,GAdQ,EAcN,CAACN,gBAAD,EAAmBJ,QAAnB,EAA6BE,SAA7B,EAAwCC,eAAxC,CAdM,CAAT,CAV6C,CA0B7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,SACI;AAAM,IAAA,SAAS,EAAC,WAAhB;AAA4B,IAAA,GAAG,EAAED,SAAjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ;AAGH,CA3CD;;AA6CA,MAAMe,gBAAgB,GAAG,CAACC,KAAD,EAAQC,QAAR,MAAsB;AAC3CpB,EAAAA,QAAQ,EAAGmB,KAAK,CAACV,OAAN,CAAcY,OAAd,CAAsBD,QAAQ,CAAClB,IAA/B,EAAqCoB,KAArC,CAA2CtB,QADX;AAE7C;AACEuB,EAAAA,QAAQ,EAAEJ,KAAK,CAACV,OAAN,CAAcY,OAAd,CAAsBD,QAAQ,CAAClB,IAA/B,EAAqCsB,aAArC,CAAmDC;AAHlB,CAAtB,CAAzB;;AAMA,eAAe5B,OAAO,CAACqB,gBAAD,CAAP,CAA0BnB,QAA1B,CAAf","sourcesContent":["import React, { useRef, useEffect, useState} from \"react\"\r\nimport { formater } from \"./../../../../../../../utils/time/timeFromater\";\r\nimport { connect } from \"react-redux\";\r\nimport Console from \"./../../../../../core/console/console\";\r\n\r\nconst TimeLeft = ({duration, playback, name}) => {\r\n    const container = useRef(null);\r\n    const intervalHandler = useRef(null)\r\n\r\n    const [channelInterface, setChannelInterface] =  useState(null);\r\n\r\n    useEffect(()=>{ \r\n        setChannelInterface(Console.Get().getChannelInterface(name));\r\n    }, [setChannelInterface, name])\r\n\r\n    useEffect(()=>{\r\n        console.log(\"effect\")\r\n        if(!channelInterface) return;\r\n        console.log(\"have channel interface\")\r\n        console.log(\"playbakc is\", playback)\r\n        if(playback){\r\n            intervalHandler.current = setInterval(()=>{\r\n                let left = channelInterface.getCurrnetTime().left;\r\n                left = formater.secondsToStr(left);\r\n                container.textContent = left;\r\n            }, 500)\r\n        } else {\r\n            clearInterval(intervalHandler.current);\r\n        }\r\n    }, [channelInterface, playback, container, intervalHandler])\r\n\r\n    // useEffect(()=>{\r\n    //     let timeLeft;\r\n    //     if(props.timeLeft){\r\n    //         timeLeft = formater.secondsToStr(props.timeLeft);\r\n    //     } else {\r\n    //         if(typeof props.trackDuration === \"string\"){\r\n    //             timeLeft = formater.ptToStr(props.trackDuration);\r\n    //         } else {\r\n    //             timeLeft = formater.secondsToStr(props.trackDuration);\r\n    //         }\r\n    //     }\r\n    //     container.current.textContent = timeLeft;\r\n    // }, [props.timeLeft, container, props.trackDuration])\r\n\r\n    return (\r\n        <span className=\"time-left\" ref={container}/>\r\n    )\r\n}\r\n\r\nconst mapsStateToProps = (state, ownProps) => ({\r\n    duration : state.console.channel[ownProps.name].track.duration,\r\n  //  timeLeft :  state.console.channel[ownProps.name].playBackState.timeLeft,\r\n    plyaback: state.console.channel[ownProps.name].playBackState.paused,\r\n})\r\n\r\nexport default connect(mapsStateToProps)(TimeLeft);"]},"metadata":{},"sourceType":"module"}