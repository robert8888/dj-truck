{"ast":null,"code":"import _slicedToArray from\"D:\\\\PROJEKTY\\\\APKI\\\\dj-truck\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useCallback,useEffect,useMemo,useState}from'react';import{Button,Dropdown,DropdownButton,FormControl}from\"react-bootstrap\";import{connect}from\"react-redux\";import{clearSearch as _clearSearch,searchInput,searchStart as _searchStart}from\"../../../../actions\";import{API_TYPES,getApisName}from\"./../../../../apis/apiProvider\";import ErrorBoundary from\"./../ErrorBoundary/ErrorBoundary\";import\"./search.scss\";import SearchResults from'./SerachResults/SearchResults.js';var Search=function Search(_ref){var clearSearch=_ref.clearSearch,searchStart=_ref.searchStart,setQuery=_ref.setQuery,queryString=_ref.queryString,controls=_ref.controls,player=_ref.player;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),resultOpen=_useState2[0],setResultOpen=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),source=_useState4[0],setSource=_useState4[1];var _useState5=useState(10),_useState6=_slicedToArray(_useState5,2),limit=_useState6[0],setLimit=_useState6[1];var openList=function openList(){return setResultOpen(true);};useEffect(function(){var defaultSource=getApisName(API_TYPES.MIUSIC_SOURCE,{default:true});setSource(defaultSource);},[setSource]);var selectedHandel=function selectedHandel(){clearSearch();setResultOpen(false);};var apiList=useMemo(function(){return getApisName(API_TYPES.MIUSIC_SOURCE).map(function(api){return React.createElement(Dropdown.Item,{key:api,onClick:setSource.bind(null,api)},\"  \",api,\" \");});},[]);var controlKeyPress=useCallback(function(event){if(event.key!==\"Enter\")return;searchStart(queryString,source,limit);},[queryString,source,limit,searchStart]);var clear=useCallback(function(){clearSearch();setResultOpen(false);},[clearSearch,setResultOpen]);return React.createElement(ErrorBoundary,null,React.createElement(\"div\",{className:\"search\"},React.createElement(\"div\",{className:\"search-controls\"},React.createElement(DropdownButton,{className:\"btn-api-select\",title:source||\"\"},apiList),React.createElement(FormControl,{className:\"search-control\",type:\"text\",placeholder:\"Tap in to serach on youtube\",onChange:function onChange(event){return setQuery(event.target.value);},onKeyPress:controlKeyPress,onFocus:openList,value:queryString}),resultOpen&&React.createElement(Button,{className:\"btn-search-clear\",onClick:clear},\"Clear\"),React.createElement(DropdownButton,{className:\"btn-max-result-select\",title:limit},React.createElement(Dropdown.Item,{onClick:function onClick(){return setLimit(10);}},\" 10 \"),React.createElement(Dropdown.Item,{onClick:function onClick(){return setLimit(25);}},\" 25 \"),React.createElement(Dropdown.Item,{onClick:function onClick(){return setLimit(50);}},\" 50 \"))),React.createElement(SearchResults,{playback:controls===null||controls===void 0?void 0:controls.playback,player:player,open:resultOpen,selectedHandle:selectedHandel})));};var mapStateToProps=function mapStateToProps(state){return{queryString:state.searchReducer.searchString};};var mapDispachToProps=function mapDispachToProps(dispatch){return{setQuery:function setQuery(text){return dispatch(searchInput(text));},searchStart:function searchStart(text,source,limit){return dispatch(_searchStart(text,source,limit));},clearSearch:function clearSearch(){return dispatch(_clearSearch());}};};export default connect(mapStateToProps,mapDispachToProps)(Search);","map":{"version":3,"sources":["D:/PROJEKTY/APKI/dj-truck/src/pages/common/components/ExternalSearch/Search.js"],"names":["React","useCallback","useEffect","useMemo","useState","Button","Dropdown","DropdownButton","FormControl","connect","clearSearch","searchInput","searchStart","API_TYPES","getApisName","ErrorBoundary","SearchResults","Search","setQuery","queryString","controls","player","resultOpen","setResultOpen","source","setSource","limit","setLimit","openList","defaultSource","MIUSIC_SOURCE","default","selectedHandel","apiList","map","api","bind","controlKeyPress","event","key","clear","target","value","playback","mapStateToProps","state","searchReducer","searchString","mapDispachToProps","dispatch","text"],"mappings":"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","sourcesContent":["import React, { useCallback, useEffect, useMemo, useState } from 'react';\r\nimport { Button, Dropdown, DropdownButton, FormControl } from \"react-bootstrap\";\r\nimport { connect } from \"react-redux\";\r\nimport { clearSearch, searchInput, searchStart } from \"../../../../actions\";\r\nimport { API_TYPES, getApisName } from \"./../../../../apis/apiProvider\";\r\nimport ErrorBoundary from \"./../ErrorBoundary/ErrorBoundary\";\r\nimport \"./search.scss\";\r\nimport SearchResults from './SerachResults/SearchResults.js';\r\n\r\n\r\nconst Search = ({\r\n    clearSearch,\r\n    searchStart,\r\n    setQuery,\r\n    queryString,\r\n    controls,\r\n    player,\r\n}) => {\r\n    const [resultOpen, setResultOpen] = useState(false);\r\n    const [source, setSource] = useState(null);\r\n    const [limit, setLimit] = useState(10);\r\n\r\n    const openList = () => setResultOpen(true);\r\n\r\n    useEffect(() => {\r\n        const defaultSource = getApisName(API_TYPES.MIUSIC_SOURCE, { default: true })\r\n        setSource(defaultSource)\r\n    }, [setSource])\r\n\r\n    const selectedHandel = () => {\r\n        clearSearch();\r\n        setResultOpen(false);\r\n    }\r\n\r\n    const apiList = useMemo(() => {\r\n        return getApisName(API_TYPES.MIUSIC_SOURCE).map(api => {\r\n            return (<Dropdown.Item key={api} onClick={setSource.bind(null, api)}>  {api} </Dropdown.Item>)\r\n        })\r\n    }, [])\r\n\r\n    const controlKeyPress = useCallback((event) => {\r\n        if (event.key !== \"Enter\") return\r\n        searchStart(queryString, source, limit)\r\n    }, [queryString, source, limit, searchStart])\r\n\r\n    const clear = useCallback(()=>{\r\n        clearSearch();\r\n        setResultOpen(false);\r\n    },[clearSearch, setResultOpen])\r\n\r\n    return (\r\n        <ErrorBoundary>\r\n            <div className=\"search\">\r\n                <div className=\"search-controls\">\r\n                    <DropdownButton\r\n                        className=\"btn-api-select\"\r\n                        title={source || \"\"}>\r\n                        {apiList}\r\n                    </DropdownButton>\r\n                    <FormControl\r\n                        className=\"search-control\"\r\n                        type=\"text\"\r\n                        placeholder=\"Tap in to serach on youtube\"\r\n                        onChange={event => setQuery(event.target.value)}\r\n                        onKeyPress={controlKeyPress}\r\n                        onFocus={openList}\r\n                        value={queryString} />\r\n                    {resultOpen && \r\n                        <Button className=\"btn-search-clear\" onClick={clear}> \r\n                            Clear \r\n                        </Button>}\r\n                    <DropdownButton\r\n                        className=\"btn-max-result-select\"\r\n                        title={limit}>\r\n                        <Dropdown.Item onClick={() => setLimit(10)}> 10 </Dropdown.Item>\r\n                        <Dropdown.Item onClick={() => setLimit(25)}> 25 </Dropdown.Item>\r\n                        <Dropdown.Item onClick={() => setLimit(50)}> 50 </Dropdown.Item>\r\n                    </DropdownButton>\r\n                </div>\r\n\r\n                <SearchResults\r\n                    playback={controls?.playback}\r\n                    player={player}\r\n                    open={resultOpen}\r\n                    selectedHandle={selectedHandel} />\r\n            </div>\r\n        </ErrorBoundary>\r\n    );\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n    queryString: state.searchReducer.searchString\r\n})\r\n\r\nconst mapDispachToProps = dispatch => ({\r\n    setQuery: (text) => dispatch(searchInput(text)),\r\n    searchStart: (text, source, limit) => dispatch(searchStart(text, source, limit)),\r\n    clearSearch: () => dispatch(clearSearch()),\r\n})\r\n\r\nexport default connect(mapStateToProps, mapDispachToProps)(Search);"]},"metadata":{},"sourceType":"module"}