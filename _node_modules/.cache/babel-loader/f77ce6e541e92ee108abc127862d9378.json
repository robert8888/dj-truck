{"ast":null,"code":"var _jsxFileName = \"D:\\\\PROJEKTY\\\\APKI\\\\DjTruck\\\\djtruck\\\\src\\\\components\\\\common\\\\Slider\\\\Slider.js\";\nimport React from \"react\";\nimport \"./slider.scss\";\n\nclass Slider extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      //from get derived stated from props\n      sliderCurrnetPositionFromProps: null,\n      sliderRange: null,\n      sliderCurrnetPosition: null,\n      sliderPrevPosition: null,\n      isDragged: false,\n      isTemp: false,\n      // is temporary value return as second arguemnt onChange callback\n      thumbSize: 0,\n      sliderAreaOffset: 0\n    };\n\n    this.evalValue = position => {\n      const {\n        from,\n        range\n      } = Slider.getRange(this.props.from, this.props.to);\n      const progress = (position - this.state.thumbSize / 2) / this.state.sliderRange;\n      let value = range * progress + from;\n      return value;\n    };\n\n    this.setValue = value => {\n      const {\n        from,\n        range\n      } = Slider.getRange(this.props.from, this.props.to);\n      const progress = (value - from) / range;\n      const position = progress * this.state.sliderRange;\n      this.setPosition(position + this.state.thumbSize / 2);\n    };\n\n    this.setPosition = (currentPosition, prevPosition) => {\n      let position = this.boundPosition(currentPosition);\n      this.setState({ ...this.state,\n        sliderCurrnetPosition: position,\n        sliderPrevPosition: prevPosition || this.state.sliderPrevPosition\n      }, () => {\n        if (this.props.onChange) {\n          this.props.onChange(this.evalValue(this.state.sliderCurrnetPosition), this.state.isTemp);\n        }\n      });\n    };\n\n    this.mouseDownHandle = event => {\n      if (event.target === this.sliderAreaElement.current || event.target === this.sliderRangeElement.current) {\n        //temporary jummp\n        this.setState({ ...this.state,\n          isTemp: true\n        });\n        const rect = this.sliderAreaElement.current.getBoundingClientRect();\n        const position = this.props.horizontal ? event.clientX - rect.left : event.clientY - rect.top;\n        this.setPosition(position, this.state.sliderCurrnetPositionFromProps);\n      } // dragging\n      else if (event.target === this.sliderThumbElement.current) {\n          this.setState({ ...this.state,\n            isDragged: true\n          });\n          const rect = this.sliderThumbElement.current.getBoundingClientRect();\n          const shiftY = event.clientY - rect.top;\n          const shiftX = event.clientX - rect.left;\n          document.addEventListener(\"mousemove\", e => this.mouseMoveHandler.call(this, e, shiftY, shiftX));\n          document.addEventListener(\"dragstart\", e => e.preventDefault());\n        }\n\n      document.addEventListener(\"mouseup\", this.mouseUpHandler);\n      document.addEventListener(\"dragend\", this.mouseUpHandler);\n    };\n\n    this.mouseUpHandler = event => {\n      if (this.state.isDragged) {\n        this.setState({ ...this.state,\n          isDragged: false\n        });\n      } else {\n        this.setState({ ...this.state,\n          isTemp: false\n        });\n\n        if (this.props.step) {\n          const step = this.props.step;\n          let prevVal = this.evalValue(this.state.sliderPrevPosition);\n\n          if (this.state.sliderCurrnetPosition > this.state.sliderPrevPosition) {\n            prevVal += step;\n          } else {\n            prevVal -= step;\n          }\n\n          this.setPosition(Slider.getPostion(prevVal, this.state, this.props));\n        } else {\n          this.setPosition(this.state.sliderPrevPosition);\n        }\n      }\n\n      document.removeEventListener(\"mousemove\", this.mouseMoveHandler.bind(this));\n      document.removeEventListener(\"mouseup\", this.mouseUpHandler);\n      document.removeEventListener(\"dragend\", this.mouseUpHandler);\n    };\n\n    this.mouseMoveHandler = (event, shiftY, shiftX) => {\n      if (!this.state.isDragged) return;\n      let position;\n\n      if (this.props.horizontal) {\n        position = event.clientX - this.state.sliderAreaOffset - shiftX + this.state.thumbSize / 2;\n      } else {\n        position = event.clientY - this.state.sliderAreaOffset - shiftY + this.state.thumbSize / 2;\n      }\n\n      this.setPosition(position);\n    };\n\n    this.sliderRangeElement = React.createRef();\n    this.sliderThumbElement = React.createRef();\n    this.sliderAreaElement = React.createRef();\n  }\n\n  static getDerivedStateFromProps(props, state) {\n    if (!state.sliderRange || !state.thumbSize) return null;\n\n    if (props.value === undefined) {\n      return { ...state,\n        sliderCurrnetPositionFromProps: state.sliderCurrnetPosition\n      };\n    }\n\n    if (props.value > props.to || props.value < props.from) {\n      return null; //dont modify state\n    }\n\n    let currentPosition = Slider.getPostion(props.value, state, props);\n    return { ...state,\n      sliderCurrnetPositionFromProps: currentPosition\n    };\n  }\n\n  boundPosition(position) {\n    return Math.min(Math.max(position, this.state.thumbSize / 2), this.state.sliderRange + this.state.thumbSize / 2);\n  }\n\n  stickiPostion(position) {\n    if (this.props.stickiZero && this.props.from * this.props.to < 0) {\n      let valueFromPostion = this.evalValue(position);\n\n      if (Math.abs(valueFromPostion) - this.props.stickiZero < 0) {\n        return Slider.getPostion(0, this.state, this.props);\n      }\n    }\n\n    return position;\n  }\n\n  componentDidMount() {\n    const updateState = () => {\n      const thumbRect = this.sliderThumbElement.current.getBoundingClientRect();\n      const areaRect = this.sliderAreaElement.current.getBoundingClientRect();\n      const computedStyleThumbElement = window.getComputedStyle(this.sliderThumbElement.current);\n      const computedStyleRangeElement = window.getComputedStyle(this.sliderRangeElement.current);\n      this.setState(state => {\n        const _state = { ...state\n        };\n\n        if (this.props.horizontal) {\n          _state.sliderCurrnetPosition = parseInt(computedStyleThumbElement.left);\n          _state.sliderRange = parseInt(computedStyleRangeElement.width);\n          _state.sliderAreaOffset = areaRect.left;\n          _state.thumbSize = thumbRect.width;\n        } else {\n          _state.sliderCurrnetPosition = parseInt(computedStyleThumbElement.top);\n          _state.sliderRange = parseInt(computedStyleRangeElement.height);\n          _state.sliderAreaOffset = areaRect.top;\n          _state.thumbSize = thumbRect.height;\n        }\n\n        return _state;\n      }, () => {\n        if (this.props.value !== undefined) {\n          this.setValue(this.props.value);\n        }\n      });\n    };\n\n    updateState();\n    window.addEventListener(\"resize\", updateState.bind(this));\n    this.sliderAreaElement.current.addEventListener(\"mousedown\", this.mouseDownHandle.bind(this));\n  }\n\n  render() {\n    const thumbStyle = {};\n\n    if (this.state.sliderCurrnetPosition !== undefined && !isNaN(this.state.sliderCurrnetPositionFromProps)) {\n      let position = this.stickiPostion(this.state.sliderCurrnetPositionFromProps);\n\n      if (this.props.horizontal) {\n        thumbStyle.left = position;\n      } else {\n        thumbStyle.top = position;\n      }\n    }\n\n    return React.createElement(\"div\", {\n      className: \"slider\" + (this.props.className ? \" \" + this.props.className : \"\"),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 251\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      ref: this.sliderAreaElement,\n      className: \"slider-area\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 256\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      ref: this.sliderRangeElement,\n      className: \"slider-range\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 257\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"slider-thumb\",\n      ref: this.sliderThumbElement,\n      style: thumbStyle,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 258\n      },\n      __self: this\n    })));\n  }\n\n}\n\nSlider.getRange = (from, to) => {\n  return {\n    from,\n    to,\n    range: from * to < 0 ? Math.abs(to) + Math.abs(from) : to - from\n  };\n};\n\nSlider.getPostion = (value, state, props) => {\n  const {\n    from,\n    range\n  } = Slider.getRange(props.from, props.to);\n  const progress = (value - from) / range;\n  const position = progress * state.sliderRange;\n  return position + state.thumbSize / 2;\n};\n\nexport default Slider;","map":{"version":3,"sources":["D:/PROJEKTY/APKI/DjTruck/djtruck/src/components/common/Slider/Slider.js"],"names":["React","Slider","Component","constructor","state","sliderCurrnetPositionFromProps","sliderRange","sliderCurrnetPosition","sliderPrevPosition","isDragged","isTemp","thumbSize","sliderAreaOffset","evalValue","position","from","range","getRange","props","to","progress","value","setValue","setPosition","currentPosition","prevPosition","boundPosition","setState","onChange","mouseDownHandle","event","target","sliderAreaElement","current","sliderRangeElement","rect","getBoundingClientRect","horizontal","clientX","left","clientY","top","sliderThumbElement","shiftY","shiftX","document","addEventListener","e","mouseMoveHandler","call","preventDefault","mouseUpHandler","step","prevVal","getPostion","removeEventListener","bind","createRef","getDerivedStateFromProps","undefined","Math","min","max","stickiPostion","stickiZero","valueFromPostion","abs","componentDidMount","updateState","thumbRect","areaRect","computedStyleThumbElement","window","getComputedStyle","computedStyleRangeElement","_state","parseInt","width","height","render","thumbStyle","isNaN","className"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport \"./slider.scss\";\r\n\r\nclass Slider extends React.Component {\r\n  constructor() {\r\n    super();\r\n\r\n    this.sliderRangeElement = React.createRef();\r\n    this.sliderThumbElement = React.createRef();\r\n    this.sliderAreaElement = React.createRef();\r\n  }\r\n\r\n  state = {\r\n    //from get derived stated from props\r\n    sliderCurrnetPositionFromProps: null,\r\n\r\n    sliderRange: null,\r\n    sliderCurrnetPosition: null,\r\n    sliderPrevPosition: null,\r\n    isDragged: false,\r\n    isTemp: false, // is temporary value return as second arguemnt onChange callback\r\n\r\n    thumbSize: 0,\r\n    sliderAreaOffset: 0\r\n  };\r\n\r\n  static getRange = (from, to) => {\r\n    return {\r\n      from,\r\n      to,\r\n      range: from * to < 0 ? Math.abs(to) + Math.abs(from) : to - from\r\n    };\r\n  };\r\n\r\n  static getPostion = (value, state, props) => {\r\n    const { from, range } = Slider.getRange(props.from, props.to);\r\n    const progress = (value - from) / range;\r\n    const position = progress * state.sliderRange;\r\n    return position + state.thumbSize / 2;\r\n  };\r\n\r\n  static getDerivedStateFromProps(props, state) {\r\n    if (!state.sliderRange || !state.thumbSize) return null;\r\n    if (props.value === undefined) {\r\n      return {\r\n        ...state,\r\n        sliderCurrnetPositionFromProps: state.sliderCurrnetPosition\r\n      };\r\n    }\r\n\r\n    if (props.value > props.to || props.value < props.from) {\r\n      return null; //dont modify state\r\n    }\r\n\r\n    let currentPosition = Slider.getPostion(props.value, state, props);\r\n\r\n    return {\r\n      ...state,\r\n      sliderCurrnetPositionFromProps: currentPosition\r\n    };\r\n  }\r\n\r\n  evalValue = position => {\r\n    const { from, range } = Slider.getRange(this.props.from, this.props.to);\r\n    const progress =\r\n      (position - this.state.thumbSize / 2) / this.state.sliderRange;\r\n\r\n    let value = range * progress + from;\r\n    return value;\r\n  };\r\n\r\n  setValue = value => {\r\n    const { from, range } = Slider.getRange(this.props.from, this.props.to);\r\n    const progress = (value - from) / range;\r\n    const position = progress * this.state.sliderRange;\r\n    this.setPosition(position + this.state.thumbSize / 2);\r\n  };\r\n\r\n  boundPosition(position) {\r\n    return Math.min(\r\n      Math.max(position, this.state.thumbSize / 2),\r\n      this.state.sliderRange + this.state.thumbSize / 2\r\n    );\r\n  }\r\n\r\n  stickiPostion(position) {\r\n    if (this.props.stickiZero && this.props.from * this.props.to < 0) {\r\n      let valueFromPostion = this.evalValue(position);\r\n      if (Math.abs(valueFromPostion) - this.props.stickiZero < 0) {\r\n        return Slider.getPostion(0, this.state, this.props);\r\n      }\r\n    }\r\n    return position;\r\n  }\r\n\r\n  setPosition = (currentPosition, prevPosition) => {\r\n    let position = this.boundPosition(currentPosition);\r\n\r\n    this.setState(\r\n      {\r\n        ...this.state,\r\n        sliderCurrnetPosition: position,\r\n        sliderPrevPosition: prevPosition || this.state.sliderPrevPosition\r\n      },\r\n      () => {\r\n        if (this.props.onChange) {\r\n          this.props.onChange(\r\n            this.evalValue(this.state.sliderCurrnetPosition),\r\n            this.state.isTemp\r\n          );\r\n        }\r\n      }\r\n    );\r\n  };\r\n\r\n  mouseDownHandle = event => {\r\n    if (\r\n      event.target === this.sliderAreaElement.current ||\r\n      event.target === this.sliderRangeElement.current\r\n    ) {\r\n      //temporary jummp\r\n      this.setState({ ...this.state, isTemp: true });\r\n      const rect = this.sliderAreaElement.current.getBoundingClientRect();\r\n      const position = this.props.horizontal\r\n        ? event.clientX - rect.left\r\n        : event.clientY - rect.top;\r\n      this.setPosition(position, this.state.sliderCurrnetPositionFromProps);\r\n    } // dragging\r\n    else if (event.target === this.sliderThumbElement.current) {\r\n      this.setState({ ...this.state, isDragged: true });\r\n      const rect = this.sliderThumbElement.current.getBoundingClientRect();\r\n      const shiftY = event.clientY - rect.top;\r\n      const shiftX = event.clientX - rect.left;\r\n      document.addEventListener(\"mousemove\", e =>\r\n        this.mouseMoveHandler.call(this, e, shiftY, shiftX)\r\n      );\r\n      document.addEventListener(\"dragstart\", e => e.preventDefault());\r\n    }\r\n\r\n    document.addEventListener(\"mouseup\", this.mouseUpHandler);\r\n    document.addEventListener(\"dragend\", this.mouseUpHandler);\r\n  };\r\n\r\n  mouseUpHandler = event => {\r\n    if (this.state.isDragged) {\r\n      this.setState({ ...this.state, isDragged: false });\r\n    } else {\r\n      this.setState({ ...this.state, isTemp: false });\r\n      if (this.props.step) {\r\n        const step = this.props.step;\r\n        let prevVal = this.evalValue(this.state.sliderPrevPosition);\r\n        if (this.state.sliderCurrnetPosition > this.state.sliderPrevPosition) {\r\n          prevVal += step;\r\n        } else {\r\n          prevVal -= step;\r\n        }\r\n        this.setPosition(Slider.getPostion(prevVal, this.state, this.props));\r\n      } else {\r\n        this.setPosition(this.state.sliderPrevPosition);\r\n      }\r\n    }\r\n\r\n    document.removeEventListener(\"mousemove\", this.mouseMoveHandler.bind(this));\r\n    document.removeEventListener(\"mouseup\", this.mouseUpHandler);\r\n    document.removeEventListener(\"dragend\", this.mouseUpHandler);\r\n  };\r\n\r\n  mouseMoveHandler = (event, shiftY, shiftX) => {\r\n    if (!this.state.isDragged) return;\r\n    let position;\r\n    if (this.props.horizontal) {\r\n      position =\r\n        event.clientX -\r\n        this.state.sliderAreaOffset -\r\n        shiftX +\r\n        this.state.thumbSize / 2;\r\n    } else {\r\n      position =\r\n        event.clientY -\r\n        this.state.sliderAreaOffset -\r\n        shiftY +\r\n        this.state.thumbSize / 2;\r\n    }\r\n    this.setPosition(position);\r\n  };\r\n\r\n  componentDidMount() {\r\n    const updateState = () => {\r\n      const thumbRect = this.sliderThumbElement.current.getBoundingClientRect();\r\n      const areaRect = this.sliderAreaElement.current.getBoundingClientRect();\r\n      const computedStyleThumbElement = window.getComputedStyle(\r\n        this.sliderThumbElement.current\r\n      );\r\n      const computedStyleRangeElement = window.getComputedStyle(\r\n        this.sliderRangeElement.current\r\n      );\r\n\r\n      this.setState(\r\n        state => {\r\n          const _state = { ...state };\r\n          if (this.props.horizontal) {\r\n            _state.sliderCurrnetPosition = parseInt(\r\n              computedStyleThumbElement.left\r\n            );\r\n            _state.sliderRange = parseInt(computedStyleRangeElement.width);\r\n            _state.sliderAreaOffset = areaRect.left;\r\n            _state.thumbSize = thumbRect.width;\r\n          } else {\r\n            _state.sliderCurrnetPosition = parseInt(\r\n              computedStyleThumbElement.top\r\n            );\r\n            _state.sliderRange = parseInt(computedStyleRangeElement.height);\r\n            _state.sliderAreaOffset = areaRect.top;\r\n            _state.thumbSize = thumbRect.height;\r\n          }\r\n          return _state;\r\n        },\r\n        () => {\r\n          if (this.props.value !== undefined) {\r\n            this.setValue(this.props.value);\r\n          }\r\n        }\r\n      );\r\n    };\r\n    updateState();\r\n    window.addEventListener(\"resize\", updateState.bind(this));\r\n\r\n    this.sliderAreaElement.current.addEventListener(\r\n      \"mousedown\",\r\n      this.mouseDownHandle.bind(this)\r\n    );\r\n  }\r\n\r\n  render() {\r\n    const thumbStyle = {};\r\n    if (\r\n      this.state.sliderCurrnetPosition !== undefined &&\r\n      !isNaN(this.state.sliderCurrnetPositionFromProps)\r\n    ) {\r\n      let position = this.stickiPostion(\r\n        this.state.sliderCurrnetPositionFromProps\r\n      );\r\n      if (this.props.horizontal) {\r\n        thumbStyle.left = position;\r\n      } else {\r\n        thumbStyle.top = position;\r\n      }\r\n    }\r\n\r\n    return (\r\n      <div\r\n        className={\r\n          \"slider\" + (this.props.className ? \" \" + this.props.className : \"\")\r\n        }\r\n      >\r\n        <div ref={this.sliderAreaElement} className=\"slider-area\">\r\n          <div ref={this.sliderRangeElement} className=\"slider-range\" />\r\n          <div\r\n            className=\"slider-thumb\"\r\n            ref={this.sliderThumbElement}\r\n            style={thumbStyle}\r\n          />\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Slider;\r\n"]},"metadata":{},"sourceType":"module"}