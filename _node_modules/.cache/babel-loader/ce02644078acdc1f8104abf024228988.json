{"ast":null,"code":"import React, { useMemo, useState, useEffect, useCallback } from \"react\";\nimport { getApi } from \"./../../../../apis/apiProvider\";\nimport { PLAYBACK_STATE } from \"./ListItem/PlaybackButton/PlaybackButton\"; //getRecordUrl\n\nexport function useRecordPlayer() {\n  const [btnStore, setBtnControl] = useState(null);\n  const [mediaElement, setMediaElement] = useState(null);\n  const api = useMemo(() => {\n    return getApi('RecordsStore');\n  }, [getApi]);\n  useEffect(() => {\n    const medEl = document.createElement('audio');\n    medEl.autoplay = true;\n    medEl.preload = 'metadata';\n    setMediaElement(medEl);\n  }, [setMediaElement]);\n  const playback = useCallback((id, playbackState) => {\n    console.log(id, playbackState);\n    mediaElement.src = api.getRecordUrl(id);\n    mediaElement.play();\n  }, [mediaElement, api]);\n\n  function seek(id, position) {\n    console.log(\"seek \", id, position);\n  }\n\n  function btnRef(id, ref) {\n    setBtnControl({ ...btnStore,\n      [id]: () => ref()\n    });\n  }\n\n  return [playback, seek, btnRef];\n}","map":{"version":3,"sources":["D:/PROJEKTY/APKI/dj-truck/src/pages/common/components/RecordList/useRecordPlayer.js"],"names":["React","useMemo","useState","useEffect","useCallback","getApi","PLAYBACK_STATE","useRecordPlayer","btnStore","setBtnControl","mediaElement","setMediaElement","api","medEl","document","createElement","autoplay","preload","playback","id","playbackState","console","log","src","getRecordUrl","play","seek","position","btnRef","ref"],"mappings":"AAAA,OAAOA,KAAP,IAAgBC,OAAhB,EAAyBC,QAAzB,EAAmCC,SAAnC,EAA8CC,WAA9C,QAAiE,OAAjE;AACA,SAASC,MAAT,QAAuB,gCAAvB;AACA,SAAQC,cAAR,QAA6B,0CAA7B,C,CAEA;;AACA,OAAO,SAASC,eAAT,GAA0B;AAC7B,QAAM,CAACC,QAAD,EAAWC,aAAX,IAA4BP,QAAQ,CAAC,IAAD,CAA1C;AACA,QAAM,CAACQ,YAAD,EAAeC,eAAf,IAAkCT,QAAQ,CAAC,IAAD,CAAhD;AAEA,QAAMU,GAAG,GAAGX,OAAO,CAAC,MAAI;AACpB,WAAOI,MAAM,CAAC,cAAD,CAAb;AACH,GAFkB,EAEhB,CAACA,MAAD,CAFgB,CAAnB;AAIAF,EAAAA,SAAS,CAAC,MAAI;AACV,UAAMU,KAAK,GAAGC,QAAQ,CAACC,aAAT,CAAuB,OAAvB,CAAd;AACAF,IAAAA,KAAK,CAACG,QAAN,GAAiB,IAAjB;AACAH,IAAAA,KAAK,CAACI,OAAN,GAAgB,UAAhB;AACAN,IAAAA,eAAe,CAACE,KAAD,CAAf;AACH,GALQ,EAKN,CAACF,eAAD,CALM,CAAT;AAOA,QAAMO,QAAQ,GAAGd,WAAW,CAAC,CAACe,EAAD,EAAKC,aAAL,KAAqB;AAC9CC,IAAAA,OAAO,CAACC,GAAR,CAAYH,EAAZ,EAAgBC,aAAhB;AACAV,IAAAA,YAAY,CAACa,GAAb,GAAmBX,GAAG,CAACY,YAAJ,CAAiBL,EAAjB,CAAnB;AACAT,IAAAA,YAAY,CAACe,IAAb;AACH,GAJ2B,EAIzB,CAACf,YAAD,EAAeE,GAAf,CAJyB,CAA5B;;AAMA,WAASc,IAAT,CAAcP,EAAd,EAAkBQ,QAAlB,EAA2B;AACvBN,IAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ,EAAqBH,EAArB,EAA0BQ,QAA1B;AACH;;AAED,WAASC,MAAT,CAAgBT,EAAhB,EAAoBU,GAApB,EAAwB;AACpBpB,IAAAA,aAAa,CAAC,EACV,GAAGD,QADO;AAEV,OAACW,EAAD,GAAM,MAAMU,GAAG;AAFL,KAAD,CAAb;AAIH;;AAED,SAAO,CAACX,QAAD,EAAWQ,IAAX,EAAiBE,MAAjB,CAAP;AACH","sourcesContent":["import React, { useMemo, useState, useEffect, useCallback } from \"react\"\r\nimport { getApi } from \"./../../../../apis/apiProvider\";\r\nimport {PLAYBACK_STATE} from \"./ListItem/PlaybackButton/PlaybackButton\";\r\n\r\n//getRecordUrl\r\nexport function useRecordPlayer(){\r\n    const [btnStore, setBtnControl] = useState(null);\r\n    const [mediaElement, setMediaElement] = useState(null);\r\n\r\n    const api = useMemo(()=>{\r\n        return getApi('RecordsStore');\r\n    }, [getApi])\r\n\r\n    useEffect(()=>{\r\n        const medEl = document.createElement('audio');\r\n        medEl.autoplay = true;\r\n        medEl.preload = 'metadata'\r\n        setMediaElement(medEl)\r\n    }, [setMediaElement])\r\n\r\n    const playback = useCallback((id, playbackState)=>{\r\n        console.log(id, playbackState);\r\n        mediaElement.src = api.getRecordUrl(id);\r\n        mediaElement.play(); \r\n    }, [mediaElement, api])\r\n\r\n    function seek(id, position){\r\n        console.log(\"seek \", id , position)\r\n    }\r\n\r\n    function btnRef(id, ref){\r\n        setBtnControl({\r\n            ...btnStore,\r\n            [id]: () => ref()\r\n        })\r\n    }\r\n\r\n    return [playback, seek, btnRef]\r\n}"]},"metadata":{},"sourceType":"module"}