{"ast":null,"code":"var _jsxFileName = \"D:\\\\PROJEKTY\\\\APKI\\\\dj-truck\\\\src\\\\pages\\\\common\\\\Hooks\\\\Emoticons\\\\Emoticons\\\\Emoticons.js\";\nimport React, { useCallback, useRef, useState, useEffect } from 'react';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faAngleDoubleLeft, faAngleDoubleRight } from \"@fortawesome/free-solid-svg-icons\";\nimport icons from \"./emoji.json\";\nimport \"./emoticons.scss\";\nconst perPanel = 30;\n\nconst Emoticons = ({\n  onSelect,\n  toggle\n}) => {\n  const [iconPanels, setPanels] = useState(null);\n  const panelsLen = useRef();\n  const [display, setDisplay] = useState(false);\n  const [currentSlide, setCurrentSlide] = useState(0);\n  const createPanels = useCallback((from, to) => {\n    var _to;\n\n    to = (_to = to) !== null && _to !== void 0 ? _to : from + 1;\n    if (to * perPanel > icons.length) return;\n    let panels = [];\n\n    for (let i = perPanel * from; i < perPanel * to; i += perPanel) {\n      let panel = [];\n\n      for (let j = i; j < perPanel + i && j < icons.length; j++) {\n        let icon = icons[j];\n        panel.push(React.createElement(\"button\", {\n          key: 'icon-' + (i + j),\n          className: \"emoticons-btn\",\n          onClick: onSelect.bind(null, icon.emoji),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 24\n          },\n          __self: this\n        }, icon.emoji));\n      }\n\n      panels.push(React.createElement(\"section\", {\n        style: style.sectionStyle,\n        className: \"emoticons-panel\",\n        key: 'pannel-' + i,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 28\n        },\n        __self: this\n      }, panel));\n    }\n\n    if (!panelsLen.current) {\n      panelsLen.current = 0;\n    }\n\n    panelsLen.current += panels.length;\n    return panels;\n  }, []);\n  const createNext = useCallback(() => {\n    setPanels(panels => [...panels, createPanels(panelsLen.current)]);\n  }, [setPanels, createPanels, panelsLen]);\n  const next = useCallback(event => {\n    event.preventDefault();\n    setCurrentSlide(c => {\n      if (c + 1 < panelsLen.current) {\n        return c + 1;\n      }\n\n      return c;\n    });\n    createNext();\n  }, [panelsLen, createNext]);\n  const prev = useCallback(event => {\n    event.preventDefault();\n    setCurrentSlide(c => {\n      if (c - 1 > 0) {\n        return c - 1;\n      }\n\n      return c;\n    });\n  }, []);\n  const toggleHandler = useCallback(() => {\n    if (!panelsLen.current) {\n      setPanels(createPanels(0, 5));\n    }\n\n    setDisplay(display => !display);\n  }, [setDisplay, setPanels, panelsLen, createPanels]);\n  useEffect(() => {\n    toggle.current = toggleHandler;\n  }, [toggle]);\n  const hide = useCallback(event => {\n    if (!event.target.closest('.emoticons-container') && !event.target.closest('.emoticon-btn')) {\n      window.removeEventListener('mousedown', hide);\n      setDisplay(false);\n    }\n  }, [setDisplay]);\n  useEffect(() => {\n    if (display) {\n      window.addEventListener('mousedown', hide);\n    } else {\n      window.removeEventListener('mousedown', hide);\n    }\n  }, [display, setDisplay, hide]);\n  return React.createElement(\"div\", {\n    className: \"emoticons-container emoticons-popup\",\n    style: {\n      display: display ? 'block' : 'none'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93\n    },\n    __self: this\n  }, React.createElement(\"button\", {\n    className: \"emoticons-btn-prev\",\n    style: style.sliderNavigationButton,\n    onClick: prev,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94\n    },\n    __self: this\n  }, React.createElement(FontAwesomeIcon, {\n    icon: faAngleDoubleLeft,\n    className: \"emoticons-btn-icon\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"emoticons-slider\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"emoticons-slides\",\n    style: {\n      transform: `translateX(-${currentSlide * 210}px)`,\n      transition: 'transform 0.2s'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98\n    },\n    __self: this\n  }, iconPanels)), React.createElement(\"button\", {\n    className: \"emoticons-btn-next\",\n    style: style.sliderNavigationButton,\n    onClick: next,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102\n    },\n    __self: this\n  }, React.createElement(FontAwesomeIcon, {\n    icon: faAngleDoubleRight,\n    className: \"emoticons-btn-icon\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103\n    },\n    __self: this\n  })));\n};\n\nexport default Emoticons;","map":{"version":3,"sources":["D:/PROJEKTY/APKI/dj-truck/src/pages/common/Hooks/Emoticons/Emoticons/Emoticons.js"],"names":["React","useCallback","useRef","useState","useEffect","FontAwesomeIcon","faAngleDoubleLeft","faAngleDoubleRight","icons","perPanel","Emoticons","onSelect","toggle","iconPanels","setPanels","panelsLen","display","setDisplay","currentSlide","setCurrentSlide","createPanels","from","to","length","panels","i","panel","j","icon","push","bind","emoji","style","sectionStyle","current","createNext","next","event","preventDefault","c","prev","toggleHandler","hide","target","closest","window","removeEventListener","addEventListener","sliderNavigationButton","transform","transition"],"mappings":"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","sourcesContent":["import React, { useCallback, useRef, useState, useEffect } from 'react';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\nimport { faAngleDoubleLeft, faAngleDoubleRight } from \"@fortawesome/free-solid-svg-icons\";\r\nimport icons from \"./emoji.json\";\r\nimport \"./emoticons.scss\";\r\nconst perPanel = 30;\r\n\r\nconst Emoticons = ({ onSelect, toggle }) => {\r\n    const [iconPanels, setPanels] = useState(null);\r\n    const panelsLen = useRef();\r\n    const [display, setDisplay] = useState(false);\r\n    const [currentSlide, setCurrentSlide] = useState(0);\r\n\r\n    const createPanels = useCallback((from, to) => {\r\n        to = to ?? from + 1;\r\n        if(to * perPanel > icons.length) return;\r\n\r\n        let panels = [];\r\n        for (let i = perPanel * from; i < perPanel * to; i += perPanel) {\r\n            let panel = [];\r\n            for (let j = i; (j < perPanel + i) && (j <  icons.length); j++) {\r\n                let icon = icons[j]\r\n                panel.push(\r\n                    <button key={'icon-' + (i + j)} className=\"emoticons-btn\" onClick={onSelect.bind(null, icon.emoji)}>{icon.emoji}</button>\r\n                )\r\n            }\r\n            panels.push(\r\n                <section style={style.sectionStyle} className=\"emoticons-panel\" key={'pannel-' + i}>\r\n                    {panel}\r\n                </section>\r\n            )\r\n        }\r\n        if(!panelsLen.current){\r\n            panelsLen.current = 0;\r\n        }\r\n        panelsLen.current += panels.length;\r\n        return panels;\r\n    }, [])\r\n\r\n    const createNext = useCallback(()=>{\r\n        setPanels( panels => [...panels, createPanels(panelsLen.current)])\r\n    }, [setPanels, createPanels, panelsLen])\r\n\r\n    const next = useCallback((event) => {\r\n        event.preventDefault();\r\n        setCurrentSlide(c => {\r\n            if (c + 1 < panelsLen.current) {\r\n                return c + 1;\r\n            }\r\n            return c;\r\n        });\r\n        createNext();\r\n    }, [panelsLen, createNext])\r\n\r\n    const prev = useCallback((event) => {\r\n        event.preventDefault();\r\n        setCurrentSlide(c => {\r\n            if (c - 1 > 0) {\r\n                return c - 1;\r\n            }\r\n            return c;\r\n        })\r\n    }, [])\r\n\r\n    const toggleHandler = useCallback(() => {\r\n        if (!panelsLen.current) {\r\n            setPanels(createPanels(0, 5));\r\n        }\r\n        setDisplay(display => !display);\r\n    }, [setDisplay, setPanels, panelsLen, createPanels])\r\n\r\n    useEffect(() => {\r\n        toggle.current = toggleHandler\r\n    }, [toggle])\r\n\r\n    const hide = useCallback(event => {\r\n        if (!event.target.closest('.emoticons-container') &&\r\n            !event.target.closest('.emoticon-btn')) {\r\n                window.removeEventListener('mousedown', hide);\r\n                setDisplay(false)\r\n        }\r\n    }, [setDisplay])\r\n\r\n    useEffect(() => {\r\n        if (display) {\r\n            window.addEventListener('mousedown', hide);\r\n        } else {\r\n            window.removeEventListener('mousedown', hide)\r\n        }\r\n    }, [display, setDisplay, hide])\r\n\r\n    return (\r\n        <div className=\"emoticons-container emoticons-popup\" style={{display: (display) ? 'block' : 'none' }}>\r\n            <button className=\"emoticons-btn-prev\" style={style.sliderNavigationButton} onClick={prev}>\r\n                <FontAwesomeIcon icon={faAngleDoubleLeft} className=\"emoticons-btn-icon\" />\r\n            </button>\r\n            <div className=\"emoticons-slider\">\r\n                <div className=\"emoticons-slides\" style={{ transform: `translateX(-${currentSlide * 210}px)`, transition: 'transform 0.2s' }}>\r\n                    {iconPanels}\r\n                </div>\r\n            </div>\r\n            <button className=\"emoticons-btn-next\" style={style.sliderNavigationButton} onClick={next}>\r\n                <FontAwesomeIcon icon={faAngleDoubleRight} className=\"emoticons-btn-icon\" />\r\n            </button>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Emoticons;"]},"metadata":{},"sourceType":"module"}