{"ast":null,"code":"var _jsxFileName = \"D:\\\\PROJEKTY\\\\APKI\\\\dj-truck\\\\src\\\\pages\\\\console\\\\components\\\\Console\\\\Mixer\\\\Recorder\\\\Recorder.js\";\nimport React, { useState, useCallback, useEffect } from \"react\";\nimport { connect } from \"react-redux\";\nimport { createRecordinRequest, endRecording } from \"./../../../../../../actions\";\nimport RecordButton from \"./../componets/RecordButton/RecordButton\";\nimport RecordNameInput from \"./../componets/RecordNameInput/RecordNameInput\";\nimport RecordTime from \"../componets/RecordTime/RecordTime\";\nimport RECORDER_STATE from \"./../../../../../../reducers/console/recorder/stateDef\";\nimport \"./recorder.scss\";\n\nconst Recorder = ({\n  recordingState,\n  startRecording,\n  endRecording,\n  userLogged,\n  recName: externalRecName\n}) => {\n  const [buttonDisabled, setButtonDisabled] = useState(false);\n  const [inputDisabled, setInputDisabled] = useState(false);\n  const [timeRuning, setTimeRuning] = useState(false);\n  const [prepering, setPrepering] = useState(false);\n  const [recName, setRecName] = useState(\"\");\n  const [clearTime, setClearTimeHandler] = useState(null);\n  useEffect(() => {\n    setRecName(externalRecName);\n  }, [externalRecName, setRecName]);\n  useEffect(() => {\n    setInputDisabled(!userLogged);\n    setButtonDisabled(!userLogged);\n  }, [userLogged, setButtonDisabled, setInputDisabled]);\n  const assignClearHandler = useCallback(handler => {\n    setClearTimeHandler(() => handler);\n  }, [setClearTimeHandler]);\n  const recordStateChange = useCallback(state => {\n    if (state) {\n      startRecording(recName);\n      setPrepering(true);\n    } else {\n      endRecording();\n      clearTime();\n    }\n\n    setInputDisabled(state);\n  }, [setInputDisabled, startRecording, endRecording, recName, clearTime]); //time runing after state change in respone to server\n\n  useEffect(() => {\n    switch (recordingState) {\n      case RECORDER_STATE.INIT:\n        {\n          setPrepering(true);\n          break;\n        }\n\n      case RECORDER_STATE.FAIL:\n        {\n          setPrepering(false);\n          break;\n        }\n\n      case RECORDER_STATE.RECORDING:\n        {\n          setPrepering(false);\n          setTimeRuning(true);\n          break;\n        }\n\n      case RECORDER_STATE.IDLE:\n        {\n          setPrepering(false);\n          setTimeRuning(false);\n          break;\n        }\n\n      default:\n        return;\n    }\n  }, [recordingState, setTimeRuning, setPrepering]);\n  return React.createElement(\"div\", {\n    className: \"recorder\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"label\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77\n    },\n    __self: this\n  }, \"REC\"), React.createElement(RecordButton, {\n    onChange: recordStateChange,\n    disabled: buttonDisabled,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78\n    },\n    __self: this\n  }), React.createElement(RecordNameInput, {\n    disabled: inputDisabled,\n    value: recName,\n    onChange: str => setRecName(str),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81\n    },\n    __self: this\n  }), React.createElement(RecordTime, {\n    prepering: prepering,\n    runing: timeRuning,\n    clearHandler: assignClearHandler,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85\n    },\n    __self: this\n  }));\n};\n\nconst mapStateToProps = state => ({\n  recordingState: state.recorder.recordingState,\n  recName: state.recorder.recName,\n  userLogged: state.user.logged\n});\n\nconst mapDispatchToProps = dispatch => ({\n  startRecording: recName => dispatch(createRecordinRequest(recName)),\n  endRecording: () => dispatch(endRecording())\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Recorder);","map":{"version":3,"sources":["D:/PROJEKTY/APKI/dj-truck/src/pages/console/components/Console/Mixer/Recorder/Recorder.js"],"names":["React","useState","useCallback","useEffect","connect","createRecordinRequest","endRecording","RecordButton","RecordNameInput","RecordTime","RECORDER_STATE","Recorder","recordingState","startRecording","userLogged","recName","externalRecName","buttonDisabled","setButtonDisabled","inputDisabled","setInputDisabled","timeRuning","setTimeRuning","prepering","setPrepering","setRecName","clearTime","setClearTimeHandler","assignClearHandler","handler","recordStateChange","state","INIT","FAIL","RECORDING","IDLE","str","mapStateToProps","recorder","user","logged","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React, { useState,  useCallback, useEffect } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { createRecordinRequest , endRecording } from \"./../../../../../../actions\";\r\nimport RecordButton from \"./../componets/RecordButton/RecordButton\";\r\nimport RecordNameInput from \"./../componets/RecordNameInput/RecordNameInput\";\r\nimport RecordTime from \"../componets/RecordTime/RecordTime\";\r\nimport RECORDER_STATE from \"./../../../../../../reducers/console/recorder/stateDef\";\r\nimport \"./recorder.scss\";\r\n\r\n\r\nconst Recorder = ({ recordingState, startRecording, endRecording , userLogged, recName: externalRecName }) =>{\r\n    const [buttonDisabled, setButtonDisabled] = useState(false);\r\n    const [inputDisabled, setInputDisabled] = useState(false);\r\n    const [timeRuning, setTimeRuning] = useState(false)\r\n    const [prepering, setPrepering] = useState(false)\r\n    const [recName , setRecName] = useState(\"\");\r\n\r\n    const [clearTime , setClearTimeHandler] = useState(null);\r\n\r\n    useEffect(()=>{\r\n        setRecName(externalRecName);\r\n    },[externalRecName, setRecName])\r\n\r\n    useEffect(()=>{\r\n        setInputDisabled(!userLogged);\r\n        setButtonDisabled(!userLogged);\r\n    }, [userLogged, setButtonDisabled, setInputDisabled])\r\n\r\n    const assignClearHandler = useCallback( handler => {\r\n        setClearTimeHandler(() => handler)\r\n    }, [setClearTimeHandler])\r\n\r\n\r\n    const recordStateChange = useCallback((state)=>{\r\n        if(state){\r\n            startRecording(recName);\r\n            setPrepering(true)\r\n        } else {\r\n            endRecording();\r\n            clearTime();\r\n        }\r\n        setInputDisabled(state);\r\n    }, [setInputDisabled, \r\n        startRecording, \r\n        endRecording, \r\n        recName, \r\n        clearTime])\r\n\r\n    //time runing after state change in respone to server\r\n    useEffect(()=>{\r\n        switch(recordingState){\r\n            case RECORDER_STATE.INIT:{\r\n                setPrepering(true);\r\n                break;\r\n            }\r\n            case RECORDER_STATE.FAIL:{\r\n                setPrepering(false);\r\n                break;\r\n            }\r\n            case RECORDER_STATE.RECORDING : {\r\n                setPrepering(false);\r\n                setTimeRuning(true);\r\n                break;\r\n            }\r\n            case RECORDER_STATE.IDLE : {\r\n                setPrepering(false);\r\n                setTimeRuning(false);\r\n                break;\r\n            }\r\n            default : return;\r\n        }\r\n    }, [recordingState, setTimeRuning, setPrepering])\r\n\r\n\r\n    return (\r\n        <div className=\"recorder\">\r\n            <div className=\"label\">REC</div>\r\n            <RecordButton \r\n                onChange={recordStateChange}\r\n                disabled={buttonDisabled} />\r\n            <RecordNameInput \r\n                disabled={inputDisabled}\r\n                value= { recName }\r\n                onChange={str => setRecName(str)}/>\r\n            <RecordTime \r\n                prepering={prepering}\r\n                runing={timeRuning} \r\n                clearHandler={ assignClearHandler }/>\r\n        </div>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n    recordingState : state.recorder.recordingState,\r\n    recName : state.recorder.recName,\r\n    userLogged : state.user.logged,\r\n})\r\n\r\nconst mapDispatchToProps = dispatch => ({\r\n    startRecording : recName => dispatch(createRecordinRequest(recName)),\r\n    endRecording : () => dispatch(endRecording())\r\n})\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Recorder);"]},"metadata":{},"sourceType":"module"}