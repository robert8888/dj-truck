{"ast":null,"code":"var _jsxFileName = \"D:\\\\PROJEKTY\\\\APKI\\\\DjTruck\\\\djtruck\\\\src\\\\pages\\\\app\\\\components\\\\Console\\\\Effector\\\\Effector.js\";\nimport React, { useState, useEffect } from \"react\";\nimport { connect } from \"react-redux\";\nimport \"./effector-channel.scss\";\nimport DryWetKnob from \"./DryWetKnob/DryWetKnob\";\nimport EffectorButton from \"./EffectorButton/EffectorButton\";\nimport EffectorKnob from \"./EffectorKnob/EffectorKnob\";\nimport { Dropdown, DropdownButton } from \"react-bootstrap\";\nimport { setEffectParametr, setCurrentEffect, setDryWet } from \"./../../../../../actions\";\nimport mapComponentToParameter from \"./utils/mapComponentToParameter\";\n\nconst Effector = props => {\n  const [currentEffect, setCurrentEffect] = useState(undefined);\n  const [effectorParams, setEffectorParams] = useState([]);\n\n  const paramChangeHandle = (param, value) => {\n    props.setParameter(currentEffect, param, value);\n  };\n\n  useEffect(() => {\n    props.setCurrentEffect(currentEffect);\n  }, [currentEffect, props.setCurrentEffect]);\n  useEffect(() => {\n    let currentEffectParams = props.availableEffects[currentEffect];\n\n    if (!currentEffectParams) {\n      setEffectorParams([]);\n      return;\n    }\n\n    setEffectorParams(Object.entries(currentEffectParams).map(([name, param]) => {\n      const effectState = props.channelState.effects[currentEffect];\n      let value = param.defaultValue;\n\n      if (effectState) {\n        value = effectState[name] || value;\n      }\n\n      let bindData = {\n        channel: props.channel,\n        effect: currentEffect,\n        name: name\n      };\n\n      if (param.type === \"float\") {\n        let Knob = mapComponentToParameter(bindData, EffectorKnob);\n        return React.createElement(Knob, {\n          key: name + param.description,\n          scale: param.max - param.min,\n          initValue: value,\n          alt: param.description,\n          showValue: true,\n          onChange: paramChangeHandle.bind(null, name),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 49\n          },\n          __self: this\n        });\n      } else if (param.type === \"bool\") {\n        const Button = mapComponentToParameter(bindData, EffectorButton);\n        return React.createElement(Button, {\n          key: currentEffect + name + param.description,\n          onChange: paramChangeHandle.bind(null, name),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 60\n          },\n          __self: this\n        }, param.description);\n      }\n    }));\n  }, [currentEffect, props.effects, props.availableEffects]);\n  const availableEffects = Object.keys(props.availableEffects).map((effect, index) => {\n    return React.createElement(Dropdown.Item, {\n      key: effect + \"-\" + index,\n      onClick: setCurrentEffect.bind(null, effect),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71\n      },\n      __self: this\n    }, effect);\n  });\n  return React.createElement(\"div\", {\n    className: \"effector-channel\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76\n    },\n    __self: this\n  }, React.createElement(\"span\", {\n    className: \"label\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77\n    },\n    __self: this\n  }, \"FX\" + props.channel), React.createElement(\"div\", {\n    className: \"dra-wet-knob\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78\n    },\n    __self: this\n  }, React.createElement(DryWetKnob, {\n    alt: \"D/W\",\n    onChange: props.setDryWet,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"effect-selector\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81\n    },\n    __self: this\n  }, React.createElement(DropdownButton, {\n    title: currentEffect || \"-----\",\n    className: \"btn-effect-select\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82\n    },\n    __self: this\n  }, React.createElement(Dropdown.Item, {\n    key: \"none\",\n    onClick: setCurrentEffect.bind(null, undefined),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83\n    },\n    __self: this\n  }, \" ----- \"), availableEffects)), React.createElement(\"div\", {\n    className: \"effector-param\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87\n    },\n    __self: this\n  }, effectorParams));\n};\n\nconst mapStateToProps = (state, ownProps) => ({\n  availableEffects: state.effector.effects,\n  channelState: state.effector.channels[ownProps.channel]\n});\n\nconst mapDispachToProps = (dispatch, ownProps) => ({\n  setParameter: (...args) => dispatch(setEffectParametr(ownProps.channel, ...args)),\n  setCurrentEffect: effect => dispatch(setCurrentEffect(ownProps.channel, effect)),\n  setDryWet: value => dispatch(setDryWet(ownProps.channel, value))\n});\n\nexport default connect(mapStateToProps, mapDispachToProps)(Effector);","map":{"version":3,"sources":["D:/PROJEKTY/APKI/DjTruck/djtruck/src/pages/app/components/Console/Effector/Effector.js"],"names":["React","useState","useEffect","connect","DryWetKnob","EffectorButton","EffectorKnob","Dropdown","DropdownButton","setEffectParametr","setCurrentEffect","setDryWet","mapComponentToParameter","Effector","props","currentEffect","undefined","effectorParams","setEffectorParams","paramChangeHandle","param","value","setParameter","currentEffectParams","availableEffects","Object","entries","map","name","effectState","channelState","effects","defaultValue","bindData","channel","effect","type","Knob","description","max","min","bind","Button","keys","index","mapStateToProps","state","ownProps","effector","channels","mapDispachToProps","dispatch","args"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport \"./effector-channel.scss\";\r\nimport DryWetKnob from \"./DryWetKnob/DryWetKnob\";\r\nimport EffectorButton from \"./EffectorButton/EffectorButton\";\r\nimport EffectorKnob from \"./EffectorKnob/EffectorKnob\";\r\nimport { Dropdown, DropdownButton } from \"react-bootstrap\";\r\nimport { setEffectParametr, setCurrentEffect, setDryWet } from \"./../../../../../actions\";\r\nimport mapComponentToParameter from \"./utils/mapComponentToParameter\";\r\nconst Effector = props => {\r\n\r\n    const [currentEffect, setCurrentEffect] = useState(undefined);\r\n    const [effectorParams, setEffectorParams] = useState([]);\r\n\r\n\r\n    const paramChangeHandle = (param, value) => {\r\n        props.setParameter(currentEffect, param, value);\r\n    }\r\n\r\n    useEffect(() => {\r\n        props.setCurrentEffect(currentEffect);\r\n    }, [currentEffect, props.setCurrentEffect])\r\n\r\n\r\n    useEffect(() => {\r\n        let currentEffectParams = props.availableEffects[currentEffect];\r\n        if (!currentEffectParams) {\r\n            setEffectorParams([]);\r\n            return;\r\n        }\r\n\r\n        setEffectorParams(Object.entries(currentEffectParams).map(([name, param]) => {\r\n            const effectState = props.channelState.effects[currentEffect];\r\n\r\n            let value = param.defaultValue;\r\n            if (effectState) {\r\n                value = effectState[name] || value;\r\n            }\r\n\r\n            let bindData = {\r\n                channel: props.channel,\r\n                effect: currentEffect,\r\n                name: name\r\n            };\r\n\r\n            if (param.type === \"float\") {\r\n                let Knob = mapComponentToParameter(bindData, EffectorKnob);\r\n                return (\r\n                    <Knob\r\n                        key={name + param.description}\r\n                        scale={param.max - param.min}\r\n                        initValue={value}\r\n                        alt={param.description}\r\n                        showValue\r\n                        onChange={paramChangeHandle.bind(null, name)} />\r\n                )\r\n            } else if (param.type === \"bool\") {\r\n                const Button = mapComponentToParameter(bindData, EffectorButton);\r\n\r\n                return <Button\r\n                            key={currentEffect + name + param.description}\r\n                            onChange={paramChangeHandle.bind(null, name)}>\r\n                                 {param.description}\r\n                       </Button>\r\n            }\r\n        }))\r\n    }, [currentEffect, props.effects, props.availableEffects])\r\n\r\n\r\n    const availableEffects = Object.keys(props.availableEffects).map((effect, index) => {\r\n        return (<Dropdown.Item key={effect + \"-\" + index} onClick={setCurrentEffect.bind(null, effect)}>{effect}</Dropdown.Item>)\r\n    })\r\n\r\n\r\n    return (\r\n        <div className=\"effector-channel\">\r\n            <span className=\"label\">{\"FX\" + props.channel}</span>\r\n            <div className=\"dra-wet-knob\">\r\n                <DryWetKnob alt=\"D/W\" onChange={props.setDryWet} />\r\n            </div>\r\n            <div className=\"effect-selector\">\r\n                <DropdownButton title={currentEffect || \"-----\"} className=\"btn-effect-select\">\r\n                    <Dropdown.Item key={\"none\"} onClick={setCurrentEffect.bind(null, undefined)}> ----- </Dropdown.Item>\r\n                    {availableEffects}\r\n                </DropdownButton>\r\n            </div>\r\n            <div className=\"effector-param\">\r\n                {effectorParams}\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = (state, ownProps) => ({\r\n    availableEffects: state.effector.effects,\r\n    channelState: state.effector.channels[ownProps.channel]\r\n})\r\n\r\nconst mapDispachToProps = (dispatch, ownProps) => ({\r\n    setParameter: (...args) => dispatch(setEffectParametr(ownProps.channel, ...args)),\r\n    setCurrentEffect: (effect) => dispatch(setCurrentEffect(ownProps.channel, effect)),\r\n    setDryWet: (value) => dispatch(setDryWet(ownProps.channel, value))\r\n})\r\n\r\nexport default connect(mapStateToProps, mapDispachToProps)(Effector);\r\n\r\n\r\n"]},"metadata":{},"sourceType":"module"}