{"ast":null,"code":"var _jsxFileName = \"D:\\\\PROJEKTY\\\\APKI\\\\DjTruck\\\\djtruck\\\\src\\\\pages\\\\app\\\\components\\\\PlayListExplorer\\\\Explorer\\\\ExplorerTree\\\\ExplorerTree.js\";\nimport React, { useCallback, useState, Fragment } from \"react\";\nimport { connect } from \"react-redux\";\nimport \"./explorer-tree.scss\";\nimport { toggleDir, setSelection } from \"./../../../../../../actions\";\nimport { isEmpty, sortObj } from \"./../../../../../../utils/objects/helpers\";\nimport UUID from \"uuidjs\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport ClassName from \"classnames\";\nimport { faFolder, faFile, faAngleRight, faAngleDown } from \"@fortawesome/free-solid-svg-icons\";\n\nconst ExplorerTree = props => {\n  const toogleDir = useCallback(path => {\n    console.log(\"doubel clicked\");\n    props.toogleDir(path);\n  }, [props.toogleDir]);\n  const setSelection = useCallback(path => {\n    props.setSelection(path);\n  }, [props.setSelection]);\n  const [lastClick, setLastClick] = useState(null);\n  const [timerHandler, setTimerHandler] = useState(null);\n  const liClickHandler = useCallback(path => {\n    const now = new Date().getTime();\n\n    if (timerHandler === null) {\n      setTimerHandler(setTimeout(() => {\n        setSelection.bind(null, path);\n        clearTimeout(timerHandler);\n        setTimerHandler(null);\n      }), 500);\n    } else if (lastClick - now < 500) {\n      clearTimeout(timerHandler);\n      setTimerHandler(null);\n      toogleDir(path);\n    }\n  }, [setLastClick, setTimerHandler, lastClick, timerHandler]);\n  const getDirElement = useCallback((name, path, open, empty) => {\n    const liClassList = ClassName(\"list-item item-dir\", {\n      \"item-dir--empty\": empty\n    }, {\n      \"item--selected\": [...path, name].join(\"\") === props.currentSelection.join(\"\")\n    });\n    return React.createElement(\"li\", {\n      // onDoubleClick={e=>console.log(\"a\")}\n      onClick: liClickHandler([...path, name]),\n      className: liClassList,\n      \"data-path\": path.join(\"/\"),\n      key: UUID.genV1(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 46\n      },\n      __self: this\n    }, !empty && React.createElement(\"button\", {\n      className: \"btn-dir \" + (open ? \"btn-dir--expand\" : \"btn-dir--colapse\"),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 53\n      },\n      __self: this\n    }, React.createElement(FontAwesomeIcon, {\n      className: \"icon\",\n      icon: open ? faAngleDown : faAngleRight,\n      onClick: toogleDir.bind(null, [...path, name]),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55\n      },\n      __self: this\n    })), React.createElement(FontAwesomeIcon, {\n      className: \"icon icon-dir\",\n      icon: faFolder,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60\n      },\n      __self: this\n    }), name);\n  });\n  const getFileElement = useCallback((name, path) => {\n    const liClassList = ClassName(\"list-item item-file\", {\n      \"item--selected\": [...path, name].join(\"\") === props.currentSelection.join(\"\")\n    });\n    return React.createElement(\"li\", {\n      className: liClassList,\n      onClick: setSelection.bind(null, [...path, name]),\n      \"data-path\": path.join(\"/\"),\n      key: UUID.genV1(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72\n      },\n      __self: this\n    }, React.createElement(FontAwesomeIcon, {\n      className: \"icon icon-file\",\n      icon: faFile,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77\n      },\n      __self: this\n    }), name);\n  });\n  const renderDirElements = useCallback((name, content, path) => {\n    content = sortObj(content);\n\n    if (content instanceof Array) {\n      return getFileElement(name, path);\n    } else {\n      if (content._open === true) {\n        return React.createElement(Fragment, {\n          key: UUID.genV1(),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 90\n          },\n          __self: this\n        }, getDirElement(name, path, true), renderDir(content, [...path, name]));\n      } else {\n        if (isEmpty(content)) {\n          return getDirElement(name, path, false, true);\n        }\n\n        return getDirElement(name, path, false);\n      }\n    }\n  });\n  const renderDir = useCallback((dir, path) => {\n    return React.createElement(\"ul\", {\n      className: \"list-dir dir-content\",\n      key: UUID.generate(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107\n      },\n      __self: this\n    }, Object.entries(dir).map(([name, content]) => {\n      if (name === \"_open\") {\n        return null;\n      }\n\n      return renderDirElements(name, content, path);\n    }));\n  });\n  return React.createElement(\"div\", {\n    className: \"explorer-tree\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121\n    },\n    __self: this\n  }, renderDir(props.root, ['root']));\n};\n\nconst mapStateToProps = state => ({\n  root: state.playList.root,\n  currentSelection: state.playList.currentSelection\n});\n\nconst mapDispatchToProps = dispatch => ({\n  toogleDir: path => dispatch(toggleDir(path)),\n  setSelection: path => dispatch(setSelection(path))\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ExplorerTree);","map":{"version":3,"sources":["D:/PROJEKTY/APKI/DjTruck/djtruck/src/pages/app/components/PlayListExplorer/Explorer/ExplorerTree/ExplorerTree.js"],"names":["React","useCallback","useState","Fragment","connect","toggleDir","setSelection","isEmpty","sortObj","UUID","FontAwesomeIcon","ClassName","faFolder","faFile","faAngleRight","faAngleDown","ExplorerTree","props","toogleDir","path","console","log","lastClick","setLastClick","timerHandler","setTimerHandler","liClickHandler","now","Date","getTime","setTimeout","bind","clearTimeout","getDirElement","name","open","empty","liClassList","join","currentSelection","genV1","getFileElement","renderDirElements","content","Array","_open","renderDir","dir","generate","Object","entries","map","root","mapStateToProps","state","playList","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React, { useCallback, useState, Fragment } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport \"./explorer-tree.scss\";\r\nimport { toggleDir, setSelection} from \"./../../../../../../actions\"\r\nimport { isEmpty, sortObj } from \"./../../../../../../utils/objects/helpers\";\r\nimport UUID from \"uuidjs\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport ClassName from \"classnames\";\r\nimport { faFolder,  faFile, faAngleRight, faAngleDown } from \"@fortawesome/free-solid-svg-icons\";\r\n\r\nconst ExplorerTree = props => {\r\n\r\n    const toogleDir = useCallback((path) => {\r\n        console.log(\"doubel clicked\")\r\n        props.toogleDir(path);\r\n    }, [props.toogleDir])\r\n\r\n    const setSelection = useCallback((path)=>{\r\n        props.setSelection(path);\r\n    }, [props.setSelection])\r\n\r\n    const [lastClick, setLastClick] = useState(null);\r\n    const [timerHandler, setTimerHandler] = useState(null);\r\n    const liClickHandler = useCallback((path)=>{\r\n        const now = new Date().getTime();\r\n        if(timerHandler === null){\r\n            setTimerHandler(setTimeout(()=>{\r\n                setSelection.bind(null, path);\r\n                clearTimeout(timerHandler);\r\n                setTimerHandler(null);\r\n            }), 500)\r\n        } else if (lastClick - now < 500){\r\n            clearTimeout(timerHandler);\r\n            setTimerHandler(null);\r\n            toogleDir(path)\r\n        }\r\n    }, [setLastClick, setTimerHandler, lastClick, timerHandler])\r\n\r\n    const getDirElement = useCallback((name, path, open, empty) => {\r\n        const liClassList = ClassName(\r\n            \"list-item item-dir\",\r\n            {\"item-dir--empty\" : empty},\r\n            {\"item--selected\": [...path, name].join(\"\") === props.currentSelection.join(\"\")}\r\n        )\r\n        return (\r\n            <li\r\n               // onDoubleClick={e=>console.log(\"a\")}\r\n                onClick={liClickHandler([...path, name])}\r\n                className={liClassList}\r\n                data-path={path.join(\"/\")}\r\n                key={UUID.genV1()}>\r\n                {!empty &&\r\n                    <button\r\n                        className={\"btn-dir \" + ((open) ? \"btn-dir--expand\" : \"btn-dir--colapse\")}>\r\n                        <FontAwesomeIcon \r\n                            className=\"icon\" \r\n                            icon={(open) ? faAngleDown : faAngleRight } \r\n                            onClick={toogleDir.bind(null, [...path, name])}/>\r\n                    </button>}\r\n                    <FontAwesomeIcon className=\"icon icon-dir\" icon={faFolder} />\r\n                    {name}\r\n            </li>\r\n        )\r\n    })\r\n\r\n    const getFileElement = useCallback((name, path) => {\r\n        const liClassList = ClassName(\r\n            \"list-item item-file\",\r\n            {\"item--selected\": [...path, name].join(\"\") === props.currentSelection.join(\"\")}\r\n        )\r\n        return (\r\n            <li\r\n                className={liClassList}\r\n                onClick={setSelection.bind(null, [...path, name])}\r\n                data-path={path.join(\"/\")}\r\n                key={UUID.genV1()}>\r\n                <FontAwesomeIcon className=\"icon icon-file\" icon={faFile} />\r\n                {name}\r\n            </li>\r\n        );\r\n    })\r\n\r\n    const renderDirElements = useCallback((name, content, path) => {\r\n        content = sortObj(content);\r\n        if (content instanceof Array) {\r\n            return getFileElement(name, path)\r\n        } else {\r\n            if (content._open === true) {\r\n                return (\r\n                    <Fragment key={UUID.genV1()}>\r\n                        {getDirElement(name, path, true)}\r\n                        {renderDir(content, [...path, name])}\r\n                    </Fragment>\r\n                )\r\n            } else {\r\n                if (isEmpty(content)) {\r\n                    return getDirElement(name, path, false, true)\r\n                }\r\n                return getDirElement(name, path, false)\r\n            }\r\n        }\r\n    })\r\n\r\n\r\n    const renderDir = useCallback((dir, path) => {\r\n        return (\r\n            <ul className=\"list-dir dir-content\" key={UUID.generate()}>\r\n                {\r\n                    Object.entries(dir).map(([name, content]) => {\r\n                        if (name === \"_open\") {\r\n                            return null;\r\n                        }\r\n                        return renderDirElements(name, content, path);\r\n                    })\r\n                }\r\n            </ul>\r\n        )\r\n    })\r\n\r\n    return (\r\n        <div className=\"explorer-tree\">\r\n            {renderDir(props.root, ['root'])}\r\n        </div>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n    root: state.playList.root,\r\n    currentSelection : state.playList.currentSelection\r\n})\r\n\r\nconst mapDispatchToProps = dispatch => ({\r\n    toogleDir: path => dispatch(toggleDir(path)),\r\n    setSelection : path => dispatch(setSelection(path))\r\n})\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ExplorerTree);"]},"metadata":{},"sourceType":"module"}