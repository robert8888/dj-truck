{"ast":null,"code":"import _objectSpread from\"D:\\\\PROJEKTY\\\\APKI\\\\dj-truck\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import{produce}from\"imer\";import{set}from\"lodash/object\";import{ACTIONS}from\"./../../actions\";var initState={current:null};export default function(){var state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:initState;var action=arguments.length>1?arguments[1]:undefined;switch(action.type){case ACTIONS.P_SET_PROFILE:{return _objectSpread({},state,{current:action.profile});}case ACTIONS.P_SET_PROFILE_DESCRIPTION:{var userId=action.userId,description=action.description;return setOnCurrent(state,userId,[{path:['description'],value:description}]);}case ACTIONS.P_SET_PROFILE_NICKNAME:{var _userId=action.userId,nickname=action.nickname;console.log(\"reducer\",_userId,nickname);return setOnCurrent(state,_userId,[{path:['user','nickname'],value:nickname}]);}case ACTIONS.P_SET_PROFILE_PICTURE:{var _userId2=action.userId,picture=action.picture;return setOnCurrent(state,_userId2,[{path:['user','picture'],value:picture}]);}default:return state;}}function setOnCurrent(state,userId,props){var current=state.current;if(!current||!userId||!props||current.user.id!==userId){return state;}return produce(state,function(drafState){var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=props[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var prop=_step.value;set(drafState.current,prop.path,prop.value);}}catch(err){_didIteratorError=true;_iteratorError=err;}finally{try{if(!_iteratorNormalCompletion&&_iterator.return!=null){_iterator.return();}}finally{if(_didIteratorError){throw _iteratorError;}}}});}","map":{"version":3,"sources":["D:/PROJEKTY/APKI/dj-truck/src/reducers/profile/profileReducer.js"],"names":["produce","set","ACTIONS","initState","current","state","action","type","P_SET_PROFILE","profile","P_SET_PROFILE_DESCRIPTION","userId","description","setOnCurrent","path","value","P_SET_PROFILE_NICKNAME","nickname","console","log","P_SET_PROFILE_PICTURE","picture","props","user","id","drafState","prop"],"mappings":"iHAAA,OAASA,OAAT,KAAwB,MAAxB,CACA,OAASC,GAAT,KAAoB,eAApB,CACA,OAASC,OAAT,KAAwB,iBAAxB,CAEA,GAAMC,CAAAA,SAAS,CAAG,CACdC,OAAO,CAAE,IADK,CAAlB,CAIA,cAAe,WAAqC,IAA3BC,CAAAA,KAA2B,2DAAnBF,SAAmB,IAARG,CAAAA,MAAQ,2CAChD,OAAQA,MAAM,CAACC,IAAf,EAEI,IAAKL,CAAAA,OAAO,CAACM,aAAb,CAA4B,CACxB,wBACOH,KADP,EAEID,OAAO,CAAEE,MAAM,CAACG,OAFpB,GAIH,CAED,IAAKP,CAAAA,OAAO,CAACQ,yBAAb,CAAwC,IAC5BC,CAAAA,MAD4B,CACJL,MADI,CAC5BK,MAD4B,CACpBC,WADoB,CACJN,MADI,CACpBM,WADoB,CAEpC,MAAOC,CAAAA,YAAY,CAACR,KAAD,CAAQM,MAAR,CAAgB,CAAC,CAAEG,IAAI,CAAG,CAAC,aAAD,CAAT,CAA0BC,KAAK,CAAGH,WAAlC,CAAD,CAAhB,CAAnB,CACH,CAED,IAAKV,CAAAA,OAAO,CAACc,sBAAb,CAAqC,IACzBL,CAAAA,OADyB,CACJL,MADI,CACzBK,MADyB,CACjBM,QADiB,CACJX,MADI,CACjBW,QADiB,CAEjCC,OAAO,CAACC,GAAR,CAAY,SAAZ,CAAuBR,OAAvB,CAA+BM,QAA/B,EACA,MAAOJ,CAAAA,YAAY,CAACR,KAAD,CAAQM,OAAR,CAAgB,CAAC,CAAEG,IAAI,CAAG,CAAC,MAAD,CAAS,UAAT,CAAT,CAA+BC,KAAK,CAAGE,QAAvC,CAAD,CAAhB,CAAnB,CACH,CAED,IAAKf,CAAAA,OAAO,CAACkB,qBAAb,CAAoC,IACxBT,CAAAA,QADwB,CACJL,MADI,CACxBK,MADwB,CAChBU,OADgB,CACJf,MADI,CAChBe,OADgB,CAEhC,MAAOR,CAAAA,YAAY,CAACR,KAAD,CAAQM,QAAR,CAAgB,CAAC,CAAEG,IAAI,CAAG,CAAC,MAAD,CAAS,SAAT,CAAT,CAA8BC,KAAK,CAAEM,OAArC,CAAD,CAAhB,CAAnB,CACH,CAED,QAAS,MAAOhB,CAAAA,KAAP,CAzBb,CA2BH,CAED,QAASQ,CAAAA,YAAT,CAAsBR,KAAtB,CAA6BM,MAA7B,CAAqCW,KAArC,CAA4C,CACxC,GAAMlB,CAAAA,OAAO,CAAGC,KAAK,CAACD,OAAtB,CACA,GAAI,CAACA,OAAD,EACA,CAACO,MADD,EAEA,CAACW,KAFD,EAGAlB,OAAO,CAACmB,IAAR,CAAaC,EAAb,GAAoBb,MAHxB,CAGgC,CAC5B,MAAON,CAAAA,KAAP,CACH,CACD,MAAOL,CAAAA,OAAO,CAACK,KAAD,CAAQ,SAAAoB,SAAS,CAAI,iGAC/B,kBAAiBH,KAAjB,oHAAwB,IAAfI,CAAAA,IAAe,aACpBzB,GAAG,CAACwB,SAAS,CAACrB,OAAX,CAAoBsB,IAAI,CAACZ,IAAzB,CAA+BY,IAAI,CAACX,KAApC,CAAH,CACH,CAH8B,qMAIlC,CAJa,CAAd,CAKH","sourcesContent":["import { produce } from \"imer\";\r\nimport { set } from \"lodash/object\";\r\nimport { ACTIONS } from \"./../../actions\";\r\n\r\nconst initState = {\r\n    current: null,\r\n}\r\n\r\nexport default function (state = initState, action) {\r\n    switch (action.type) {\r\n\r\n        case ACTIONS.P_SET_PROFILE: {\r\n            return {\r\n                ...state,\r\n                current: action.profile\r\n            }\r\n        }\r\n\r\n        case ACTIONS.P_SET_PROFILE_DESCRIPTION: {\r\n            const { userId, description } = action;\r\n            return setOnCurrent(state, userId, [{ path:  ['description'], value : description }])\r\n        }\r\n\r\n        case ACTIONS.P_SET_PROFILE_NICKNAME: {\r\n            const { userId, nickname } = action;\r\n            console.log(\"reducer\", userId, nickname);\r\n            return setOnCurrent(state, userId, [{ path:  ['user', 'nickname'], value : nickname }])\r\n        }\r\n\r\n        case ACTIONS.P_SET_PROFILE_PICTURE: {\r\n            const { userId, picture } = action;\r\n            return setOnCurrent(state, userId, [{ path:  ['user', 'picture'], value: picture }])\r\n        }\r\n\r\n        default: return state;\r\n    }\r\n}\r\n\r\nfunction setOnCurrent(state, userId, props) {\r\n    const current = state.current;\r\n    if (!current ||\r\n        !userId ||\r\n        !props ||\r\n        current.user.id !== userId) {\r\n        return state;\r\n    }\r\n    return produce(state, drafState => {\r\n        for (let prop of props) {\r\n            set(drafState.current, prop.path, prop.value)\r\n        }\r\n    })\r\n}"]},"metadata":{},"sourceType":"module"}