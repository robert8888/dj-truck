{"ast":null,"code":"var _jsxFileName = \"D:\\\\PROJEKTY\\\\APKI\\\\dj-truck\\\\src\\\\pages\\\\common\\\\components\\\\RecordList\\\\ListItem\\\\WaveSurrferPlayer\\\\WaveSurferPlayer.js\";\nimport React, { useRef, useEffect, useState, useCallback } from \"react\";\nimport WaveSurfer from \"wavesurfer\";\nimport style from \"./wave-surfer-player.scss\";\nimport { PLAYBACK_STATE } from \"./../PlaybackButton/PlaybackButton\";\n\nconst WaveSurferPlayer = ({\n  peaks,\n  url,\n  playback\n}) => {\n  const containerRef = useRef(null);\n  const [container, setContainerRef] = useState(null);\n  const [loaded, setLoaded] = useState(false);\n  const [ws, setWs] = useState(null);\n  const onContainerRef = useCallback(ref => {\n    setContainerRef(ref);\n  }, [setContainerRef]);\n  useEffect(() => {\n    if (container) {\n      const ws = new Promise((res, rej) => {\n        try {\n          const ws = WaveSurfer.create({\n            container: container,\n            barWidth: 5,\n            height: 100,\n            waveColor: style.waveColor,\n            progressColor: style.progressColor,\n            backend: 'MediaElement',\n            mediaType: \"audio\"\n          });\n          res(ws);\n        } catch (err) {\n          rej(err);\n        }\n      });\n      ws.then(ws => {\n        if (peaks) {\n          ws.load(null, peaks);\n        }\n\n        setWs(ws);\n      });\n    }\n  }, [container, peaks, url, setWs]);\n  useEffect(() => {\n    if (playback === PLAYBACK_STATE.PLAY && ws && url && peaks && !loaded) {\n      ws.load(url, peaks, 'metadata');\n      setLoaded(true);\n    } else if (playback === PLAYBACK_STATE.PLAY && loaded) {\n      ws.play();\n    } else if (playback === PLAYBACK_STATE.PAUSE && loaded) {\n      ws.pause();\n    }\n  }, [playback, peaks, url, ws, loaded]);\n  return React.createElement(\"div\", {\n    className: \"ws-player-container\",\n    ref: onContainerRef,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58\n    },\n    __self: this\n  });\n};\n\nexport default WaveSurferPlayer;","map":{"version":3,"sources":["D:/PROJEKTY/APKI/dj-truck/src/pages/common/components/RecordList/ListItem/WaveSurrferPlayer/WaveSurferPlayer.js"],"names":["React","useRef","useEffect","useState","useCallback","WaveSurfer","style","PLAYBACK_STATE","WaveSurferPlayer","peaks","url","playback","containerRef","container","setContainerRef","loaded","setLoaded","ws","setWs","onContainerRef","ref","Promise","res","rej","create","barWidth","height","waveColor","progressColor","backend","mediaType","err","then","load","PLAY","play","PAUSE","pause"],"mappings":"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","sourcesContent":["import React, {useRef, useEffect, useState, useCallback} from \"react\";\r\nimport WaveSurfer from \"wavesurfer\";\r\nimport style from \"./wave-surfer-player.scss\";\r\nimport {PLAYBACK_STATE} from \"./../PlaybackButton/PlaybackButton\"\r\n\r\nconst WaveSurferPlayer = ({peaks, url, playback}) => {\r\n    const containerRef = useRef(null)\r\n    \r\n    const [container, setContainerRef] = useState(null);\r\n    const [loaded, setLoaded] = useState(false);\r\n    const [ws, setWs] = useState(null)\r\n\r\n    const onContainerRef = useCallback( (ref) => {\r\n        setContainerRef(ref);\r\n    }, [setContainerRef])\r\n\r\n    useEffect(()=>{\r\n        if(container){\r\n            const ws = new Promise((res, rej)=>{\r\n                try{\r\n                    const ws = WaveSurfer.create({\r\n                        container: container,\r\n                        barWidth: 5,\r\n                        height: 100,\r\n                        waveColor: style.waveColor,\r\n                        progressColor: style.progressColor,\r\n                        backend: 'MediaElement',\r\n                        mediaType: \"audio\"\r\n                    })\r\n                    res(ws)\r\n                } catch (err){\r\n                    rej(err)\r\n                }\r\n            })\r\n\r\n            ws.then((ws) =>{\r\n                if(peaks){\r\n                    ws.load(null, peaks)\r\n                }\r\n                setWs(ws);\r\n            })\r\n        }\r\n    }, [container, peaks, url, setWs])\r\n\r\n\r\n    useEffect(()=>{\r\n        if(playback  === PLAYBACK_STATE.PLAY && ws && url && peaks && !loaded){\r\n            ws.load(url, peaks, 'metadata');\r\n            setLoaded(true)\r\n        } else if(playback === PLAYBACK_STATE.PLAY && loaded){\r\n            ws.play();\r\n        } else if(playback === PLAYBACK_STATE.PAUSE && loaded){\r\n            ws.pause()\r\n        }\r\n    }, [playback, peaks, url, ws, loaded])\r\n\r\n    return (\r\n        <div className=\"ws-player-container\" ref={onContainerRef}/>\r\n    )\r\n}\r\n\r\nexport default WaveSurferPlayer"]},"metadata":{},"sourceType":"module"}