{"ast":null,"code":"export function addAnimationFrame(waveSurfer) {\n  let lastCall = 0;\n\n  waveSurfer.drawer._recenterAndUpdate = function (pos, newPos) {\n    let now = new Date().getTime();\n\n    if (now - lastCall > 25) {\n      lastCall = now;\n      this.recenterOnPosition(newPos);\n      this.updateProgress(pos);\n    }\n  };\n\n  waveSurfer.drawer.progress = function (progress) {\n    var minPxDelta = 1 / this.params.pixelRatio;\n    var pos = Math.round(progress * this.width) * minPxDelta;\n\n    if (pos < this.lastPos || pos - this.lastPos >= minPxDelta) {\n      this.lastPos = pos;\n\n      if (this.params.scrollParent && this.params.autoCenter) {\n        var newPos = ~~(this.wrapper.scrollWidth * progress); //console.log(this._recenterAndUpdate(pos, newPos))\n\n        window.requestAnimationFrame(this._recenterAndUpdate.bind(this, pos, newPos));\n      } else {\n        this.updateProgress(pos);\n      }\n    }\n  };\n}","map":{"version":3,"sources":["D:/PROJEKTY/APKI/DjTruck/djtruck/src/pages/app/core/console/channels/channelBuilder/wsAnimationFrame.js"],"names":["addAnimationFrame","waveSurfer","lastCall","drawer","_recenterAndUpdate","pos","newPos","now","Date","getTime","recenterOnPosition","updateProgress","progress","minPxDelta","params","pixelRatio","Math","round","width","lastPos","scrollParent","autoCenter","wrapper","scrollWidth","window","requestAnimationFrame","bind"],"mappings":"AAAA,OAAO,SAASA,iBAAT,CAA2BC,UAA3B,EAAsC;AAGzC,MAAIC,QAAQ,GAAG,CAAf;;AACAD,EAAAA,UAAU,CAACE,MAAX,CAAkBC,kBAAlB,GAAuC,UAASC,GAAT,EAAcC,MAAd,EAAqB;AACxD,QAAIC,GAAG,GAAG,IAAIC,IAAJ,GAAWC,OAAX,EAAV;;AACA,QAAIF,GAAG,GAAIL,QAAP,GAAkB,EAAtB,EAAyB;AACrBA,MAAAA,QAAQ,GAAGK,GAAX;AACA,WAAKG,kBAAL,CAAwBJ,MAAxB;AACA,WAAKK,cAAL,CAAoBN,GAApB;AACH;AACJ,GAPD;;AASAJ,EAAAA,UAAU,CAACE,MAAX,CAAkBS,QAAlB,GAA6B,UAAUA,QAAV,EAAoB;AAC7C,QAAIC,UAAU,GAAG,IAAI,KAAKC,MAAL,CAAYC,UAAjC;AACA,QAAIV,GAAG,GAAGW,IAAI,CAACC,KAAL,CAAWL,QAAQ,GAAG,KAAKM,KAA3B,IAAoCL,UAA9C;;AAEA,QAAIR,GAAG,GAAG,KAAKc,OAAX,IAAsBd,GAAG,GAAG,KAAKc,OAAX,IAAsBN,UAAhD,EAA4D;AACxD,WAAKM,OAAL,GAAed,GAAf;;AAEA,UAAI,KAAKS,MAAL,CAAYM,YAAZ,IAA4B,KAAKN,MAAL,CAAYO,UAA5C,EAAwD;AACpD,YAAIf,MAAM,GAAG,CAAC,EAAE,KAAKgB,OAAL,CAAaC,WAAb,GAA2BX,QAA7B,CAAd,CADoD,CAEpD;;AACAY,QAAAA,MAAM,CAACC,qBAAP,CAA6B,KAAKrB,kBAAL,CAAwBsB,IAAxB,CAA6B,IAA7B,EAAmCrB,GAAnC,EAAwCC,MAAxC,CAA7B;AACH,OAJD,MAIO;AACH,aAAKK,cAAL,CAAoBN,GAApB;AACH;AACJ;AACJ,GAfD;AAgBH","sourcesContent":["export function addAnimationFrame(waveSurfer){\r\n\r\n\r\n    let lastCall = 0;\r\n    waveSurfer.drawer._recenterAndUpdate = function(pos, newPos){\r\n        let now = new Date().getTime()\r\n        if( now  - lastCall > 25){\r\n            lastCall = now;\r\n            this.recenterOnPosition(newPos);\r\n            this.updateProgress(pos)\r\n        }\r\n    }\r\n\r\n    waveSurfer.drawer.progress = function (progress) {\r\n        var minPxDelta = 1 / this.params.pixelRatio;\r\n        var pos = Math.round(progress * this.width) * minPxDelta;\r\n\r\n        if (pos < this.lastPos || pos - this.lastPos >= minPxDelta) {\r\n            this.lastPos = pos;\r\n\r\n            if (this.params.scrollParent && this.params.autoCenter) {\r\n                var newPos = ~~(this.wrapper.scrollWidth * progress);\r\n                //console.log(this._recenterAndUpdate(pos, newPos))\r\n                window.requestAnimationFrame(this._recenterAndUpdate.bind(this, pos, newPos))\r\n            } else {\r\n                this.updateProgress(pos);\r\n            }\r\n        }\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}