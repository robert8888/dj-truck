{"ast":null,"code":"import _toConsumableArray from\"D:\\\\PROJEKTY\\\\APKI\\\\dj-truck\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"D:\\\\PROJEKTY\\\\APKI\\\\dj-truck\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useCallback,useRef,useState,useEffect}from'react';import{FontAwesomeIcon}from'@fortawesome/react-fontawesome';import{faAngleDoubleLeft,faAngleDoubleRight}from\"@fortawesome/free-solid-svg-icons\";import icons from\"./emoji.json\";import\"./emoticons.scss\";var perPanel=30;var Emoticons=function Emoticons(_ref){var onSelect=_ref.onSelect,toggle=_ref.toggle;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),iconPanels=_useState2[0],setPanels=_useState2[1];var panelsLen=useRef();var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),display=_useState4[0],setDisplay=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),currentSlide=_useState6[0],setCurrentSlide=_useState6[1];var createPanels=useCallback(function(from,to){var _to;to=(_to=to)!==null&&_to!==void 0?_to:from+1;if(to*perPanel>icons.length)return;var panels=[];for(var i=perPanel*from;i<perPanel*to;i+=perPanel){var panel=[];for(var j=i;j<perPanel+i&&j<icons.length;j++){var icon=icons[j];panel.push(React.createElement(\"button\",{key:'icon-'+(i+j),className:\"emoticons-btn\",onClick:onSelect.bind(null,icon.emoji)},icon.emoji));}panels.push(React.createElement(\"section\",{className:\"emoticons-panel\",key:'pannel-'+i},panel));}if(!panelsLen.current){panelsLen.current=0;}panelsLen.current+=panels.length;return panels;},[]);var createNext=useCallback(function(){setPanels(function(panels){return[].concat(_toConsumableArray(panels),[createPanels(panelsLen.current)]);});},[setPanels,createPanels,panelsLen]);var next=useCallback(function(event){event.preventDefault();setCurrentSlide(function(c){if(c+1<panelsLen.current){return c+1;}return c;});createNext();},[panelsLen,createNext]);var prev=useCallback(function(event){event.preventDefault();setCurrentSlide(function(c){if(c-1>0){return c-1;}return c;});},[]);var toggleHandler=useCallback(function(){if(!panelsLen.current){setPanels(createPanels(0,5));}setDisplay(function(display){return!display;});},[setDisplay,setPanels,panelsLen,createPanels]);useEffect(function(){toggle.current=toggleHandler;},[toggle]);var hide=useCallback(function(event){if(!event.target.closest('.emoticons-container')&&!event.target.closest('.emoticon-btn')){window.removeEventListener('mousedown',hide);setDisplay(false);}},[setDisplay]);useEffect(function(){if(display){window.addEventListener('mousedown',hide);}else{window.removeEventListener('mousedown',hide);}},[display,setDisplay,hide]);return React.createElement(\"div\",{className:\"emoticons-container emoticons-popup\",style:{display:display?'block':'none'}},React.createElement(\"button\",{className:\"emoticons-nav-btn emoticons-btn-prev\",onClick:prev},React.createElement(FontAwesomeIcon,{icon:faAngleDoubleLeft,className:\"emoticons-btn-icon\"})),React.createElement(\"div\",{className:\"emoticons-slider\"},React.createElement(\"div\",{className:\"emoticons-slides\",style:{transform:\"translateX(-\".concat(currentSlide*210,\"px)\"),transition:'transform 0.2s'}},iconPanels)),React.createElement(\"button\",{className:\"emoticons-nav-btn  emoticons-btn-next\",onClick:next},React.createElement(FontAwesomeIcon,{icon:faAngleDoubleRight,className:\"emoticons-btn-icon\"})));};export default Emoticons;","map":{"version":3,"sources":["D:/PROJEKTY/APKI/dj-truck/src/pages/common/components/Emoticons/Emoticons.js"],"names":["React","useCallback","useRef","useState","useEffect","FontAwesomeIcon","faAngleDoubleLeft","faAngleDoubleRight","icons","perPanel","Emoticons","onSelect","toggle","iconPanels","setPanels","panelsLen","display","setDisplay","currentSlide","setCurrentSlide","createPanels","from","to","length","panels","i","panel","j","icon","push","bind","emoji","current","createNext","next","event","preventDefault","c","prev","toggleHandler","hide","target","closest","window","removeEventListener","addEventListener","transform","transition"],"mappings":"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","sourcesContent":["import React, { useCallback, useRef, useState, useEffect } from 'react';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\nimport { faAngleDoubleLeft, faAngleDoubleRight } from \"@fortawesome/free-solid-svg-icons\";\r\nimport icons from \"./emoji.json\";\r\nimport \"./emoticons.scss\";\r\nconst perPanel = 30;\r\n\r\nconst Emoticons = ({ onSelect, toggle }) => {\r\n    const [iconPanels, setPanels] = useState(null);\r\n    const panelsLen = useRef();\r\n    const [display, setDisplay] = useState(false);\r\n    const [currentSlide, setCurrentSlide] = useState(0);\r\n\r\n    const createPanels = useCallback((from, to) => {\r\n        to = to ?? from + 1;\r\n        if(to * perPanel > icons.length) return;\r\n\r\n        let panels = [];\r\n        for (let i = perPanel * from; i < perPanel * to; i += perPanel) {\r\n            let panel = [];\r\n            for (let j = i; (j < perPanel + i) && (j <  icons.length); j++) {\r\n                let icon = icons[j]\r\n                panel.push(\r\n                    <button key={'icon-' + (i + j)} className=\"emoticons-btn\" onClick={onSelect.bind(null, icon.emoji)}>{icon.emoji}</button>\r\n                )\r\n            }\r\n            panels.push(\r\n                <section className=\"emoticons-panel\" key={'pannel-' + i}>\r\n                    {panel}\r\n                </section>\r\n            )\r\n        }\r\n        if(!panelsLen.current){\r\n            panelsLen.current = 0;\r\n        }\r\n        panelsLen.current += panels.length;\r\n        return panels;\r\n    }, [])\r\n\r\n    const createNext = useCallback(()=>{\r\n        setPanels( panels => [...panels, createPanels(panelsLen.current)])\r\n    }, [setPanels, createPanels, panelsLen])\r\n\r\n    const next = useCallback((event) => {\r\n        event.preventDefault();\r\n        setCurrentSlide(c => {\r\n            if (c + 1 < panelsLen.current) {\r\n                return c + 1;\r\n            }\r\n            return c;\r\n        });\r\n        createNext();\r\n    }, [panelsLen, createNext])\r\n\r\n    const prev = useCallback((event) => {\r\n        event.preventDefault();\r\n        setCurrentSlide(c => {\r\n            if (c - 1 > 0) {\r\n                return c - 1;\r\n            }\r\n            return c;\r\n        })\r\n    }, [])\r\n\r\n    const toggleHandler = useCallback(() => {\r\n        if (!panelsLen.current) {\r\n            setPanels(createPanels(0, 5));\r\n        }\r\n        setDisplay(display => !display);\r\n    }, [setDisplay, setPanels, panelsLen, createPanels])\r\n\r\n    useEffect(() => {\r\n        toggle.current = toggleHandler\r\n    }, [toggle])\r\n\r\n    const hide = useCallback(event => {\r\n        if (!event.target.closest('.emoticons-container') &&\r\n            !event.target.closest('.emoticon-btn')) {\r\n                window.removeEventListener('mousedown', hide);\r\n                setDisplay(false)\r\n        }\r\n    }, [setDisplay])\r\n\r\n    useEffect(() => {\r\n        if (display) {\r\n            window.addEventListener('mousedown', hide);\r\n        } else {\r\n            window.removeEventListener('mousedown', hide)\r\n        }\r\n    }, [display, setDisplay, hide])\r\n\r\n    return (\r\n        <div className=\"emoticons-container emoticons-popup\" style={{display: (display) ? 'block' : 'none' }}>\r\n            <button className=\"emoticons-nav-btn emoticons-btn-prev\" onClick={prev}>\r\n                <FontAwesomeIcon icon={faAngleDoubleLeft} className=\"emoticons-btn-icon\" />\r\n            </button>\r\n            <div className=\"emoticons-slider\">\r\n                <div className=\"emoticons-slides\" style={{ transform: `translateX(-${currentSlide * 210}px)`, transition: 'transform 0.2s' }}>\r\n                    {iconPanels}\r\n                </div>\r\n            </div>\r\n            <button className=\"emoticons-nav-btn  emoticons-btn-next\" onClick={next}>\r\n                <FontAwesomeIcon icon={faAngleDoubleRight} className=\"emoticons-btn-icon\" />\r\n            </button>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Emoticons;"]},"metadata":{},"sourceType":"module"}