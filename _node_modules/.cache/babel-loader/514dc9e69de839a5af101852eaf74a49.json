{"ast":null,"code":"import { hideLoading, showLoading } from 'react-redux-loading-bar';\nimport { call, put, takeEvery } from 'redux-saga/effects';\nimport { ACTIONS, pushLog, setSearchResults } from \"./../../actions\";\nimport { getApi } from './../../apis/apiProvider';\nimport { Log } from \"./../../utils/logger/logger\";\nexport default function* watcher() {\n  yield takeEvery(ACTIONS.SEARCH_START, searchAsync);\n}\n\nfunction* searchAsync(action) {\n  const path = ['saga', 'externalSearch', 'call to exteranl miusic source search api'];\n  const {\n    text: query,\n    source,\n    limit\n  } = action;\n\n  try {\n    yield put(showLoading());\n    const api = getApi(source);\n    const results = yield call(api.search, query, limit);\n\n    if (results.error) {\n      throw new Error(JSON.stringify(error));\n    }\n\n    yield put(setSearchResults(results));\n    yield put(pushLog(new Log(`Successful recive search result for query${query} on source: ${source}`, path)));\n  } catch (error) {\n    yield put(pushLog(Log.Error(path, \"Durring searching occured error: \" + error.message, \"Sorry. During process of searching track occurred a problem\", error)));\n  } finally {\n    yield put(hideLoading());\n  }\n}","map":{"version":3,"sources":["D:/PROJEKTY/APKI/dj-truck/src/sagas/externalSearch/reqSearchResultSaga.js"],"names":["hideLoading","showLoading","call","put","takeEvery","ACTIONS","pushLog","setSearchResults","getApi","Log","watcher","SEARCH_START","searchAsync","action","path","text","query","source","limit","api","results","search","error","Error","JSON","stringify","message"],"mappings":"AACA,SAASA,WAAT,EAAsBC,WAAtB,QAAyC,yBAAzC;AACA,SAASC,IAAT,EAAeC,GAAf,EAAoBC,SAApB,QAAqC,oBAArC;AACA,SAASC,OAAT,EAAkBC,OAAlB,EAA2BC,gBAA3B,QAAmD,iBAAnD;AACA,SAASC,MAAT,QAAuB,0BAAvB;AACA,SAASC,GAAT,QAAoB,6BAApB;AAEA,eAAe,UAAUC,OAAV,GAAoB;AAC/B,QAAMN,SAAS,CAACC,OAAO,CAACM,YAAT,EAAuBC,WAAvB,CAAf;AACH;;AAGD,UAAUA,WAAV,CAAsBC,MAAtB,EAA8B;AAC1B,QAAMC,IAAI,GAAG,CAAC,MAAD,EAAS,gBAAT,EAA2B,2CAA3B,CAAb;AACA,QAAM;AAACC,IAAAA,IAAI,EAAEC,KAAP;AAAcC,IAAAA,MAAd;AAAsBC,IAAAA;AAAtB,MAA+BL,MAArC;;AACA,MAAI;AACA,UAAMV,GAAG,CAACF,WAAW,EAAZ,CAAT;AACA,UAAMkB,GAAG,GAAGX,MAAM,CAACS,MAAD,CAAlB;AACA,UAAMG,OAAO,GAAG,MAAMlB,IAAI,CAACiB,GAAG,CAACE,MAAL,EAAaL,KAAb,EAAoBE,KAApB,CAA1B;;AACA,QAAGE,OAAO,CAACE,KAAX,EAAiB;AACb,YAAM,IAAIC,KAAJ,CAAUC,IAAI,CAACC,SAAL,CAAeH,KAAf,CAAV,CAAN;AACH;;AAED,UAAMnB,GAAG,CAACI,gBAAgB,CAACa,OAAD,CAAjB,CAAT;AAEA,UAAMjB,GAAG,CAACG,OAAO,CACb,IAAIG,GAAJ,CAAS,4CAA2CO,KAAM,eAAcC,MAAO,EAA/E,EAAkFH,IAAlF,CADa,CAAR,CAAT;AAGH,GAbD,CAaE,OAAMQ,KAAN,EAAY;AACV,UAAMnB,GAAG,CAACG,OAAO,CAACG,GAAG,CAACc,KAAJ,CACdT,IADc,EAEd,sCAAsCQ,KAAK,CAACI,OAF9B,EAGd,6DAHc,EAIdJ,KAJc,CAAD,CAAR,CAAT;AAMH,GApBD,SAoBU;AACN,UAAMnB,GAAG,CAACH,WAAW,EAAZ,CAAT;AACH;AACJ","sourcesContent":["\r\nimport { hideLoading, showLoading } from 'react-redux-loading-bar';\r\nimport { call, put, takeEvery } from 'redux-saga/effects';\r\nimport { ACTIONS, pushLog, setSearchResults } from \"./../../actions\";\r\nimport { getApi } from './../../apis/apiProvider';\r\nimport { Log } from \"./../../utils/logger/logger\";\r\n\r\nexport default function* watcher() {\r\n    yield takeEvery(ACTIONS.SEARCH_START, searchAsync);\r\n}\r\n\r\n\r\nfunction* searchAsync(action) {\r\n    const path = ['saga', 'externalSearch', 'call to exteranl miusic source search api']\r\n    const {text: query, source, limit} = action;\r\n    try {\r\n        yield put(showLoading());\r\n        const api = getApi(source);\r\n        const results = yield call(api.search, query, limit);\r\n        if(results.error){\r\n            throw new Error(JSON.stringify(error));\r\n        }\r\n\r\n        yield put(setSearchResults(results));\r\n\r\n        yield put(pushLog(\r\n            new Log(`Successful recive search result for query${query} on source: ${source}`, path)\r\n        ))\r\n    } catch(error){\r\n        yield put(pushLog(Log.Error(\r\n            path,\r\n            \"Durring searching occured error: \" + error.message,\r\n            \"Sorry. During process of searching track occurred a problem\",\r\n            error\r\n        )))\r\n    } finally {\r\n        yield put(hideLoading())\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}